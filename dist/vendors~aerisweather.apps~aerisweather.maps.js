(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{309:function(t,e,o){"use strict";var r=o(332),n=function(){function t(){this.parentEvent=null,this._listeners={}}return t.prototype.on=function(t,e,o,r){var n=this;if(void 0===o&&(o=null),void 0===r&&(r=0),o=o||this,/\s+/.test(t))return t.split(" ").forEach((function(t){n.on(t,e,o,r)})),this;var i=this._listeners[t];null==i&&(i=[],this._listeners[t]=i);for(var a,s=0,c=i.length-1;c>-1;)(a=i[c]).callback===e&&a.scope===o?i.splice(c,1):0===s&&a.priority<r&&(s=c+1),c-=1;return i.splice(s,0,{callback:e,scope:o,priority:r,once:!1}),this},t.prototype.once=function(t,e,o,r){var n=this;return void 0===o&&(o=null),void 0===r&&(r=0),o=o||this,/\s+/.test(t)?(t.split(" ").forEach((function(t){n.once(t,e,o,r)})),this):(this.on(t,e,o,r),this._listeners[t][0].once=!0,this)},t.prototype.off=function(t,e,o){var r=this;if(void 0===o&&(o=null),o=o||this,/\s+/.test(t))return t.split(" ").forEach((function(t){r.off(t,e,o)})),this;var n=this._listeners[t];if(void 0!==n)for(var i=n.length-1;i>-1;){if(n[i].callback===e&&n[i].scope===o){n.splice(i,1);break}i-=1}return this},t.prototype.trigger=function(t,e){void 0===e&&(e=null);var o=t;"string"==typeof o?o=new r.a(t,!1,!0,e):o instanceof r.a&&(t=o.type),o instanceof r.a&&null==o.target&&(o.target=this,o.currentTarget=this);var n=this._listeners[t];if(void 0!==n)for(var i=n.slice(),a=i.length-1,s=void 0;a>-1&&(!0!==o.cancellable||!0!==o.isImmediatePropagationStopped);)(s=i[a]).callback.call(s.scope,o),!0===s.once&&this.off(o.type,s.callback,s.scope),a-=1;if(null!=this.parentEvent&&!0===o.bubbles){if(!0===o.cancellable&&!0===o.isImmediatePropagationStopped)return this;o.currentTarget=this,this.parentEvent.trigger(o)}return this},t.prototype.has=function(t){return void 0!==this._listeners[t]},t}();e.a=n},310:function(t,e,o){"use strict";o.r(e),o.d(e,"mapTimestampFromDate",(function(){return i})),o.d(e,"isCoordObject",(function(){return a})),o.d(e,"isLeaflet",(function(){return s})),o.d(e,"isMapbox",(function(){return c})),o.d(e,"isGoogle",(function(){return u})),o.d(e,"isOpenLayers",(function(){return p})),o.d(e,"loadMapModuleConfig",(function(){return l}));var r=o(110),n=o(3),i=function(t){var e=new Date(t.getTime()+60*t.getTimezoneOffset()*1e3);return Object(n.formatDate)(e,"yyyyMMddHHmm00")},a=function(t){if(Object(n.isPlainObject)(t)){var e=t.lat,o=t.lon;return Object(n.isset)(e)&&Object(n.isset)(o)}return!1},s=function(t){if(t){var e=Object(n.has)(t,"openPopup");if("undefined"!=typeof L&&(t instanceof L.map||t instanceof L.Map)&&e)return!0;if(!Object(n.isHTMLElement)(t)&&e)return!0}return!1},c=function(t){if(t){var e=Object(n.has)(t,"queryRenderedFeatures");if("undefined"!=typeof mapboxgl&&t instanceof mapboxgl.Map&&e)return!0;if(!Object(n.isHTMLElement)(t)&&e)return!0}return!1},u=function(t){if(t){var e=Object(n.has)(t,"getStreetView");if("undefined"!=typeof google&&t instanceof google.maps.Map&&e)return!0;if(!Object(n.isHTMLElement)(t)&&e)return!0}return!1},p=function(t){if(t){var e=Object(n.has)(t,"forEachFeatureAtPixel");if("undefined"!=typeof ol&&t instanceof ol.Map&&e)return!0;if(!Object(n.isHTMLElement)(t)&&e)return!0}return!1},l=function(t,e){Object(r.b)().then((function(o){var r=Object(n.get)(o,t);r&&r().then((function(t){var o=new(t=t.default||t);e(o.id,o.source(),o)}))}))}},311:function(t,e,o){"use strict";o.d(e,"b",(function(){return s}));var r,n=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=function(t){function e(e){var o=t.call(this,e)||this;return o.name=o.constructor.name,o.stack=(new Error).stack,o}return n(e,t),e}(Error),a=o(3),s=function(t){var e=Math.ceil(Math.abs(t.lat)/180);return t.lat>90?t.lat-=180*e:t.lat<-90&&(t.lat+=180*e),e=Math.ceil(Math.abs(t.lon)/360),t.lon>180?t.lon-=360*e:t.lon<-180&&(t.lon+=360*e),t},c=function(){function t(t,e){if(this.north=0,this.south=0,this.west=0,this.east=0,t=s(t),e=s(e),void 0===t||!Object(a.isObject)(t))throw new i("CoordinateBounds - northwest coordinate value is required");if(void 0===e||!Object(a.isObject)(e))throw new i("CoordinateBounds - southeast coordinate value is required");if(t.lat<e.lat)throw new i("CoordinateBounds - northern latitude must be greater than southern latitude");this.north=t.lat,this.south=e.lat,this.west=t.lon,this.east=e.lon}return t.fromBounds=function(e){return new t({lat:e.north,lon:e.west},{lat:e.south,lon:e.east})},t.fromPoints=function(e){var o={north:null,south:null,west:null,east:null};return e.forEach((function(t,e){0===e?(o.north=t.lat,o.south=t.lat,o.west=t.lon,o.east=t.lon):Object(a.isset)(t.lat)&&Object(a.isset)(t.lon)&&(o.north=Math.max(o.north,t.lat),o.south=Math.min(o.south,t.lat),o.west=Math.min(o.west,t.lon),o.east=Math.max(o.east,t.lon))})),t.fromBounds(o)},t.prototype.northwest=function(){return{lat:this.north,lon:this.west}},t.prototype.southwest=function(){return{lat:this.south,lon:this.west}},t.prototype.northeast=function(){return{lat:this.north,lon:this.east}},t.prototype.southeast=function(){return{lat:this.south,lon:this.east}},t.prototype.center=function(){return{lat:this.north-(this.north-this.south)/2,lon:this.west-(this.west-this.east)/2}},t.prototype.extend=function(t){if(!(this.north||this.south||this.west||this.east))return this.north=t.lat,this.south=t.lat,this.west=t.lon,void(this.east=t.lon);this.north=Math.max(this.north,t.lat),this.south=Math.min(this.south,t.lat),this.west=Math.min(this.west,t.lon),this.east=Math.max(this.east,t.lon)},t.prototype.intersects=function(t){if(this.contains(t))return!1;var e=t.north,o=t.south,r=t.east,n=t.west;return(e<=this.north&&e>=this.south||o>=this.south&&o<=this.north)&&(n>=this.west&&n<=this.east||r<=this.east&&r>=this.west)},t.prototype.contains=function(e){if(e instanceof t){var o=e,r=o.north,n=o.south,i=o.east,a=o.west;return r<this.north&&n>this.south&&a>this.west&&i<this.east}var s=e,c=s.lat,u=s.lon;return c<this.north&&c>this.south&&u>this.west&&u<this.east},t.prototype.toString=function(){return this.north+","+this.west+","+this.south+","+this.east},t}();e.a=c},313:function(t,e,o){"use strict";var r,n=o(309),i=o(333),a=o(326),s=o(3),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t){function e(e,o,r){var n=t.call(this)||this;n._hidden=!1,n.key=e,n.enabled=!0,(r=Object(s.extend)({id:void 0,type:"tile",subdomains:["1","2","3","4"],time:0,offset:void 0,opacity:1,future:!1,alwaysShow:!1,animation:{enabled:!0,type:"tile"}},r)).time&&!Object(s.isDate)(r.time)&&Object(s.isNumber)(r.time)&&(r.time=new Date((new Date).getTime()+r.time)),Object(s.isset)(r.offset)&&(r.animation.enabled=!1),n.key=e,n._service=o,n._opts=r;var c=r.style||{};n._opacity=c.opacity||1;var u=Object(s.extend)({key:e,type:"tile",enabled:!0,future:!1,alwaysShow:!1,showWhenStopped:!1},Object(s.pick)(r,["future","alwaysShow"]),r.animation),p="image"===u.type?new a.a(null,u):new i.a(u);return p.provider=n,p.on("stop reset",(function(t){p.hide(),n.updateVisibility()})),"tile"===u.type&&p.on("load:progress play",(function(t){n.hide()})),n._animation=p,n}return c(e,t),Object.defineProperty(e.prototype,"identifier",{get:function(){return this._opts.id||this.key},set:function(t){this._opts.id=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this.service.url()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overlay",{get:function(){return this._overlay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{get:function(){return this._timestamp},set:function(t){this._timestamp=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"service",{get:function(){return this._service},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animation",{get:function(){return this._animation},enumerable:!0,configurable:!0}),e.prototype.urlTemplate=function(){if(Object(s.isset)(this._opts.offset))this.service.offset((""+this._opts.offset).replace(/\s/g,""));else{var t=new Date(this._timestamp);t=new Date(t.getTime()+60*t.getTimezoneOffset()*1e3),this.service.offset(Object(s.formatDate)(t,"yyyyMMddHHmm00"))}return this.service.url()},e.prototype.isFuture=function(){return this._opts.future},e.prototype.updateVisibility=function(){this.canShow()?this.show():this.hide()},e.prototype.canShow=function(){var t=(new Date).getTime(),e=this._timestamp.getTime();return this._opts.alwaysShow||this.isFuture()&&e>t||!this.isFuture()&&e<=t},e.prototype.isAnimationActive=function(){return this.animation&&(this.animation.canAnimate()||this.animation.isAnimating())},e.prototype.isAnimating=function(){return this.animation&&this.animation.isAnimating()},e.prototype.show=function(){throw new Error("Implementation must override abstract `show`")},e.prototype.hide=function(){throw new Error("Implementation must override abstract `hide`")},e.prototype.remove=function(){throw new Error("Implementation must override abstract `remove`")},e.prototype.isVisible=function(){return!1===this._hidden},e.prototype.setOpacity=function(t){throw new Error("Implementation must override abstract `setOpacity:`")},e.prototype.setOrder=function(t){throw new Error("Implementation must override abstract `setOrder:`")},e.prototype.destroy=function(){this._overlay=null,this._service=null},e.prototype.animationLayerForDate=function(t,e){return null},e}(n.a);e.a=u},314:function(t,e,o){"use strict";var r=o(3),n=o(68),i=o(25),a=function(){function t(t){void 0===t&&(t=null),t=Object(r.extend)({},t),this.render()}return Object.defineProperty(t.prototype,"$el",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$path",{get:function(){return Object(n.a)("."+i.a.cssPrefix+"fill-path",this.$el)},enumerable:!0,configurable:!0}),t.prototype.appendTo=function(t,e){void 0===e&&(e=null);var o=Object(n.a)(t);o.length>0&&(o.append(this.$el),this._target=Object(n.a)("."+i.a.cssPrefix+"loader",o),e&&this._target.css(e))},t.prototype.startAnimating=function(){this.$el.addClass("animated")},t.prototype.stopAnimating=function(){this.$el.removeClass("animated")},t.prototype.render=function(){this._target=Object(n.a)('<div class="'+i.a.cssPrefix+'loader"><svg version="1.1" class="'+i.a.cssPrefix+'filler-loader"><circle class="'+i.a.cssPrefix+'fill-path" cx="20" cy="20" r="18"/></svg></div>')},t}();e.a=a},315:function(t,e,o){"use strict";var r,n=o(309),i=o(3),a=o(23),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t){function e(e){void 0===e&&(e=null);var o=t.call(this)||this;o._startOffset=0,o._endOffset=0,o._elapsed=0,o._time=0,o._offset=0,o._delay=1/60,o._increment=0,o._timer=null,o._restartTimer=null,o._paused=!1,o._currentInterval=0,o._active=!1,o._enabled=!0,e=Object(i.extend)({},{key:void 0,enabled:!0,from:0,to:0,duration:2,endDelay:1,intervals:10,autoplay:!1,future:!1,alwaysShow:!1},e),o._now=new Date;var r=o._now.getTime();if(Object.keys(e).forEach((function(t){var o=e[t];"from"!==t&&"to"!==t||!Object(i.isString)(o)||/(year|month|day|hour|minute|second)/.test(o)&&(o=3600*Object(i.toTimeOffsetHours)(o)),Object(i.isNumeric)(o)&&(o=parseFloat(o)),e[t]=o})),Object(i.isString)(e.from)&&(e.from=Object(a.toDate)(""+e.from)),Object(i.isString)(e.to)&&(e.to=Object(a.toDate)(""+e.to)),o.opts=e,Object(i.isDate)(e.from)){var n=e.from;o._startOffset=n.getTime()-r,o.from=n.getTime()}else o._startOffset=1e3*parseFloat(""+e.from),o.from=r+o._startOffset;if(Object(i.isDate)(e.to)){n=e.to;o._endOffset=n.getTime()-r,o.to=n.getTime()}else o._endOffset=1e3*parseFloat(""+e.to),o.to=r+o._endOffset;return o._enabled=e.enabled,o.duration=e.duration||2,o.endDelay=e.endDelay||1,o.totalIntervals=e.intervals||10,o._time=o.from,o._times=[],o._startup(),o}return s(e,t),Object.defineProperty(e.prototype,"key",{get:function(){return this.opts.key},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeline",{get:function(){return this._timeline},set:function(t){var e=this;this._timeline=t,t&&(this.from=t.from,this.to=t.to,["duration","endDelay"].forEach((function(o){e.opt(o,t.opt(o))})),this.goToTime(t.currentTime))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"from",{get:function(){return parseFloat(""+this.opts.from)},set:function(t){this.stop(),this.opts.from=t,this._startOffset=t-this._now.getTime(),this._onTimingChange(),this.trigger(e.Event.START_CHANGE,{from:this.startDate(),to:this.endDate()})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"to",{get:function(){return parseFloat(""+this.opts.to)},set:function(t){this.stop(),this.opts.to=t,this._endOffset=t-this._now.getTime(),this._onTimingChange(),this.trigger(e.Event.END_CHANGE,{from:this.startDate(),to:this.endDate()})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"now",{get:function(){return this._now},set:function(t){this._now=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.opts.duration},set:function(t){this.opts.duration=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endDelay",{get:function(){return this.opts.endDelay},set:function(t){this.opts.endDelay=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalTime",{get:function(){return this.to-this.from},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._time},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentOffset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"increment",{get:function(){return this._increment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._offset/this.totalTime},set:function(t){this.goToTime(this.from+(this.to-this.from)*t)},enumerable:!0,configurable:!0}),e.prototype.opt=function(t,e){return e&&(Object(i.set)(this.opts,t,e),"intervals"===t&&this._updateTimes()),Object(i.get)(this.opts,t)},e.prototype.toggle=function(){this.isAnimating()||this.isLoading()?this.stop():this.play()},e.prototype.play=function(){this.isAnimating()||(this._paused||this.goToTime(this.from),this.canAnimate()&&(this._paused=!1,this._active=!0,this._updateTiming(),this.trigger(e.Event.PLAY,{from:this.startDate(),to:this.endDate()}),this._start()))},e.prototype.stop=function(){this._clearTimers(),(this.isAnimating()||this.isLoading())&&(this._paused=!1,this._active=!1,this.trigger(e.Event.STOP),this.goToInit())},e.prototype.pause=function(){this._clearTimers(),this._paused=!0},e.prototype.resume=function(){this.isAnimating()&&this._paused&&this._start(),this._paused=!1},e.prototype.restart=function(){var t=this;this._clearTimers(),this._restartTimer=setTimeout((function(){t.goToTime(t.from),t._start()}),1e3*this.endDelay)},e.prototype.reset=function(t){void 0===t&&(t=!1),this.isAnimating()?this.stop():t&&this.goToInit(),this.trigger(e.Event.RESET)},e.prototype.goToInit=function(){var t=this._now.getTime(),e=t;e>this.to?e=this.to:e<this.from&&(e=this.from),this.from>=t?e=this.from:this.to<=t&&(e=this.to),e>0&&this.goToTime(e)},e.prototype.goToTime=function(t){var o;o=Object(i.isDate)(t)?t.getTime():t,this._offset=o-this.from;var r=this._intervalClosestToTime(o);return this._currentInterval=r,this._time=o,this._updateForTime(r),this.trigger(e.Event.ADVANCE,{time:this._time,offset:this._offset}),this},e.prototype.neededIntervals=function(){return this._times.slice(0)},e.prototype.currentInterval=function(){return this._currentInterval},e.prototype.currentDate=function(){return new Date(this.currentTime)},e.prototype.startDate=function(){return new Date(this.from)},e.prototype.setStartDate=function(t){var e=Object(i.isDate)(t)?t.getTime():t;if(!(e>this.to))return this.from=e,this;console.error("[Aeris] Animation start date cannot be set to a date after the current\n\t\t\t\tend date value. You may need to change the end date first.")},e.prototype.startOffset=function(){return this._startOffset},e.prototype.setStartOffset=function(t){var e=this._now.getTime()+t;if(!(e>this.to))return this.from=e,this;console.error("[Aeris] Animation start offset cannot be set to a time offset after the\n\t\t\t\tcurrent end date value. You may need to change the end date or time offset first.")},e.prototype.endDate=function(){return new Date(this.to)},e.prototype.setEndDate=function(t){var e=Object(i.isDate)(t)?t.getTime():t;if(!(e<this.from)){this.to=e;var o=this._now.getTime();return this.to>o?this.goToTime(o):this.currentTime>this.to&&this.goToTime(this.to),this}console.error("[Aeris] Animation end date cannot be set to a date before the current\n\t\t\t\tstart date value. You may need to change the start date first.")},e.prototype.endOffset=function(){return this._endOffset},e.prototype.setEndOffset=function(t){var e=this._now.getTime()+t;if(!(e<this.from))return this.to=e,this;console.error("[Aeris] Animation end offset cannot be set to a time offset before the\n\t\t\t\tcurrent start date value. You may need to change the start date or time offset first.")},e.prototype.refresh=function(){this._now=new Date,this.from=this._now.getTime()+this._startOffset,this.to=this._now.getTime()+this._endOffset},e.prototype.canAnimate=function(){return this.to!==this.from&&this.isEnabled()},e.prototype.canShow=function(t){if(!0===this.alwaysShow())return!0;t||(t=this._time);var e=this._now.getTime();return this.isFuture()?t>e:t<=e},e.prototype.alwaysShow=function(){return this.opts.alwaysShow},e.prototype.enabled=function(t){this._enabled=t},e.prototype.isEnabled=function(){return this._enabled},e.prototype.isAutoPlay=function(){return this.opts.autoplay},e.prototype.isReady=function(){return!0},e.prototype.isLoading=function(){return!1},e.prototype.isAnimating=function(){return this._active},e.prototype.isPaused=function(){return this._paused},e.prototype.isFuture=function(){return!0===this.opts.future},e.prototype.containsPast=function(){return this.startDate().getTime()<this._now.getTime()},e.prototype.containsFuture=function(){return this.endDate().getTime()>this._now.getTime()},e.prototype._startup=function(){this._updateTimes(),this.opts.autoplay||this.goToInit()},e.prototype._start=function(){var t=this;this.timeline||(this._active=!0,this._timer=setInterval((function(){var e=t._time+t._increment;e>t.to?t.restart():t.goToTime(e)}),1e3*this._delay))},e.prototype._clearTimers=function(){this._timer&&window.clearInterval(this._timer),this._restartTimer&&window.clearTimeout(this._restartTimer),this._timer=void 0,this._restartTimer=void 0},e.prototype._onTimingChange=function(){this._updateTiming(),this._updateTimes(),this._handleTimingChange(),this.currentTime<this.from?this.goToTime(this.from):this.currentTime>this.to&&this.goToTime(this.to)},e.prototype._updateTiming=function(){this.to<this.from||(this._increment=(this.to-this.from)/this.duration*this._delay)},e.prototype._updateTimes=function(){this._times=this._timesForIntervals()},e.prototype._handleTimingChange=function(){},e.prototype._updateForTime=function(t){},e.prototype._intervalClosestToTime=function(t){var e=this.from,o=Math.abs(t-e);return void 0===this._times&&this._updateTimes(),this._times.forEach((function(r){var n=Math.abs(t-r);n<o&&(o=n,e=r)})),Math.round(e)},e.prototype._timesForIntervals=function(){var t=this;if(this.from===this.to)return[];for(var e=[],o=function(o){t.canShow(o)&&-1===e.indexOf(o)&&e.push(o)},r=this.opts.intervals,n=Math.round((this.to-this.from)/(r-1)),i=null,a=0;a<r-1;a+=1){var s=this.from+n*a;0!==a&&s===i||(o(Math.round(s)),i=s)}return e.length>0&&o(this.to),this.totalIntervals=e.length,e},e.Event={PLAY:"play",STOP:"stop",ADVANCE:"advance",RESET:"reset",START_CHANGE:"start:change",END_CHANGE:"end:change",LOAD_START:"load:start",LOAD_DONE:"load:done",LOAD_ERROR:"load:error",LOAD_PROGRESS:"load:progress",LOAD_IMAGE:"load:image",ADVANCE_IMAGE:"advance:image",DATA_ADD:"data:add",DATA_REMOVE:"data:remove",DATA_UPDATE:"data:update"},e}(n.a);e.a=c},325:function(t,e,o){"use strict";var r,n=o(315),i=o(333),a=o(326),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t){function e(e){void 0===e&&(e=null);var o=t.call(this,e)||this;return o._loading=!1,o._animations={},o}return s(e,t),Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||{}},set:function(t){var e=this;this.stop(),this._animations=t,this._each((function(t){t.timeline=e}))},enumerable:!0,configurable:!0}),e.prototype.get=function(t){return this._animations[t]},e.prototype.add=function(t,e){this.stop(),e.timeline=this,this._animations[t]=e},e.prototype.remove=function(t){var e=this;Object.keys(this._animations).forEach((function(o){e._animations[o]===t&&e.removeBy(o)}))},e.prototype.removeBy=function(t){var e=this._animations[t];e&&(this.stop(),e.timeline=void 0),delete this._animations[t]},e.prototype.play=function(){var e=this,o=!0,r=[];this.canAnimate()&&(this._each((function(t){var s=!1===e.containsPast();if(t instanceof i.a&&t.isFuture()){var c=t;c.showWhenLoading=s||c.alwaysShow()}else if(t instanceof a.a&&t.isFuture()){var u=t;u.showWhenLoading=s||u.alwaysShow()}t.isEnabled()&&!t.isReady()&&(e._loading=!0,o=!1,r.push(t),t.once(n.a.Event.LOAD_DONE,(function(){r.splice(r.indexOf(t),1),0===r.length&&(e.trigger(n.a.Event.LOAD_DONE),e.play())})),t.play())})),o?(this._loading=!1,this.trigger(n.a.Event.LOAD_DONE),this._each((function(t){t.play()})),t.prototype.play.call(this)):this.trigger(n.a.Event.LOAD_START))},e.prototype.stop=function(){this._each((function(t){t.stop()})),t.prototype.stop.call(this),this._loading&&this.trigger(n.a.Event.LOAD_DONE),this._loading=!1},e.prototype.pause=function(){this._each((function(t){t.pause()})),t.prototype.pause.call(this)},e.prototype.restart=function(){this._each((function(t){t.restart()})),t.prototype.restart.call(this)},e.prototype.reset=function(e){void 0===e&&(e=!1),this.stop(),this._loading=!1,this._each((function(t){t.reset(e)})),t.prototype.reset.call(this,e)},e.prototype.isLoading=function(){return this._loading},e.prototype.goToTime=function(e){return this._each((function(t){t.goToTime(e)})),t.prototype.goToTime.call(this,e)},e.prototype.setStartDate=function(e){return this._each((function(t){t.setStartDate(e)})),t.prototype.setStartDate.call(this,e)},e.prototype.setStartOffset=function(e){return this._each((function(t){t.setStartOffset(e)})),t.prototype.setStartOffset.call(this,e)},e.prototype.setEndDate=function(e){return this._each((function(t){t.setEndDate(e)})),t.prototype.setEndDate.call(this,e)},e.prototype.setEndOffset=function(e){return this._each((function(t){t.setEndOffset(e)})),t.prototype.setEndOffset.call(this,e)},e.prototype.refresh=function(){var e=this;t.prototype.refresh.call(this),this._each((function(t){t.now=e.now}))},e.prototype._each=function(t){var e=this;Object.keys(this.animations).forEach((function(o){var r=e._animations[o];t(r)}))},e.prototype._onTimingChange=function(){var e=this;t.prototype._onTimingChange.call(this),this._each((function(t){t.from=e.from,t.to=e.to}))},e}(n.a);e.a=c},326:function(t,e,o){"use strict";var r,n=o(315),i=o(68),a=o(3),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t){function e(e,o){void 0===o&&(o=void 0);var r=this;return o=Object(a.extend)({},{refresh:0,showWhenStopped:!0,showWhenLoading:!0},o),(r=t.call(this,o)||this).element=e?Object(i.a)(e):void 0,r._images={},r._targets={},r._idPrefix="awxb-map-layer-",r._isReset=!1,r._loading=!1,r._visible=!0,r._hasLoaded=!1,Object(a.isEmpty)(o.key)||(r._idPrefix+=o.key+"-"),r.element&&r.element.addClass("amp-map"),r._startup(),r}return s(e,t),Object.defineProperty(e.prototype,"showWhenLoading",{get:function(){return this.opts.showWhenLoading},set:function(t){this.opts.showWhenLoading=t},enumerable:!0,configurable:!0}),e.prototype.dataByTime=function(){return this._images},e.prototype.play=function(){this.isAnimating()||this.canAnimate()&&(!this._hasImages()||this._totalImages()<this.totalIntervals?this._load():t.prototype.play.call(this))},e.prototype.stop=function(){t.prototype.stop.call(this),this._loading&&this.reset()},e.prototype.reset=function(e){var o=this;void 0===e&&(e=!1),this._isReset=!0,this._loading=!1,this._hasLoaded=!1,this._reloadTimer&&window.clearTimeout(this._reloadTimer),this._loaders&&Object.keys(this._loaders).forEach((function(t){o._loaders[t].onload=void 0})),this._images={},this._loaders={},this.element&&this.element.empty(),t.prototype.reset.call(this,e)},e.prototype.isReady=function(){var t=this.totalIntervals,e=this._totalImages();return!this.isLoading()&&(this._hasImages()&&e===t||0===t)},e.prototype.canAnimate=function(){var e=t.prototype.canAnimate.call(this);return(e&&this._hasLoaded&&!this._hasImages()||e&&!this.isFuture()&&!this.containsPast()||this.isFuture()&&!this.containsFuture())&&(e=!1),e},e.prototype.isLoading=function(){return this._loading},e.prototype.show=function(){this._visible=!0,this.element?this.element.show():this._currentImage&&Object(i.a)(this._currentImage).show(),this.trigger("show")},e.prototype.hide=function(){this._visible=!1,this.element?this.element.hide():this._currentImage&&Object(i.a)(this._currentImage).hide(),this.trigger("hide")},e.prototype.isVisible=function(){if(this.element){var t=this.element;return Object(a.isDOM)(this.element)&&this.element.length>0&&(t=this.element[0]),"none"!==t.style.display}return!this._currentImage||"none"!==this._currentImage.style.display},e.prototype._target=function(t){return this._targets[t]},e.prototype._setImageVisible=function(t){t?Object(i.a)(this._currentImage).show():Object(i.a)(this._currentImage).hide()},e.prototype._updateForTime=function(t){if(this.canShow(this.currentTime)?this.show():this.hide(),!1!==this._visible){var e=this._imageClosestToTime(t);e?e!==this._currentImage&&(Object(i.a)(e).show(),this._setImageVisible(!1),this._currentImage=e):this.isAnimating()||!0!==this.opt("showWhenStopped")||(t=this._intervalClosestToTime(t),this.canShow(t)&&(this._isReset=!1,this._loadInterval(t,!0,null)))}},e.prototype._imageClosestToTime=function(t){var e=null,o=this.from,r=Math.abs(t-o);return this._images?(Object.keys(this._images).forEach((function(e){var n=Math.abs(t-+e);n<r&&(r=n,o=+e)})),o!==this._lastImageTime&&this._images[o]&&(e=this._images[o],o=Math.round(o),this._lastImageTime=o,this.trigger(n.a.Event.ADVANCE_IMAGE,{time:o,img:e})),e):null},e.prototype._hasImages=function(){return this._totalImages()>0},e.prototype._totalImages=function(){var t=this;return Object(a.isUndefined)(this._images)?0:Object.keys(this._images).filter((function(e){return Object(a.isset)(t._images[e])})).length},e.prototype._load=function(){var t=this;this._isReset=!1,this._loading=!0;var e=this.neededIntervals()||[];Object.keys(this._images).forEach((function(t){var o=parseInt(t,10),r=e.indexOf(o);-1!==r&&e.splice(r,1)}));var o=function(){t._loading=!1,t._hasLoaded=!0,t.trigger(n.a.Event.LOAD_DONE),t.timeline||t.play()};if(0!==e.length){if(this.element&&!0===this.opts.autosize&&this.provider){var r=this.provider.animationSizeForImage(this);this.element.css({width:r.width+"px",height:r.height+"px"})}this.trigger(n.a.Event.LOAD_START,{times:e});var i=0,a=function(){t._loadInterval(e[i],!0,(function(){i+=1,t._isReset||(i>=e.length?(o(),t.opts.refresh>0&&(t._reloadTimer&&window.clearTimeout(t._reloadTimer),t._reloadTimer=setTimeout((function(){t.reset(),t._load()}),1e3*t.opts.refresh))):a())}))};a()}else o()},e.prototype._loadInterval=function(t,e,o){var r=this;t=Math.round(t);var a=document.getElementById(""+this._idPrefix+t);if(a){var s=Object(i.a)(a);return s.show(),this._setImageVisible(!1),this._currentImage=s,this._setImageVisible(!0),void(o&&o())}if(this._images||(this._images={}),this._loaders||(this._loaders={}),this._images[t])o&&o();else if(!this._loaders[t]){var c,u=new Date(t);this.provider&&(c=this.provider.animationUrlForDate(this,u));var p=function(t){r._images[t]=new Image,r.trigger(n.a.Event.LOAD_ERROR,{date:u,interval:Object.keys(r._images).length-1}),o&&o()};if(c){var l=new Image;this._loaders[t]=l,l.onload=function(){if(!r._isReset){r._loaders[t]&&delete r._loaders[t];var a=""+r._idPrefix+t,s={width:l.width,height:l.height};r.provider&&(s=r.provider.animationSizeForImage(r));var c='<img id="'+a+'" src="'+l.src+'" width="'+s.width+'" height="'+s.height+'" style="position:absolute;">';r.element&&r.element.append(c),e&&(r._images[t]=r._hasDOMTarget()?Object(i.a)("#"+a):l),r._setImageVisible(!1),r._currentImage=r._hasDOMTarget()?Object(i.a)("#"+a):l,o&&o();var u=Object.keys(r._images).length;r.trigger(n.a.Event.LOAD_IMAGE,{date:new Date(t),src:l.src,img:l}),r.trigger(n.a.Event.LOAD_PROGRESS,{time:t,interval:u-1,loaded:u,total:r.totalIntervals})}},l.onerror=function(){p(t)},l.src=c}else p(t)}},e.prototype._hasDOMTarget=function(){return this.element&&this.element.length>0},e}(n.a);e.a=c},327:function(t,e,o){"use strict";o.d(e,"d",(function(){return f})),o.d(e,"b",(function(){return y})),o.d(e,"c",(function(){return m}));var r,n,i=o(309),a=o(41),s=o(3),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=[],p=["air-quality","earthquakes","fires","records","river-observations","stormreports"],l=["convective","drought-monitor","fire-outlook","tropical-cyclones-break-points"],h=p.concat(l).concat(["stormcells","tropical-cyclones"]),f=function(t){return-1!==h.indexOf(t)},d=["observations"],y=function(t){return-1!==d.indexOf(t)},m=function(t){return!f(t)&&!y(t)},g=function(t){function e(){var e=t.call(this)||this;return e._groups={},e._loading=!1,void 0!==n?e._process(n):e.fetch(),e}return c(e,t),e.prototype.fetch=function(){var t=this;return new Promise((function(e,o){n?e(Object(s.cloneDeep)(n)):t._loading?t.on("load:done",(function(t){e(Object(s.cloneDeep)(n))})):t._fetchLayerMetadata().then((function(t){e(Object(s.cloneDeep)(n))}))})).catch((function(t){console.error("Layers: Failed to load layers metadata - "+t)}))},e.prototype.cached=function(){return void 0!==n},e.prototype.loading=function(){return this._loading},e.prototype.groups=function(){return this._groups},e.prototype.inGroup=function(t,e,o){void 0===o&&(o=!1);var r=this._groups[e];if(t=t.replace(/:.*$/,""),r){if(o)return-1!==r.indexOf(t);var n=!1;return r.forEach((function(e){var o=new RegExp("^"+e+"-");(e===t||o.test(t))&&(n=!0)})),n}return!1},e.prototype.exists=function(t){return function(t){if(!Object(s.isset)(t)||!Object(s.isString)(t))return!1;t=t.replace(/\:.+$/,"");var e=(n||[]).map((function(t){return t.id})),o=(t||"").split(","),r=[];o.forEach((function(t){-1===e.indexOf(t)&&u.forEach((function(e){t=t.replace(new RegExp("-"+e),"")})),r.push(t)}));var i=!0;return r.forEach((function(t){t=t.replace(/\:.*$/,""),-1!==e.indexOf(t)||f(t)||y(t)||(i=!1)})),i}(t)},e.prototype.find=function(t,e,o){void 0===o&&(o=!1);var r=this.findAll(t,[e],o);if(r.length>0)return r[0]},e.prototype.findAll=function(t,e,o){void 0===o&&(o=!1);var r=n,i=[];return e=e||[],r&&e.forEach((function(e){r.forEach((function(r,n){var a=r[t],c=a===e;if(!c){var u=new RegExp("^"+a+"-"),p=(r.modifiers||[]).map((function(t){return[].concat((t.options||[]).map((function(t){return r.id+"-"+t.id})))}));p=p.length>0?p[0]:p,"id"===t&&(c=o?-1!==p.indexOf(e):u.test(e))}c&&("id"===t&&(r=Object(s.extend)(Object(s.cloneDeep)(r),{id:e})),i.push(r))}))})),Object(s.cloneDeep)(i)},e.prototype.future=function(){if(!this._future){var t=this.findAll("category",["forecasts","models","outlooks"]);t.push(this.find("id","fradar")),t.push(this.find("id","fsatellite")),this._future=t}return this._future},e.prototype.futureCodes=function(){return this.future().map((function(t){return t?t.id:void 0}))},e.prototype.isFuture=function(t){var e=this.futureCodes(),o=t.replace(/:.*$/,""),r=-1!==e.indexOf(o);return r||(o=o.replace(/\-\w+$/,""),r=-1!==e.indexOf(o)),r},e.prototype.isBase=function(t){var e=t.replace(/:.*$/,"");return this.inGroup(e,"base")},e.prototype.isOverlay=function(t){var e=t.replace(/:.*$/,"");return this.inGroup(e,"overlay")||this.inGroup(e,"masks")},e.prototype.hasMetric=function(t){return!!this.inGroup(t,"text")&&!1===/^f?humidity-/.test(t)},e.prototype._process=function(t){if(t){var e={};u=[],t.forEach((function(t){var o=t.category;o.match(/^base/)?o="base":o.match(/overlay/)&&(o="overlay"),void 0===e[o]&&(e[o]=[]),e[o].push(t.id),/-text$/.test(t.id)&&(void 0===e.text&&(e.text=[]),e.text.push(t.id)),t.modifiers&&Object(s.isArray)(t.modifiers)&&t.modifiers.forEach((function(t){t.options&&t.options.forEach((function(t){-1===u.indexOf(t.id)&&u.push(t.id)}))}))})),u.push("aeris"),this._groups=e}},e.prototype._fetchLayerMetadata=function(){var t=this;return this._loading=!0,this.trigger("load:start"),new Promise((function(e,o){a.a.request("https://cdn.aerisjs.com/layers.json").then((function(o){o.data&&(n=o.data,t._process(o.data),t._loading=!1,t.trigger("load:done"),e(n))})).catch((function(t){o(t)}))})).catch((function(t){console.error("Layers: Failed to load layers metadata - "+t)}))},e}(i.a);e.a=g},328:function(t,e,o){"use strict";o.d(e,"a",(function(){return r})),o.d(e,"b",(function(){return s})),o.d(e,"c",(function(){return c}));var r,n=o(3);!function(t){t.Imperial="imperial",t.Metric="metric",t.Combined="combined"}(r||(r={}));var i={imperial:{temp:"&deg;F",speed:" mph",distance:" mi",height:" ft",pressure:" in",percent:"%",precip:'"',rain:'"',snow:'"',text:"",degree:"&deg;"},metric:{temp:"&deg;C",speed:" km/h",distance:" km",height:" m",pressure:" mb",percent:"%",precip:" mm",rain:" mm",snow:" cm",phrase:"met",degree:"&deg;"}},a={temp:"(temp|dewpoint|dewpt|feelslike|windchill|heatindex)",speed:"(speed|gust|wind)",distance:"(visibility)",height:"(ceiling|elev|elevation)",pressure:"(pressure|altimeter)",rain:"(precip|rain|prcp)",snow:"(snow|snowdepth)",text:"(phrase)",percent:"(rh|humid|pop|prob|sky|skycover)"},s=function(t,e,o,r){void 0===o&&(o=null),void 0===r&&(r=!1);var i=r&&o||e;return u(Object(n.get)(t,i),i,r,!0,"N/A",'<span class="units">{{units}}</span>')},c=function(t,e){return void 0===e&&(e=!1),e?i.metric[t]||"":i.imperial[t]||""},u=function(t,e,o,r,i,s){if(void 0===o&&(o=!1),void 0===r&&(r=!1),void 0===i&&(i="--"),void 0===s&&(s=null),!1===Object(n.isset)(t))return i;var u=function(t){var e;return t=(t||"").toLowerCase().replace(/\s/g,""),void 0!==a[t]?t:/prob(ability)?/.test(t)?"percent":(Object.keys(a).forEach((function(o){new RegExp(a[o],"i").test(t)&&(e=o)})),e)}(e);if(!u)return""+t;var p=0,l="",h=" ";return"temp"===u?h="":"pressure"===u?p=o?0:2:"rain"===u?p=o?1:2:"snow"===u&&(p=1),t=p>0?parseFloat(t).toFixed(p):Math.round(t),r&&(l=c(u,o),Object(n.isset)(s)&&(l=s.replace(/{{units}}/,l))),""+t+h+l}},330:function(t,e,o){"use strict";o.d(e,"b",(function(){return A})),o.d(e,"d",(function(){return k})),o.d(e,"a",(function(){return z})),o.d(e,"c",(function(){return B.a}));var r,n=o(40),i=o(309),a=o(315),s=o(3),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t){function e(e){void 0===e&&(e=null);var o=this;return e=Object(s.extend)({},{refresh:0},e),(o=t.call(this,e)||this).itemsByTime={},o.lastInterval=0,o.dataBeyondBounds={before:[],after:[]},o.on("stop",(function(){o.trigger(a.a.Event.DATA_ADD,{items:o.dataBeyondBounds.after.filter((function(t){return void 0!==t}))})})),o}return c(e,t),e.prototype.dataByTime=function(){return this.itemsByTime},e.prototype.setData=function(t){this.data=t,this._prepareDataItems(t)},e.prototype.play=function(){var e=this;this.canAnimate()||!this.provider?t.prototype.play.call(this):this.provider.animationData(this).then((function(t){e.setData(t),e.lastInterval=e.to}))},e.prototype._updateForTime=function(t){if(this.dataByTime()){this.lastInterval||(this.lastInterval=this.from);var e=this.currentTime;if(e!==this.lastInterval){var o,r=Math.min(this.lastInterval,e),n=Math.max(this.lastInterval,e),i=e<this.lastInterval;if(e===this.from?(i=!0,o=this._elementsInIntervalRange(this.from,this.to)):o=this._elementsInIntervalRange(r,i?this.to:n),o.length>0)if(i)[].concat(this.itemsByTime[this.from]).forEach((function(t){var e=o.indexOf(t);-1!==e&&o.splice(e,1)})),o=o.concat(this.dataBeyondBounds.after),this.trigger(a.a.Event.DATA_REMOVE,{items:o.filter((function(t){return void 0!==t}))});else this.trigger(a.a.Event.DATA_ADD,{items:o.filter((function(t){return void 0!==t}))});this.lastInterval=e}}},e.prototype.restart=function(){this.lastInterval=this.to,t.prototype.restart.call(this)},e.prototype.reset=function(){this.data=null,this.itemsByTime={},t.prototype.reset.call(this)},e.prototype.isVisible=function(){return!0},e.prototype.isReady=function(){return null!=this.data},e.prototype.canAnimate=function(){return t.prototype.canAnimate.call(this)&&this.dataByTime()&&Object.keys(this.dataByTime()).length>0},e.prototype._handleTimingChange=function(){this.data&&this._prepareDataItems(this.data)},e.prototype._prepareDataItems=function(t){var e=this;if(!(this.increment<=0)&&Object(s.isArray)(t)){var o=this._prepareIntervals(),r=t;this.dataBeyondBounds={before:[],after:[]},(r||[]).forEach((function(t){if(Object(s.has)(t,"timestamp")){var r=Object(s.get)(t,"timestamp");if(r<e.from)e.dataBeyondBounds.before.push(t);else if(r>e.to)e.dataBeyondBounds.after.push(t);else{var n=e.dataIntervalClosestToTime(r);r<e.to&&o[n]&&o[n].push(t)}}})),this.trigger(a.a.Event.LOAD_DONE)}},e.prototype._prepareIntervals=function(){for(var t=this.from,e=this.to,o={};t<e;)o[Math.round(t)]=[],t+=this.increment;return this.itemsByTime=o,this.dataByTime()},e.prototype.dataIntervalClosestToTime=function(t){var e=Object.keys(this.dataByTime()).sort().reverse().map((function(t){return parseInt(t,10)})),o=0;return t<this.from||t>this.to?o=t:e.forEach((function(e){t>=e&&0===o&&(o=e)})),o},e.prototype._elementsInIntervalRange=function(t,e){var o=this;if(t===e)return[];var r=[],n=Object.keys(this.dataByTime()).sort().map((function(t){return parseInt(t,10)})),i=[];return n.forEach((function(n){var a=!1;e<t?n>=e&&n<t&&(a=!0):(n===t&&n===e||n>=t&&n<e||n===e)&&(a=!0),a&&-1===i.indexOf(n)&&(i.push(n),r=(r||[]).concat(o.dataByTime()[n]))})),r},e}(a.a),p=o(311),l=o(334),h=function(){function t(t){if(Object(s.isEmpty)(t))throw new Error("Invalid coordinates for Point");var e=t[0],o=t[1];this.coordinates={lat:o,lon:e}}return t.prototype.toArray=function(t){void 0===t&&(t=!1);var e=this.coordinates,o=e.lat,r=e.lon;return t?[r,o]:[o,r]},t.prototype.bounds=function(){return p.a.fromPoints([this.coordinates])},t}(),f=function(){function t(t){if(Object(s.isEmpty)(t))throw new Error("Invalid coordinates for MultiPoint");this.points=t.map((function(t){return new h(t)})),this.coordinates=this.points.map((function(t){return t.coordinates}))}return t.prototype.toArray=function(t){return void 0===t&&(t=!1),this.points.map((function(e){return e.toArray(t)}))},t.prototype.bounds=function(){var t={north:null,south:null,west:null,east:null};return this.coordinates.forEach((function(e){Object(s.isset)(e.lat)&&Object(s.isset)(e.lon)&&(t.north=Math.max(t.north,e.lat),t.south=Math.min(t.south,e.lat),t.west=Math.min(t.west,e.lon),t.east=Math.max(t.east,e.lon))})),p.a.fromBounds(t)},t}(),d=function(){function t(t){if(Object(s.isEmpty)(t))throw new Error("Invalid coordinates for LineString");if(t.length<2)throw new Error("Coordinate count in LineString is less than 2");this.coordinates=t.map((function(t){if(t.length<2)throw new Error("Coordinate dimension count is less than 2");var e=t[0];return{lat:t[1],lon:e}}))}return t.prototype.toArray=function(t){return void 0===t&&(t=!1),this.coordinates.map((function(e){return t?[e.lon,e.lat]:[e.lat,e.lon]}))},t.prototype.bounds=function(){return p.a.fromPoints(this.coordinates)},t}(),y=function(){function t(t){if(Object(s.isEmpty)(t))throw new Error("Invalid coordinates for MultiLineString");this.lines=t.map((function(t){return new d(t)})),this.coordinates=this.lines.map((function(t){return t.coordinates}))}return t.prototype.toArray=function(t){return void 0===t&&(t=!1),this.lines.map((function(e){return e.toArray(t)}))},t.prototype.bounds=function(){var t={north:null,south:null,west:null,east:null};return this.lines.forEach((function(e){var o=e.bounds();Object(s.isset)(o)&&(t.north=Math.max(t.north,o.north),t.south=Math.min(t.south,o.south),t.west=Math.min(t.west,o.west),t.east=Math.max(t.east,o.east))})),p.a.fromBounds(t)},t}(),m=function(t){if(Object(s.isEmpty)(t))throw new Error("Invalid vertices for PolygonGeometry");this.coordinates=t.map((function(t){if(t.length<2)throw new Error("Coordinate dimension count is less than 2");var e=t[0];return{lat:t[1],lon:e}}))},g=function(){function t(t){var e=this;if(Object(s.isEmpty)(t))throw new Error("Invalid coordinates for Polygon");this.inner=[],this.coordinates=t.map((function(t,o){if(t.length<4)throw new Error("Vertex count in Polygon is less than 4");var r=new m(t);return 0===o?e.outer=r:e.inner.push(r),r.coordinates}))}return t.prototype.toArray=function(t){return void 0===t&&(t=!1),this.coordinates.map((function(e){return e.map((function(e){return t?[e.lon,e.lat]:[e.lat,e.lon]}))}))},t.prototype.bounds=function(){return p.a.fromPoints(this.outer.coordinates)},t}(),v=function(){function t(t){if(Object(s.isEmpty)(t))throw new Error("Invalid coordinates for MultiPolygon");this.polygons=t.map((function(t){return new g(t)})),this.coordinates=this.polygons.map((function(t){return t.coordinates}))}return t.prototype.toArray=function(t){return void 0===t&&(t=!1),this.polygons.map((function(e){return e.toArray(t)}))},t.prototype.bounds=function(){var t={north:null,south:null,west:null,east:null};return this.polygons.forEach((function(e){var o=e.bounds();Object(s.isset)(o)&&(t.north=Math.max(t.north,o.north),t.south=Math.min(t.south,o.south),t.west=Math.min(t.west,o.west),t.east=Math.max(t.east,o.east))})),p.a.fromBounds(t)},t}(),_=function(){function t(t){(t=t||{}).type&&t.coordinates&&(t={type:"Feature",geometry:t}),Object(s.isEmpty)(t.geometry)||(this._geometry=function(t){var e,o=t.type,r=t.coordinates;switch(o){case"Point":e=new h(r);break;case"MultiPoint":e=new f(r);break;case"LineString":e=new d(r);break;case"MultiLineString":e=new y(r);break;case"Polygon":e=new g(r);break;case"MultiPolygon":e=new v(r);break;default:e=null}return e}(t.geometry),this.properties=t.properties||{},t.id&&(this.id=""+t.id))}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"coordinates",{get:function(){return this.geometry.coordinates},enumerable:!0,configurable:!0}),t}(),b=o(41),O=o(23),w=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),j=function(){return(j=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},k=function(t){function e(e,o){var r=t.call(this)||this;r.requiresBounds=!1,r._animatableData=[],r._nonAnimatableData=[],r.key=e,r.enabled=!0,r._opts=Object(s.extend)({data:null,requiresBounds:!1,animation:{key:e,enabled:!1},refresh:0},o);var n=r._opts.style,i=r._opts.animation;if(r.style=n||{marker:{svg:{shape:{type:"circle",fill:{color:"#000"}}},size:[6,6]},polygon:{fill:{color:"#000",opacity:.7},stroke:{color:"#000",width:2}},polyline:{stroke:{color:"#000",width:2}}},i.enabled){var a=function(t){return{markers:t.filter((function(t){return t.renderable?r.strategy.isMarker(t.renderable):r.strategy.isMarker(t)})),shapes:t.filter((function(t){return t.renderable?r.strategy.isPolygon(t.renderable)||r.strategy.isPolyline(t.renderable):r.strategy.isPolygon(t)||r.strategy.isPolyline(t)}))}},c=new u;c.provider=r,c.on("play",(function(){var t=a(r._nonAnimatableData),e=t.markers,o=t.shapes;e.length>0&&r.trigger("markers:remove",{markers:e,animation:c}),o.length>0&&r.trigger("shapes:remove",{shapes:o,animation:c})})),c.on("stop",(function(){var t=a(r._nonAnimatableData),e=t.markers,o=t.shapes;e.length>0&&r.trigger("markers:add",{markers:e,animation:c}),o.length>0&&r.trigger("shapes:add",{shapes:o,animation:c})})),c.on("reset",(function(){r.enabled&&(r.markers&&r.trigger("markers:add",{markers:r.markers,animation:c}),r.shapes&&r.trigger("shapes:add",{shapes:r.shapes,animation:c})),r._animatableData=[],r._nonAnimatableData=[]})),c.on("data:add",(function(t){var e=a(t.data.items),o=e.markers,n=e.shapes;o.length>0&&r.trigger("markers:add",{markers:o,animation:c}),n.length>0&&r.trigger("shapes:add",{shapes:n,animation:c})})),c.on("data:remove",(function(t){var e=a(t.data.items),o=e.markers,n=e.shapes;o.length>0&&r.trigger("markers:remove",{markers:o,animation:c}),n.length>0&&r.trigger("shapes:remove",{shapes:n,animation:c})})),r._animation=c}var p=Object(s.get)(r._opts,"data.service");return Object(s.isFunction)(p)&&(p=p()),r._service=p,r.requiresBounds=Object(s.get)(r._opts,"requiresBounds"),r}return w(e,t),Object.defineProperty(e.prototype,"markers",{get:function(){return Object(s.get)(this._result,"markers")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markersById",{get:function(){return this._markersById},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"polygons",{get:function(){return Object(s.get)(this._result,"polygons")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"polylines",{get:function(){return Object(s.get)(this._result,"polylines")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shapes",{get:function(){var t=[];return this.polygons&&(t=t.concat(this.polygons)),this.polylines&&(t=t.concat(this.polylines)),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strategy",{get:function(){return this._strategy},set:function(t){var e=this;t&&(this._strategy=t,t.on("move:end",(function(o){e._visibleBounds=p.a.fromBounds(t.getBounds())})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"service",{get:function(){return this._service},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animation",{get:function(){return this._animation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,!1===t?this._stopAutoUpdate():this._startAutoUpdateIfNeeded()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._loading},enumerable:!0,configurable:!0}),e.prototype.hasData=function(){return!Object(s.isEmpty)(this.markers)||!Object(s.isEmpty)(this.polygons)||!Object(s.isEmpty)(this.polylines)},e.prototype.load=function(t){var e=this,o=Object(s.get)(this._opts,"data");if(!o)return new Promise((function(t,e){e(new Error("Invalid configuration for VectorSource"))}));if(t=Object(s.extend)({},this._lastLoadParams,t),this._lastLoadParams=t,this.requiresBounds&&!Object(s.isset)(t.bounds))throw new Error("[Aeris] Vector source "+this.key+" requires coordinate bounds when loading but bounds were not provided.");var r=t.bounds,i=t.from,a=t.to;r&&(this._visibleBounds=p.a.fromBounds(r));var c=function(t,o){if(!1!==e.enabled){if(t){var r=e.markers,n=e.shapes;Object(s.isEmpty)(r)||e.trigger("markers:remove",{markers:r}),Object(s.isEmpty)(n)||e.trigger("shapes:remove",{shapes:n}),e._result=e._process(t),r=e.markers,n=e.shapes,Object(s.isEmpty)(r)||e.trigger("markers:add",{markers:r}),Object(s.isEmpty)(n)||e.trigger("shapes:add",{shapes:n})}e._loading=!1,e.trigger("data:load",{layer:e.key,results:t}),Object(s.isFunction)(o)&&o(e._result,null)}},u=function(t,o){console.error("Vector source request failed",t),t.stack&&console.log(t.stack),e._loading=!1,e.trigger("data:error",{error:t}),o&&o(null,t)},l=o.service,h=o.url,f=o.items;if(f)return new Promise((function(t,e){c(f,(function(o,r){o?t(o):e(r)}))}));var d,y=Object(s.get)(this._opts,"data.properties.root");return l?(this._service=Object(s.isFunction)(l)?l():l,d=function(t,o,r,i,a){var p=e.service.param("limit")||300,l=e.service.param("sort")||"dt:-1";if(i&&e.service.setParams(i),e.service.getAction()||e.service.action(n.a.WITHIN),e.service.getAction()===n.a.WITHIN){if(!t)return;e.service.place(Object(O.toBounds)(t))}e.service.from(o).to(r).limit(p).sort(l),e.service.get().then((function(t){c(Object(s.isset)(y)?Object(s.get)(t.data,y):t.data,a)})).catch((function(t){return u(t,a)}))}):h&&(d=function(t,e,o,r,n){var i=Object(s.isFunction)(h)?h(r):h;b.a.request(i).then((function(t){c(Object(s.isset)(y)?Object(s.get)(t.data,y):t.data,n)})).catch((function(t){return u(t,n)}))}),this._request||(this._request=Object(s.debounce)((function(t,o,r,n,i){e._loading=!0,d(t,o,r,n,i)}),1500)),new Promise((function(t,o){e._request?(e._loading=!0,e.trigger("data:load:start",{layer:e.key}),e._request(r,i,a,e._lastLoadParams,(function(r,n){e.trigger("data:load:done",{layer:e.key}),n?o(n):t(r),e._startAutoUpdateIfNeeded()}))):o(new Error("Invalid configuration for VectorSource"))}))},e.prototype.reload=function(t){this.load(t)},e.prototype.reset=function(){var t=this.markers,e=this.shapes;Object(s.isEmpty)(t)||this.trigger("markers:remove",{markers:t}),Object(s.isEmpty)(e)||this.trigger("shapes:remove",{shapes:e}),this.animation&&this.animation.reset(),this._loading=!1,this._result={},this._animatableData=[],this._nonAnimatableData=[],this.trigger("data:load:done",{layer:this.key}),this.trigger("reset")},e.prototype.update=function(t){t&&(this._opts.data=Object(s.extend)(this._opts.data,t),this._request=null),this.reload()},e.prototype._visibleMapObjects=function(){var t=this,e=this.markers,o=this.shapes;return{markers:e=e.filter((function(e){var o=e.coord;return!o||t._visibleBounds.contains(o)})),shapes:o=o.filter((function(e){var o=e.bounds;return!o||t._visibleBounds.contains(o)}))}},e.prototype._mapObjects=function(){var t=[];if(this.polygons&&(t=t.concat(this.polygons)),this.polylines&&(t=t.concat(this.polylines)),0===t.length)return null;var e=Object.keys(t).reduce((function(e,o){return e.concat(t.map((function(t){return t.polygons?t.polygons.map((function(t){return t.polygon})):t.polylines?t.polylines.map((function(t){return t.polyline})):t.polygon?t.polygon:t.polyline?t.polyline:t})))}),[]);return Object(s.flatten)(e)},e.prototype._process=function(t,e){var o=this;if(!this.strategy)throw new Error("No map strategy defined for VectorSource but one is required.");t=t||{};var r=Object(s.get)(this._opts,"data.formatter");r&&(t=r(t));var n={},i={},a={};if(!Object(s.isPlainObject)(t)||"FeatureCollection"!==t.type){if(Object(s.isArray)(t)){var c=this.style,u=c.marker,p=c.polygon,l=c.polyline,f=[],m=Object(s.get)(this._opts,"data.properties")||{},b=Object(s.get)(this._opts,"data.geometry");t.forEach((function(t,r){var c,O,w,k="awxjs-shape-"+o.key+"-"+r;if(m&&(m.id&&(k=Object(s.get)(t,m.id)),m.category&&!1===/^\[path\]/.test(m.category)&&(c=Object(s.get)(t,m.category)),m.path&&(O=Object(s.get)(t,m.path)),u))if(m.points){var E=m.points;!e&&Object(s.isArray)(E)?(w=[],E.forEach((function(e){var o=Object(s.get)(t,e);o&&Object(s.isArray)(o)&&(w=w.concat(o))}))):w=Object(s.get)(t,E)}else w=[t];if(w&&u){var T=Object(s.get)(o._opts,"data.coordinate");w.forEach((function(t){var e=o._processRecord(t),r=e.loc||(T&&Object(s.isFunction)(T)?T(e):{});if(r){var i={lat:r.lat,lon:r.long||r.lon},a=Object(s.isFunction)(u)?u(e):u;e.id=e.id||o.key+"-"+k+"-"+i.lat+"_"+i.lon;var c=!0;if(a&&a.spacing>0){var p=o.strategy.coordToPoint(i);f.forEach((function(t){var e=o.strategy.coordToPoint(t);Math.sqrt(Math.pow(p.x-e.x,2)+Math.pow(p.y-e.y,2))<a.spacing&&(c=!1)}))}if(c){var l=new _({type:"Point",coordinates:[i.lon,i.lat]});l.properties=e;var d=l.geometry;if(d instanceof h&&Object(s.isValidCoord)(d.coordinates)){var y=o._generateMarker(l.properties,d.coordinates,a);y&&(n[e.id]=y,f.push(i))}}}}))}if(O&&(p||l)){var x=Object(s.get)(o._opts,"data.reversedCoord")||!1,P=O;Object(s.isArray)(P)?P.length>0&&Object(s.isArray)(P[0])&&2===P[0].length&&Object(s.isNumber)(P[0][0])&&(P=[P]):P=[P],b&&Object(s.isFunction)(b)&&(P=P.map((function(t){return{type:"Feature",properties:t,geometry:b(t)}}))),P.map((function(e,o){if(Object(s.isArray)(e)&&2===e[0].length){var r=x?e.map((function(t){return[t[1],t[0]]})):e;e={type:"Polygon",coordinates:[r]}}var n=new _(e);return n.properties=Object(s.extend)({},t,n.properties),n})).forEach((function(t){var e=t.geometry,r=m.category,n=c;if(!n&&r&&(r=r.replace(/^\[path\]\./,""),n=Object(s.get)(t.properties,r)),e instanceof g?e=new v([e.toArray(!0)]):e instanceof d&&(e=new y([e.toArray(!0)])),e instanceof v){var u=j({},t.properties,{id:""+(t.properties.id||k)}),h=o._generatePolygon(u,e,p);if(n){if(!i[n]){var f=Object(s.set)({},r,n);i[n]={data:j({},f,u,{awxjs_source:o.key}),polygons:[]}}i[n].polygons.push(h)}else k&&(i[k]=h)}else e instanceof y&&e.lines.forEach((function(e,i){var c=j({},t.properties,{id:(t.properties.id||k)+"-"+i}),u=o._generatePolyline(c,e.coordinates,l);if(n){if(!a[n]){var p=Object(s.set)({},r,n);a[n]={data:j({},p,{awxjs_source:o.key}),polylines:[]}}a[n].polylines.push(u)}else k&&(a[k]=u)}))}))}w&&l&&o._generateLineSegments(w).forEach((function(t){var e=o._generatePolyline(t.data,t.coords,l);a[e.id]=e}))}))}return this._markersById=n,this._polygons=i,this._polylines=a,{markers:Object.keys(n).map((function(t){return n[t]})),polygons:Object.keys(i).map((function(t){return i[t]})),polylines:Object.keys(a).map((function(t){return a[t]}))}}console.warn("[Aeris] Data for layer {"+this.key+'} is in GeoJSON format. Use GeoJsonSource (or "geojson" type) for this layer instead.')},e.prototype._processRecord=function(t){return t},e.prototype._generateMarker=function(t,e,o){var r=this.strategy.factory.marker(this.key,{lat:e.lat,lon:e.lon},o);if(!r)return null;var n=j({},t,{awxjs_source:this.key}),i=new l.a(n,o,r);return i.geometry=new h([e.lon,e.lat]),i},e.prototype._generatePolygon=function(t,e,o){var r=function(e){return e.map((function(e){return{id:t.id,outer:e.outer.coordinates,inner:e.inner.map((function(t){return t.coordinates}))}}))},n=[];e instanceof v?n=r(e.polygons):e instanceof g&&(n=r([e]));var i=Object(s.isFunction)(o)?o(t):o,a=this.strategy.factory.polygon(this.key,n,i),c=j({},t,{awxjs_source:this.key}),u=new l.a(c,i,a);return u.geometry=e,u},e.prototype._generatePolyline=function(t,e,o){var r=Object(s.isFunction)(o)?o(t):o,n=this.strategy.factory.polyline(t.id,e,r),i=j({},t,{awxjs_source:this.key});return new l.a(i,r,n)},e.prototype._generateLineSegments=function(t){var e,o=Object(s.get)(this._opts,"data.coordinate"),r=Object(s.get)(this._opts,"data.properties.category"),n=[],i=[];return t.forEach((function(t,a){var c=t.loc||(o&&Object(s.isFunction)(o)?o(t):{}),u=Object(s.isEmpty)(c)&&t.lat&&t.lon?t:{lat:c.lat,lon:c.long||c.lon},p=r?Object(s.get)(t,r):"none";i.push(u),0===a?e={north:u.lat,south:u.lat,west:u.lon,east:u.lon}:(e.north=Math.max(e.north,u.lat),e.south=Math.min(e.south,u.lat),e.west=Math.min(e.west,u.lon),e.east=Math.max(e.east,u.lon));n.push({coords:i,data:t,bounds:e}),!0&&((i=[]).push(u),e={north:u.lat,south:u.lat,west:u.lon,east:u.lon}),p})),n},e.prototype._startAutoUpdateIfNeeded=function(){var t=this;this._stopAutoUpdate();var e=Object(s.get)(this._opts,"refresh");this.enabled&&e>0&&(this._refreshTimer=setTimeout((function(){t.reload()}),1e3*e))},e.prototype._stopAutoUpdate=function(){this._refreshTimer&&(clearTimeout(this._refreshTimer),this._refreshTimer=null)},e.prototype.animationData=function(t){var e=this,o=function(){var t=Object.keys(e.markers).map((function(t){return e.markers[t]})),o=e.shapes,r=[];if(t){var n=t.map((function(t){var o,r=t.data,n=t.renderable,i=t.style;if(!r||!n)return null;var a=Object(s.get)(e._opts,"data.properties.timestamp")||"timestamp";return Object(s.has)(r,a)?o=1e3*Object(s.get)(r,a):e._nonAnimatableData.push(n),{timestamp:o,renderable:n,style:i,data:r}})).filter((function(t){return t&&!1===Number.isNaN(t.timestamp)}));n&&(r=r.concat(n))}if(o){var i=function(t){return t.map((function(t){var o,r=t.data,n=t.renderable,i=t.style;if(!r)return null;var a=Object(s.get)(e._opts,"data.properties.timestamp")||"timestamp";return Object(s.isPlainObject)(a)&&a.from&&(a=a.from),Object(s.has)(r,a)?o=1e3*Object(s.get)(r,a):e._nonAnimatableData.push(n),{timestamp:o,renderable:n,style:i,data:r}})).filter((function(t){return t&&!1===Number.isNaN(t.timestamp)}))};o.forEach((function(t){var e,o=t.polygons;Object(s.isset)(o)?(e=i(o))&&(r=r.concat(e)):(e=i([t]))&&(r=r.concat(e))}))}return e._animatableData=r,r};return new Promise((function(t,r){if(e.isLoading)e.once("data:load",(function(){var e=o();t(e)}));else if(e._animatableData&&e._animatableData.length>0)t(e._animatableData);else if(e.markers){var n=o();t(n)}else t(null)}))},e}(i.a),E=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),T=function(t){function e(e){void 0===e&&(e=null);return e=Object(s.extend)({},{refresh:0},e),t.call(this,e)||this}return E(e,t),e.prototype._updateForTime=function(t){var e=this;if(this.dataByTime()){this.lastInterval||(this.lastInterval=this.from);var o,r=this.currentTime,n=Math.min(this.lastInterval,r),i=Math.max(this.lastInterval,r);if(r<this.lastInterval){var s=[],c=[];Object.keys(this.dataByTime()).sort().map((function(t){return parseInt(t,10)})).forEach((function(t){e.dataByTime()[t].forEach((function(t){-1===s.indexOf(t.id)&&(c.push(t),s.push(t.id))}))})),o=c}else o=this._elementsInIntervalRange(n,i);o.length>0&&this.trigger(a.a.Event.DATA_UPDATE,{items:o}),this.lastInterval=r}},e.prototype._prepareDataItems=function(t){var e=this;if(!(this.increment<=0)&&Object(s.isPlainObject)(t)){var o=this._prepareIntervals(),r=t;Object.keys(r).forEach((function(r){var n=t[r],i=n.renderable,a=n.data,s=n.style;Object.keys(a).forEach((function(t){var n=parseInt(t,10),c=e.dataIntervalClosestToTime(n);n<e.to&&o[c]&&o[c].push({id:r,value:a[n],renderable:i,style:s})}))})),this.trigger(a.a.Event.LOAD_DONE)}},e}(u),x=o(92),P=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),M=function(){return(M=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},L=function(t,e,o,r){return new(o||(o=Promise))((function(n,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?n(t.value):new o((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))},S=function(t,e){var o,r,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(n=2&i[0]?r.return:i[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},A=function(t){function e(e,o){var r=t.call(this,e,o)||this;if(r._opts.animatable){var n=new T;n.provider=r,n.on("data:add",(function(t){return r.trigger("markers:add",{markers:t.data.items})})),n.on("data:remove",(function(t){return r.trigger("markers:remove",{markers:t.data.items})})),n.on("data:update",(function(t){return r.trigger("markers:update",{markers:t.data.items})})),r._animation=n}return r}return P(e,t),e.prototype.load=function(e){return this._animationMarkers=null,t.prototype.load.call(this,e)},e.prototype.reset=function(){this._animationMarkers=null,t.prototype.reset.call(this)},e.prototype._processRecord=function(t){t=Object(s.cloneDeep)(t);var e=Object(s.get)(this._opts,"data.properties.value");return Object(s.isFunction)(e)||(e=(e||"").replace(/^periods\./,""),t.periods&&(e="periods[0]."+e)),t.value=t.value||(Object(s.isFunction)(e)?e(t):Object(s.get)(t,e)),t},e.prototype._loadAnimationData=function(){var t=this;return new Promise((function(e,o){var r=t.service.param("limit")||300,i=t.service.param("plimit"),a=t.service.param("sort")||"dt:-1",c=t.style.marker||t.style;t.service.action(n.a.WITHIN).plimit(100).limit(r).sort(a).get().then((function(o){t.service.plimit(i);var r={},n=Object(s.get)(o,"data")||[];Object(x.isArray)(n)&&n.forEach((function(e){var o=t._processRecord(e),n=o.loc||{},i={lat:n.lat,lon:n.long||n.lon},a=o.id||i.lat+","+i.long,u=t.markersById?t.markersById[a]:null,p=Object(s.isFunction)(c)?c(o):c;if(u)r[a]={renderable:u.renderable,data:Object(s.extend)({},u.data,o),style:u.style};else if(!1===Object(s.isset)(p.spacing)){var l=t.strategy.factory.marker(t.key,{lat:i.lat,lon:i.lon},p);r[a]={data:M({},o,{awxjs_source:t.key}),renderable:l,style:p}}})),e(r)})).catch((function(t){console.error("Error requesting animation data for TextSource",t),o(t)}))}))},e.prototype.animationData=function(t){return L(this,void 0,void 0,(function(){var t,e,o=this;return S(this,(function(r){return t=function(){var t=o._animationMarkers,e=(Object(s.get)(o._opts,"data.properties.timestamp")||"").replace(/^periods\./,""),r=Object(s.get)(o._opts,"data.properties.value");return Object(s.isFunction)(r)||(r=(r||"").replace(/^periods\./,"")),Object.keys(t).reduce((function(n,i){var a=t[i],c=a.data,u=a.renderable;if(c&&c.periods){var p,l=c.periods.reduce((function(t,o){var n=1e3*Object(s.get)(o,e),i="";return(i=Object(s.isFunction)(r)?r(o):Object(s.get)(o,r))!==p&&(t[n]=i,p=i),t}),{});return n[i]={data:l,renderable:u,style:o.style},n}return null}),{})},e=function(){return new Promise((function(t,e){o._loadAnimationData().then((function(e){o._animationMarkers=e,t(e)}))}))},[2,new Promise((function(r,n){if(o._animationMarkers){var i=t();r(i)}else o.isLoading?o.once("data:load",(function(){e().then((function(e){var o=t();r(o)}))})):e().then((function(e){var o=t();r(o)}))}))]}))}))},e}(k),I=function(){function t(t){t=t||{},Object(s.isEmpty)(t.features)||(this._features=t.features.map((function(t){return new _(t)})))}return Object.defineProperty(t.prototype,"features",{get:function(){return this._features},enumerable:!0,configurable:!0}),t}(),D=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),C=function(){return(C=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return D(e,t),e.prototype._process=function(t,e){var o=this;if(!this.strategy)throw new Error("No map strategy defined for VectorSource but one is required.");t=t||{};var r=Object(s.get)(this._opts,"data.formatter");r&&(t=r(t));var n={},i={},a={};if(Object(s.isArray)(t)&&(t=t[0]&&"FeatureCollection"===t[0].type?t[0]:{type:"FeatureCollection",features:t}),"Feature"===t.type?t={type:"FeatureCollection",features:[t]}:"GeometryCollection"===t.type&&(t={type:"FeatureCollection",features:(t.geometries||[]).map((function(t){return{type:"Feature",geometry:t}}))}),Object(s.isset)(t.type)){var c=new I(t),u=this.style,p=u.marker,l=u.polygon,m=u.polyline;return(c.features||[]).forEach((function(t,e){var r,c=t.geometry,u=t.properties||{},_=Object(s.get)(o._opts,"data.properties.id"),b=Object(s.get)(o._opts,"data.properties.category");if(Object(s.isset)(_)&&(t.id=Object(s.get)(u,_)),Object(s.isset)(b)){r=Object(s.get)(u,b);var O=Object(s.set)({},b,r);i[r]||(i[r]={data:C({},O,{awxjs_source:o.key}),polygons:[]}),a[r]||(a[r]={data:C({},O,{awxjs_source:o.key}),polylines:[]})}if(u.id=""+o.key,t.id?u.id=u.id+"-"+t.id:u.id=u.id+"-"+e,c instanceof h){var w=Object(s.isFunction)(p)?p(u):p,j=o._generateMarker(u,c.coordinates,w);n[u.id]=j}else if(c instanceof f)c.coordinates.forEach((function(t,e){var r=C({},u,{id:u.id+"-"+e}),i=Object(s.isFunction)(p)?p(r):p,a=o._generateMarker(r,t,i);n[u.id]=a}));else if(c instanceof d){j=o._generatePolyline(u,c.coordinates,m);r?a[r].polylines.push(j):a[u.id]=j}else if(c instanceof y)c.coordinates.forEach((function(t,e){var n=C({},u,{id:u.id+"-"+e}),i=o._generatePolyline(n,t,m);r?a[r].polylines.push(i):a[u.id]=i}));else if(c instanceof g){j=o._generatePolygon(u,c,l);r?i[r].polygons.push(j):i[u.id]=j}else if(c instanceof v){j=o._generatePolygon(u,c,l);r?i[r].polygons.push(j):i[u.id]=j}})),{markers:Object.keys(n).map((function(t){return n[t]})),polygons:Object.keys(i).map((function(t){return i[t]})),polylines:Object.keys(a).map((function(t){return a[t]}))}}console.warn("Invalid data provided for GeoJsonSource with key "+this.key+", not a valid GeoJSON format")},e}(k),B=o(313)},331:function(t,e,o){"use strict";var r,n,i,a,s=o(309),c=o(3),u=o(68),p=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t){function e(e,o){var r=t.call(this)||this;return r._key=e,r._opts=Object(c.extend)({size:void 0,autosize:!1,format:"svg",metric:!1},o),Object(c.isset)(r._opts.size)||(r._opts.autosize=!0),r._target=Object(u.a)('<div class="awxjs__legend awxjs__legend-'+e+'"></div>'),setTimeout((function(){r.update(r._opts)}),500),r}return p(e,t),Object.defineProperty(e.prototype,"opts",{get:function(){return this._opts},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"account",{get:function(){return this.opts.account},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$el",{get:function(){return this._target},enumerable:!0,configurable:!0}),e.prototype.show=function(){this.$el.show()},e.prototype.hide=function(){this.$el.hide()},e.prototype.setSize=function(t){this._opts.size=Object(c.extend)(this._opts.size,t),this.update()},e.prototype.getSize=function(){if(this.$el){var t=this.$el.bounds(),e=this.$el.outerHeight(!0);return{width:t.width,height:e}}return{width:0,height:0}},e.prototype.setMetric=function(t){this._opts.metric=t,this.update()},e.prototype.units=function(){var t=this._opts.metric?"metric":"imperial",e=Object(c.get)(this._opts,"units."+t);return e&&/^(f|c)$/.test(e)&&(e=e.toUpperCase()),e},e.prototype.reset=function(){this.$el.empty()},e.prototype.update=function(t){},e.prototype.resize=function(){var t=this.getSize(),e=Object(u.a)(".awxjs__legend-content",this.$el).children();e&&e.forEach((function(e){t.width=Math.max(t.width,Object(u.a)(e).outerWidth(!0))})),this.$el.css("width",t.width+"px"),this.trigger("resize",t)},e}(s.a),h=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._load=Object(c.debounce)((function(t){if(!t){var o=new Error("Invalid legend url");return e.trigger("load:error",{error:o}),void e.$el.hide()}e._image||(e._image=new Image),e.trigger("load:start"),e._image.onload=function(){var o=e.units(),r=e.opts.title?e.opts.title.replace(/\([^\)]+\)$/,o?"("+o+")":""):null;e.$el.html("\n\t\t\t\t"+(e.opts.title?'<div class="awxjs__legend-title">'+r+"</div>":"")+'\n\t\t\t\t<div class="awxjs__legend-content"><img src="'+t+'"></div>\n\t\t\t'),e.trigger("load:done"),setTimeout((function(){var t=e.getSize();t.width=Math.max(t.width,e._image.width),e.$el.css("width",t.width+"px"),e.trigger("resize",t)}),150)},e._image.onerror=function(){console.warn("[Aeris] ImageLegend - Failed to load image from "+t)},e._image.src=t}),250),e}return h(e,t),Object.defineProperty(e.prototype,"image",{get:function(){return this._image},enumerable:!0,configurable:!0}),e.prototype.url=function(){var t;Object(c.isPlainObject)(this.opts.url)?t=t[this.opts.metric?"metric":"imperial"]:Object(c.isString)(this.opts.url)&&(t=this.opts.url);return t},e.prototype.getSize=function(){var e=t.prototype.getSize.call(this);return this._image&&(e.width=Math.max(e.width,this._image.width)),e},e.prototype.reset=function(){this.$el.empty(),this._image&&(this._image.onload=null),this._image=null},e.prototype.update=function(t,e){void 0===e&&(e=!1),Object(c.isEmpty)(t)||(e=!0),!e&&this._image||this._load(this.url())},e}(l);!function(t){t.BAR="bar",t.POINT="point"}(n||(n={})),function(t){t.VERTICAL="v",t.HORIZONTAL="h"}(i||(i={})),function(t){t.TOP="t",t.BOTTOM="b",t.LEFT="l",t.RIGHT="r"}(a||(a={}));var d=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.setSize=function(t){this.opts.size=Object(c.extend)(this.opts.size,t),this.update()},e.prototype.url=function(){return this._url()},e.prototype._url=function(){var t=this.opts,e=Object(c.extend)({interval:1,gutter:null,radius:6,columns:4,metric:!1,orientation:i.HORIZONTAL,cell:{size:{width:2,height:10}},label:{interval:20,position:a.BOTTOM,fontsize:11,color:"#222222"}},t.styles),o=t.type||n.BAR,r=e.cell||{},s=e.label||{},u={};if(o===n.POINT)if(Object(c.isset)(e.gutter)){if(Object(c.isString)(e.gutter)){var p=e.gutter.split(",");e.gutter={x:p[0],y:p[1]}}}else e.gutter={x:20,y:5};if(u.ls=s.fontsize,Object(c.isEmpty)(s.custom)||(u.labels=s.custom.replace(/,\s+/g,",").replace(/\s/g,"%20")),!Object(c.isEmpty)(s.color)){var l=s.color.replace(/#/,"");6===l.length&&(u.lc=l)}o!==n.POINT||Object(c.isEmpty)(e.filter_groups)||(u.filter=e.filter_groups),Object(c.isset)(t.range)&&(Object(c.isString)(t.range)?u.range=","+t.range:Object(c.isArray)(t.range)&&(1===t.range.length?u.range=","+t.range[0]:u.range=t.range.join(","))),Object(c.isset)(t.keys)?u.keys=t.keys:Object(c.isset)(t.filter)&&(u.filter=t.filter);var h=e.units;h&&(t.metric?u.units=h.metric:u.units=h.imperial);var f=t.size||{width:null,height:null},d=f.width,y=f.height,m=r.size||{width:null,height:null},g=m.width,v=m.height,_=Object(c.isEmpty)(e.interval)?"":"-i"+e.interval,b={interval:Object(c.isEmpty)(s.interval)?"":"-li"+s.interval},O={size:Object(c.isEmpty)(g)||Object(c.isEmpty)(v)?"":"-c"+g+"x"+v,pad:Object(c.isset)(e.gutter)?"-p"+e.gutter.x+","+e.gutter.y:""},w="-"+e.orientation+","+s.position,j=t.metric?"-metric":"",k=Object(c.isEmpty)(d)||Object(c.isEmpty)(y)||t.autosize?"":"_"+d+"x"+y,E=t.format,T=Object(c.isEmpty)(e.radius)?"":"-r"+e.radius,x=!Object(c.isEmpty)(e.columns)&&e.columns>0?"-col"+e.columns:"",P="https://legends.aerisapi.com/"+this.key;return o===n.POINT?P+=""+T+x+O.pad:P+=""+_+b.interval+O.size+O.pad+w+j,P+=k+"."+E,P+=(P.indexOf("?")>-1?"&":"?")+Object.keys(u).map((function(t){return encodeURIComponent(t)+"="+u[t]})).join("&")},e}(f),m=o(40),g=o(335),v=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),_=function(t,e,o,r){var n={lat:t,lon:e},i=g.a.pointToCoord(0,0,o,n,r),a=g.a.pointToCoord(r.width,r.height,o,n,r);return i.lat=parseFloat(i.lat.toFixed(2)),i.lon=parseFloat(i.lon.toFixed(2)),a.lat=parseFloat(a.lat.toFixed(2)),a.lon=parseFloat(a.lon.toFixed(2)),i.lat+","+i.lon+","+a.lat+","+a.lon},b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.update=function(e,o){if(void 0===o&&(o=!1),e){if(e.within){if(e.within.bounds){var r=e.within.bounds,n=r.east,i=r.west,a=Math.abs(n-i);Math.floor(a/360)>0&&(i=-180,n=180),e.within.bounds.west=i,e.within.bounds.east=n}this.opts.within=e.within}this._update()}else Object(c.isset)(this.opts.keys)&&t.prototype.update.call(this,e,o)},e.prototype._update=function(){var t=this;this.account?(this._request||(this._request=Object(c.debounce)((function(e){t._getVtecCodes(e).then((function(e){if(t.opts.keys=e.join(","),0===e.length){var o=t.opts.title?t.opts.title.replace(/\([^\)]+\)$/,""):null;t.$el.html("\n\t\t\t\t\t\t\t"+(o?'<div class="awxjs__legend-title">'+o+"</div>":"")+'\n\t\t\t\t\t\t\t<div class="awxjs__legend-content">\n\t\t\t\t\t\t\t\t<div class="awxjs__legend-empty">No advisories within map bounds.</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t'),t.resize()}else t.show(),t.update(null,!0)}))}),1e3)),this._request(this.opts.within)):console.warn("Cannot render advisories/alerts legend, no valid Aeris account defined")},e.prototype._getVtecCodes=function(t){var e=this,o=t.size,r=t.center,n=t.bounds,i=t.zoom;return i=parseInt(i,10),new Promise((function(t,a){if(!n){if(!o||Number.isNaN(o.width)||Number.isNaN(o.height))return void a(new Error("Size is not a number"));!n&&r&&(Object(c.isString)(r)&&/^[\d\.-]+,[\d\.-]+/.test(r)?(r=r.split(","),n=_(r[0],r[1],i,o)):Object(c.isObject)(r)&&r.lat&&r.lon&&(n=_(r.lat,r.lon,i,o)))}n?e._getAdvisories(n).then((function(e){t(e)})):r&&e._getPlace(r,o,i).then((function(o){e._getAdvisories(o).then((function(e){t(e)}))}))}))},e.prototype._getPlace=function(t,e,o){var r=this;return new Promise((function(n,i){new m.b({client:r.account.credentials()}).endpoint("places").place(t).limit(1).get().then((function(t){if(t.data){var r=t.data.loc,a=r.lat,s=r.long,c=_(a,s,o,e).split(",").map((function(t){return parseFloat(t)}));4===c.length?n({north:c[0],west:c[1],south:c[2],east:c[3]}):i()}}))}))},e.prototype._getAdvisories=function(t){var e=this;return new Promise((function(o,r){var n=e.account.canAccess("advisories_summary"),i=function(t,o){var r=new m.b({client:e.account.credentials()});return o?r.endpoint("alerts/summary").fields("summary.typeCodes,summary.types.type,summary.types.code"):r.endpoint("alerts").fields("details.type,details.name").limit(300),(t.west<-180||t.west>180)&&(t.west+=360*Math.floor(t.west/360)),r.action(m.a.WITHIN).bounds(t),r},a=function(t){var e=[];t&&(n?(t=t[0]||t,(Object(c.get)(t,"summary.types")||[]).filter((function(t){return Object(c.isset)(t)&&Object(c.isset)(t.code)})).forEach((function(t){var o=t.code,r=t.type,n=e.some((function(t){return t.code===o}));o&&!1===n&&e.push({code:o,name:r.toUpperCase()})}))):t.filter((function(t){return Object(c.isset)(t)&&Object(c.isset)(t.type)})).forEach((function(t){var o=t.details,r=o.type,n=o.name,i=e.some((function(t){return t.code===r}));r&&!1===i&&e.push({code:r,name:n.toUpperCase()})})));return e.sort((function(t,e){return t.name<e.name?-1:t.name>e.name?1:0})).reduce((function(t,e){return t.push(e.code),t}),[])},s=t.west,u=t.east,p=s>u?Math.abs(180-s+(180-Math.abs(u))):Math.abs(u-s);if(p>180||s>u){var l=s>u,h=s+p/2,f=new m.b({client:e.account.credentials()}),d=i(Object(c.extend)({},t,{east:l?180:h}),n),y=i(Object(c.extend)({},t,{west:l?-180:h}),n);f.addRequest(d),f.addRequest(y),f.get().then((function(t){var e=Object(c.get)(t,"data.responses"),r=n?{summary:{types:[],typeCodes:[]}}:[];e&&e.forEach((function(t){if(t=t.response||t)if(n){var e=(t[0]||t).summary||{},o=e.types,i=e.typeCodes;r.summary.types=r.summary.types.concat(o),r.summary.typeCodes=r.summary.typeCodes.concat(i)}else Object(c.isEmpty)(t)||(r=r.concat(t))}));var i=a(r||{});o(i)}))}else{i(t,n).get().then((function(t){var e=a(t.data||{});o(e)}))}}))},e}(y),O=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),w=function(t){function e(e,o){var r=t.call(this)||this;return r._loaded=[],r._key=e,r._opts=Object(c.extend)({types:null},o),r._target=Object(u.a)('<div class="awxjs__legend awxjs__legend-group awxjs__legend-'+e+'"></div>'),r._legends={},r._opts.types&&(r.trigger("load:start"),Object.keys(r._opts.types).forEach((function(t){var e=Object(c.extend)({},o,Object(c.cloneDeep)(r._opts.types[t]));delete e.types;var n=new y(t,e);n.on("load:done",(function(){r._loaded.push(t),r._checkLoaded()})),r._legends[t]=n,r.$el.append(n.$el)}))),r}return O(e,t),Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opts",{get:function(){return this._opts},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$el",{get:function(){return this._target},enumerable:!0,configurable:!0}),e.prototype.show=function(){this.$el.show()},e.prototype.hide=function(){this.$el.hide()},e.prototype.setSize=function(t){var e=this;Object.keys(this._legends).forEach((function(o){var r=e.opts.types[o];e._legends[o].setSize({width:t.width*r.factor,height:t.height})}))},e.prototype.getSize=function(){var t=this,e=this.$el.bounds(),o=0,r=e.height;return Object.keys(this._legends).forEach((function(e){var n=t._legends[e];if(n.$el){var i=n.$el.bounds();o+=i.width,r=Math.max(r,i.height)}})),{width:o,height:r}},e.prototype.setMetric=function(t){var e=this;Object.keys(this._legends).forEach((function(o){e._legends[o].setMetric(t)}))},e.prototype.reset=function(){this.$el.empty(),this._legends=null,this._loaded=[]},e.prototype.update=function(t){var e=this;this.trigger("load:start"),Object.keys(this._legends).forEach((function(t){e._legends[t].update()}))},e.prototype._checkLoaded=function(){var t=this;this._loaded.length===Object.keys(this._opts.types).length&&(this.trigger("load:done"),setTimeout((function(){var e=t.getSize();t.$el.css("width",e.width+"px"),t.trigger("resize",e)}),150))},e}(s.a),j=o(41),k=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),E=function(t,e,o,r){return new(o||(o=Promise))((function(n,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?n(t.value):new o((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))},T=function(t,e){var o,r,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(n=2&i[0]?r.return:i[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},x=function(t){function e(e,o){var r=t.call(this)||this;if(r._loading=!1,r._loadCallbacks={},r._onResize=function(){r.trigger("resize",r.getSize())},!e)throw new Error("[Aeris] Invalid DOM target specified for LegendView");return r._opts=Object(c.extend)({size:{width:400,height:40}},o),r._legends={},r._legendCount={},r._mapping={},Object(u.a)(e).append('<div class="awxjs__legend-view"></div>'),r._target=Object(u.a)(".awxjs__legend-view",e),r}return k(e,t),Object.defineProperty(e.prototype,"$el",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return Object.keys(this._legends).length},enumerable:!0,configurable:!0}),e.prototype.add=function(t,e){var o,r=this,n=t;if(!this._configs)return this._loadCallbacks[t]=function(){r.add(t,e)},void(!1===this._loading&&this.loadStyles());if("image"===(e=Object(c.extend)(Object(c.cloneDeep)(this._opts),e)).type&&(o=e),this.configForType(t)){var i=this.configForType(t),a=i.key,s=i.config;n=a,Object(c.isEmpty)(s)||(o=s)}if(Object(c.isset)(o)){var u,p=Object(c.extend)(e,{title:o.title,size:this._opts.size,autosize:this._opts.autosize,format:this._opts.format,metric:this._opts.metric},o,e);if(this._legends[n])return this._legendCount[n]+=1,void this._legends[n].update(p);o&&!Object(c.isEmpty)(o)&&("image"===o.type?u=new f(n,p):o.grouped&&o.items?(p.types=o.items.reduce((function(t,e){var o=r.configForType(e.key).config;return t[e.key]=Object(c.extend)({factor:e.factor,size:{width:Math.floor(r._opts.size.width*e.factor),height:r._opts.size.height}},o),t}),{}),u=new w(n,p)):u="alerts"===t||"advisories"===t||/^alerts-/.test(t)?new b(n,p):new y(n,p),this.addLegend(u),this._mapping[n]||(this._mapping[n]=[]),-1===this._mapping[n].indexOf(t)&&this._mapping[n].push(t))}},e.prototype.addLegend=function(t){var e=t.key;this._legends[e]=t,this._legendCount[e]=1,this.$el.append(t.$el),this.$el.show(),t instanceof s.a&&t.on("resize",this._onResize),this.trigger("add",{key:t.key,count:Object.keys(this._legends).length}),this._onResize()},e.prototype.set=function(t,e){var o=this;t=t||[],this.removeAll(t),t.forEach((function(t){o.has(t)?o.get(t).update(e):o.add(t,e)}))},e.prototype.setUrl=function(t){this.removeAll(),this.$el.empty(),this.$el.append('<div class="awxjs__legend"><img src="'+t+'"></div>')},e.prototype.get=function(t){var e=this.configForType(t).key;return e?this._legends[e]:null},e.prototype.remove=function(t){var e=this.configForType(t).key;if(e){var o=this._legends[e];if(o)this._legendCount[e]<=1?this.removeLegend(o):this._legendCount[e]-=1;o instanceof s.a&&o.off("resize",this._onResize),this._onResize()}0===this.count&&(this.$el.hide(),this.trigger("empty"))},e.prototype.removeLegend=function(t){if(t){var e=t.key;t.$el.remove(),delete this._legends[e],delete this._legendCount[e],this.trigger("remove",{key:t.key,count:Object.keys(this._legends).length})}},e.prototype.removeAll=function(t){var e=this;Object.keys(this._legends).forEach((function(o){var r=!0;if(t){var n=e._mapping?e._mapping[o]:[];-1!==t.indexOf(o)?r=!1:n&&n.forEach((function(e){-1!==t.indexOf(e)&&(r=!1)}))}r&&e.remove(o)}))},e.prototype.has=function(t){var e=this.configForType(t).key;return!!e&&Object(c.isset)(this._legends[e])},e.prototype.update=function(t){this._each((function(e,o){return o.update(t)}))},e.prototype.setMetric=function(t){this._opts.metric=t,this._each((function(e,o){return o.setMetric(t)}))},e.prototype.setSize=function(t){this._opts.size=t,this._each((function(e,o){return o.setSize(t)}))},e.prototype.getSize=function(){var t=0,e=0;return this._each((function(o,r){var n=r.getSize();t+=n.height,e=Math.max(e,n.width)})),{width:e,height:t}},e.prototype.setWidth=function(t){var e=this._opts.size.height;this.setSize({width:t,height:e})},e.prototype.configForType=function(t){var e=this;if(!this._configs)return{key:null,config:null};var o,r=this._configs[t];return!r&&/^f/.test(t)&&(o=t.replace(/^f/,""),r=this._configs[o]),r||Object.keys(this._configs).forEach((function(n){var i=e._configs[n];if(!0===i.enabled||!Object(c.isset)(i.enabled)){var a=i.layers;a&&(a.forEach((function(e){new RegExp(e).test(t)&&(r=Object(c.cloneDeep)(i),o=n)})),r&&!o&&(o=n))}})),{key:o||t,config:Object(c.cloneDeep)(r)}},e.prototype._reset=function(){this.$el.empty(),this._each((function(t,e){return e.reset()}))},e.prototype._each=function(t){var e=this;Object.keys(this._legends).forEach((function(o){return t(o,e._legends[o])}))},e.prototype.loadStyles=function(){var t=this;return this._loading=!0,new Promise((function(e,o){return E(t,void 0,void 0,(function(){var t=this;return T(this,(function(o){return this._configs?(e(this._configs),[2]):(j.a.request("https://legends.aerisapi.com/defaults.json").then((function(o){if(o.data){var r=o.data;Object.keys(r).forEach((function(t){var e=r[t];e.config&&(Object.keys(e.config).forEach((function(t){if(-1!==t.indexOf("_")){var o=t.replace(/^labels_/,"label_").replace(/_/g,".");Object(c.set)(e.config,o,e.config[t]),delete e.config[t]}})),e.styles=Object(c.cloneDeep)(e.config),delete e.config)})),t._configs=r,t._loading=!1,e(Object(c.cloneDeep)(t._configs)),Object.keys(t._loadCallbacks).forEach((function(e){(0,t._loadCallbacks[e])()}))}})),[2])}))}))}))},e}(s.a);e.a=x},332:function(t,e,o){"use strict";var r=function(){function t(t,e,o,r){void 0===e&&(e=!1),void 0===o&&(o=!1),void 0===r&&(r=null),this.target=null,this.currentTarget=null,this.bubbles=!1,this.cancellable=!1,this.isPropagationStopped=!1,this.type=t,this.bubbles=e,this.cancellable=o,this.data=r,this.defaultPrevented=!1}return t.prototype.toJSON=function(){return{type:this.type,data:this.data}},t.prototype.stopPropagation=function(){this.isPropagationStopped=!0},t.prototype.stopImmediatePropagation=function(){this.stopPropagation(),this.isPropagationStopped=!0},t.prototype.isDefaultPrevented=function(){return this.defaultPrevented},t.prototype.preventDefault=function(){this.defaultPrevented=!0},t}();e.a=r},333:function(t,e,o){"use strict";var r,n=o(315),i=o(3),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t){function e(e){void 0===e&&(e=null);var o=this;return e=Object(i.extend)({},{refresh:0,showWhenLoading:!0},e),(o=t.call(this,e)||this)._layersByTime=null,o._isReset=!1,o._loading=!1,o._visible=!0,o._startup(),o}return a(e,t),Object.defineProperty(e.prototype,"showWhenLoading",{get:function(){return this.opts.showWhenLoading},set:function(t){this.opts.showWhenLoading=t},enumerable:!0,configurable:!0}),e.prototype.dataByTime=function(){return this._layersByTime||{}},e.prototype.play=function(){this.isAnimating()||this.canAnimate()&&(!this._hasImages()||this._totalImages()<this.totalIntervals?this._load():(this.show(),t.prototype.play.call(this)))},e.prototype.stop=function(){t.prototype.stop.call(this),this._loading&&this.reset()},e.prototype.reset=function(e){var o=this;void 0===e&&(e=!1),t.prototype.reset.call(this,e),this.hide(),this._reloadTimer&&window.clearTimeout(this._reloadTimer),this._layersByTime&&Object.keys(this._layersByTime).forEach((function(t){var e=parseInt(t,10);o._layersByTime[e].remove()})),this._isReset=!0,this._loading=!1,this._hasLoaded=!1,this._layersByTime=null,this._currentLayer=null},e.prototype.isReady=function(){var t=this.totalIntervals,e=this._totalImages();return!this.isLoading()&&(this._hasImages()&&e===t||0===t)},e.prototype.canAnimate=function(){var e=t.prototype.canAnimate.call(this);return(e&&this._hasLoaded&&!this._hasImages()||e&&!this.isFuture()&&!this.containsPast()||this.isFuture()&&!this.containsFuture())&&(e=!1),e},e.prototype.isLoading=function(){return this._loading},e.prototype.show=function(){this._visible=!0,this._currentLayer&&this._currentLayer.show()},e.prototype.hide=function(){this._visible=!1,this._currentLayer&&this._currentLayer.hide()},e.prototype.isVisible=function(){return!this._currentLayer||this._currentLayer.isVisible()},e.prototype._updateForTime=function(t){if(this.canShow(this.currentTime)?this.show():this.hide(),!1!==this._visible){var e=this._frameClosestToTime(t);e&&e!==this._currentLayer&&(e.show(),this._currentLayer&&this._currentLayer.hide(),this._currentLayer=e)}},e.prototype._frameClosestToTime=function(t){if(0===Object.keys(this.dataByTime()).length)return null;var e=Object.keys(this._layersByTime).sort().reverse().map((function(t){return parseInt(t,10)})),o=null,r=this.from,i=Math.abs(t-r);return e.forEach((function(e){var o=Math.abs(t-e);o<i&&(i=o,r=e)})),r!==this._lastImageTime&&this._layersByTime[r]&&(o=this._layersByTime[r],r=Math.round(r),this._lastImageTime=r,this.trigger(n.a.Event.ADVANCE_IMAGE,{time:r,layer:o})),o},e.prototype._hasImages=function(){return this._totalImages()>0},e.prototype._totalImages=function(){return Object.keys(this.dataByTime()).length},e.prototype._load=function(){var t=this;this._isReset=!1,this._loading=!0;var e=this.neededIntervals();if(!e||0===e.length)return this._hasLoaded=!0,void this.trigger(n.a.Event.LOAD_DONE);this._layersByTime&&Object.keys(this._layersByTime).forEach((function(t){var o=parseInt(t,10),r=e.indexOf(o);-1!==r&&e.splice(r,1)}));var o=function(){t._loading=!1,t._hasLoaded=!0,t.trigger(n.a.Event.LOAD_DONE),t.timeline||t.play()};if(0!==e.length){this.trigger(n.a.Event.LOAD_START,{times:e});var r=0,i=function(){t._loadInterval(e[r],!0,(function(){r+=1,t._isReset||(r>=e.length?(o(),t.opts.refresh>0&&(t._reloadTimer&&window.clearTimeout(t._reloadTimer),t._reloadTimer=setTimeout((function(){t.reset(),t._load()}),1e3*t.opts.refresh))):i())}))};i()}else o()},e.prototype._loadInterval=function(t,e,o){var r=this;if(t=Math.round(t),this._layersByTime){if(this._layersByTime[t])return void(o&&o())}else this._layersByTime={};var i=new Date(t);this.provider&&this.provider.animationLayerForDate(this,i).then((function(e){r._isReset?e.remove():(r._currentLayer&&r._currentLayer.hide(),r.showWhenLoading&&e.show(),r._currentLayer=e,r._layersByTime[t]=e,r.trigger(n.a.Event.LOAD_IMAGE,{date:new Date(t),layer:e}),r.trigger(n.a.Event.LOAD_PROGRESS,{time:t,loaded:Object.keys(r._layersByTime).length,total:r.totalIntervals}),o&&o())})).catch((function(t){console.error("Failed to load tile animation interval",t)}))},e}(n.a);e.a=s},334:function(t,e,o){"use strict";var r=o(3),n=function(){function t(t,e,o){this.data=t,this.style=e,this.renderable=o,t.id&&(this.id=t.id)}return Object.defineProperty(t.prototype,"bounds",{get:function(){if(this.geometry&&Object(r.has)(this.geometry,"bounds"))return this.geometry.bounds()},enumerable:!0,configurable:!0}),t}();e.a=n},335:function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var r,n=Math.PI/180,i=180/Math.PI,a=function(t){return 128/Math.PI*Math.pow(2,t)},s=function(t){return t*n},c=function(t){return t*i},u=function(t,e,o){var r=Math.PI,n=128/r*Math.pow(2,e),i=s(t.lat),a=n*(s(t.lon)+r),c=n*(r-Math.log(Math.tan(.25*r+.5*i)));return{x:.5*o.width-a,y:.5*o.height-c}},p=function(t,e){void 0===e&&(e=4);var o=Math.pow(10,e);return Math.round(t*o)/o};!function(t){t.pointToCoord=function(t,e,o,r,n){void 0===r&&(r=void 0),void 0===n&&(n=void 0);var i=Math.PI,s=a(o),p=r&&n?u(r,o,n):{x:0,y:0},l=t-p.x,h=e-p.y,f=l/s-i,d=2*(Math.atan(Math.exp(i-h/s))-.25*i);return{lat:c(d),lon:c(f)}},t.coordToPoint=function(t,e,o,r,i){void 0===r&&(r=void 0),void 0===i&&(i=void 0),e*=n,t*=n;var s=Math.PI,c=a(o),p=r&&i?u(r,o,i):{x:0,y:0},l=c*(e+s),h=c*(s-Math.log(Math.tan(.25*s+.5*t)));return{x:l+p.x,y:h+p.y}},t.getBoundsCenter=function(t){var e=(t.west+t.east)/2;return t.west>t.east&&(e=t.west-360+(t.west+t.east)/2),{lat:(t.south+t.north)/2,lon:e}},t.getBoundsZoomLevel=function(t,e){var o=function(t){var e=Math.sin(t*Math.PI/180),o=Math.log((1+e)/(1-e))/2;return Math.max(Math.min(o,Math.PI),-Math.PI)/2},r=function(t,e,o){return Math.floor(Math.log(t/e/o)/Math.LN2)},n=(o(t.north)-o(t.south))/Math.PI,i=t.east-t.west,a=(i<0?i+360:i)/360,s=r(e.height,256,n),c=r(e.width,256,a);return Math.min(s,c,21)},t.getSizeForBounds=function(e,o){var r=t.coordToPoint(e.north,e.west,o),n=t.coordToPoint(e.south,e.east,o);return{width:n.x-r.x,height:n.y-r.y}},t.getBoundsThatFits=function(e,o,r){void 0===r&&(r=0);var n=t.coordToPoint(e.north,e.west,0),i=t.coordToPoint(e.south,e.east,0),a=Math.abs(i.x-n.x),s=Math.abs(i.y-n.y),c=n.x+a/2,u=n.y+s/2,l={width:a,height:s},h=o.height/o.width,f=p(s/a,2),d=l.width/o.width;if(h!==f)if(o.width<o.height){var y=o.width/o.height;l.height=l.width*(1/y)}else{y=o.height/o.width;l.width=l.height*(1/y)}l.width+=r*d,l.height+=r*d;var m=l.width/2,g=l.height/2,v=t.pointToCoord(c-m,u-g,0),_=t.pointToCoord(c+m,u+g,0);return{north:p(v.lat),south:p(_.lat),west:p(v.lon),east:p(_.lon)}},t.coordToTile=function(t,e){var o=Math.PI,r=t.lon,n=s(t.lat);return{x:Math.floor((r+180)/360*Math.pow(2,e)),y:Math.floor((1-Math.log(Math.tan(n)+1/Math.cos(n))/o)/2*Math.pow(2,e))}},t.tileToCoord=function(t,e){var o=Math.PI-2*Math.PI*t.y/Math.pow(2,e);return{lat:180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o))),lon:t.x/Math.pow(2,e)*360-180}}}(r||(r={}))},336:function(t,e,o){"use strict";var r,n,i,a=o(309),s=o(40),c=o(325),u='Weather data &copy; <a href="https://www.aerisweather.com/" target="_blank">AerisWeather</a>',p=o(311),l=o(330),h=o(3),f=o(334),d=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),y=function(t){function e(e,o){var r=t.call(this)||this;return r._setInitialView=!0,r._ready=!1,o=Object(h.extend)({zoom:7},o),r._opts=o,r._sources={},r._sourceOrder=[],r.loadDependencies().then((function(){return r.init(e)})),r}return d(e,t),Object.defineProperty(e.prototype,"$el",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){return this._map},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"factory",{get:function(){return this._factory},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sources",{get:function(){var t=this;return Object.keys(this._sources).map((function(e){return t._sources[e]}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opts",{get:function(){return this._opts},enumerable:!0,configurable:!0}),e.prototype.isReady=function(){return this._ready},e.prototype.init=function(t){var e=this;this.setupMap(t);var o={};if(Object(h.isset)(this._opts.zoom)&&(o.zoom=this._opts.zoom),this._opts.center&&(o.center={lat:this._opts.center.lat,lon:this._opts.center.lon}),!this._factory)throw new Error("Cannot initialize map, overlay factory is undefined.");if(this._setupEvents(),this._setInitialView){var r=Object(h.isset)(o.zoom)?Math.max(0,o.zoom):8,n=o.center||{},i=n.lat,a=n.lon;Object(h.isset)(i)&&Object(h.isset)(a)?this.setView({lat:parseFloat(i),lon:parseFloat(a)},r):r>0&&this.setZoom(r)}this.on("map:ready",(function(){e._ready=!0,e.trigger("ready")}))},e.prototype.loadDependencies=function(){return null},e.prototype.setupMap=function(t){throw new Error("Subclasses of MapStrategy must override setupMap()")},e.prototype.setView=function(t,e){throw new Error("Subclasses of MapStrategy must override setView()")},e.prototype.setCenter=function(t){throw new Error("Subclasses of MapStrategy must override setCenter()")},e.prototype.setZoom=function(t){throw new Error("Subclasses of MapStrategy must override setZoom()")},e.prototype.addSource=function(t){var e=this,o=t.identifier;this._sources[o]=t,this.isTile(t)?(this._sourceOrder.push(o),t.dataSource=this,this.addOverlay(t.overlay),t.on("layer:add",(function(t){e.addOverlay(t.data.layer)})),t.on("layer:remove",(function(t){e.removeOverlay(t.data.layer)}))):this.isVector(t)&&(t.on("markers:add",(function(t){var o=t.data,r=o.markers;o.animation;r&&e.addMarkers(r)})),t.on("markers:remove",(function(t){var o=t.data.markers;o&&e.removeMarkers(o)})),t.on("markers:update",(function(t){(t.data.markers||[]).forEach((function(t){var o=t.id,r=t.renderable,n=t.value,i=t.style;n&&e.updateMarker(r,{data:{value:n},style:i.marker||i},o)}))})),t.on("shapes:add",(function(t){var o=t.data,r=o.shapes,n=o.animation;r&&(n?e.showShapes(r):e.addShapes(r))})),t.on("shapes:remove",(function(t){var o=t.data,r=o.shapes,n=o.animation;r&&(n?e.hideShapes(r):e.removeShapes(r))})))},e.prototype.removeSource=function(t){var e=t.identifier;if(this.isTile(t)){t.remove();var o=this._sourceOrder.indexOf(e);o>=0&&this._sourceOrder.splice(o,1)}else this.isVector(t)&&(this.removeMarkers(t.markers),this.removeShapes(t.shapes));t.strategy=null,delete this._sources[e]},e.prototype.isTile=function(t){return!1},e.prototype.isVector=function(t){return t instanceof l.d},e.prototype.isText=function(t){return t instanceof l.b},e.prototype.isMarker=function(t){return!1},e.prototype.isPolygon=function(t){return!1},e.prototype.isPolyline=function(t){return!1},e.prototype.addOverlay=function(t){throw new Error("Subclasses of MapStrategy must override addOverlay()")},e.prototype.addOverlays=function(t){var e=this;(t||[]).forEach((function(t){return e.addOverlay(t)}))},e.prototype.removeOverlay=function(t){throw new Error("Subclasses of MapStrategy must override removeOverlay()")},e.prototype.removeOverlays=function(t){var e=this;(t||[]).forEach((function(t){return e.removeOverlay(t)}))},e.prototype.addMarker=function(t,e){if(t instanceof f.a){if(t.renderable){if(t.style&&t.style.callout){var o=t.style.callout,r=Object(h.isFunction)(o)?o(t.data):o;this.bindCalloutToMarker(t.renderable,r)}this.addMarker(t.renderable,t.data)}}else if(Object(h.isPlainObject)(t)){t.style=t.style||{};var n=t.renderable,i=t.data;o=t.style.callout;if(n){if(o){r=Object(h.isFunction)(o)?o(i):o;this.bindCalloutToMarker(t.renderable,r)}this.addMarker(n,i)}}},e.prototype.addMarkers=function(t){var e=this;(t||[]).forEach((function(t){return e.addMarker(t)}))},e.prototype.removeMarker=function(t){if(t instanceof f.a)t.renderable&&this.removeMarker(t.renderable);else if(Object(h.isPlainObject)(t)){var e=t.renderable;e&&this.removeMarker(e)}},e.prototype.removeMarkers=function(t){var e=this;(t||[]).forEach((function(t){return e.removeMarker(t)}))},e.prototype.updateMarker=function(t,e,o){if(void 0===o&&(o=null),t instanceof f.a)t.renderable&&this.updateMarker(t.renderable,e,o);else if(Object(h.isPlainObject)(t)){var r=t.renderable;r&&this.updateMarker(r,e,o)}},e.prototype.bindCalloutToMarker=function(t,e){},e.prototype.addShape=function(t,e){if(Object(h.isArray)(t))this.addShapes(t,e);else if(t instanceof f.a)t.renderable&&this.addShape(t.renderable,t.data||e);else if(Object(h.isPlainObject)(t)){var o=t.renderable,r=t.polygons,n=t.polylines,i=t.data;r&&this.addShapes(r,i),n&&this.addShapes(n,i),o&&this.addShape(o,i)}},e.prototype.addShapes=function(t,e){var o=this;(t||[]).forEach((function(t){return o.addShape(t,e)}))},e.prototype.removeShape=function(t){if(Object(h.isArray)(t))this.removeShapes(t);else if(t instanceof f.a)t.renderable&&this.removeShape(t.renderable);else if(Object(h.isPlainObject)(t)){var e=t.renderable,o=t.polygons,r=t.polylines;o&&this.removeShapes(o),r&&this.removeShapes(r),e&&this.removeShape(e)}},e.prototype.removeShapes=function(t){var e=this;(t||[]).forEach((function(t){return e.removeShape(t)}))},e.prototype.showShape=function(t){if(Object(h.isArray)(t))this.showShape(t);else if(t instanceof f.a)t.renderable&&this.showShape(t.renderable);else if(Object(h.isPlainObject)(t)){var e=t.shape,o=t.polygons,r=t.polylines;o&&this.showShapes(o),r&&this.showShapes(r),e&&this.showShape(e)}},e.prototype.showShapes=function(t){var e=this;(t||[]).forEach((function(t){return e.showShape(t)}))},e.prototype.hideShape=function(t){if(Object(h.isArray)(t))this.hideShape(t);else if(t instanceof f.a)t.renderable&&this.hideShape(t.renderable);else if(Object(h.isPlainObject)(t)){var e=t.shape,o=t.polygons,r=t.polylines;o&&this.hideShapes(o),r&&this.hideShapes(r),e&&this.hideShape(e)}},e.prototype.hideShapes=function(t){var e=this;(t||[]).forEach((function(t){return e.hideShape(t)}))},e.prototype.showCallout=function(t,e){},e.prototype.clear=function(){},e.prototype._setupEvents=function(){var t=this,e=this._eventMapping;if(e){var o="on";Object(h.has)(this.map,o)||(Object(h.has)(this.map,"addEventListener")?o="addEventListener":Object(h.has)(this.map,"addListener")&&(o="addListener")),Object(h.has)(this.map,o)&&Object.keys(e).forEach((function(r){t.map[o](r,(function(o){var n=t._dataForMapEvent(r,o);t._shouldTriggerEvent(r)&&t.trigger(e[r],n)}))}))}},e.prototype._shouldTriggerEvent=function(t){return!0},e.prototype._dataForMapEvent=function(t,e){return null},e.prototype.tileLayer=function(t,e,o){if(!this.dataSource)return null;var r=Object(h.isset)(o.zIndex)?o.zIndex:1,n=this._sourceOrder.indexOf(t);n>=0&&(r=n+1);var i=this.dataSource.requestForMap(t);return this.factory.tileLayer(t,i,Object(h.extend)(Object(h.cloneDeep)(o),{time:e,zIndex:r}))},e}(a.a),m=o(313),g=o(310),v=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),_=function(t){function e(e,o,r){var n=t.call(this,e,o,r)||this;return n._visible=!0,n._exists=!1,o.offset(0),n._overlay=L.tileLayer(o.url(),n._opts),n.timestamp=n._opts.time,n.animation.provider=n,n._overlay.on("add",(function(){n._exists=!0})).on("remove",(function(){n._exists=!1})),n}return v(e,t),Object.defineProperty(e.prototype,"overlay",{get:function(){return this._overlay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{set:function(t){this.enabled&&Object(h.isset)(t)&&(t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()),this._timestamp&&t.getTime()===this._timestamp.getTime()||(this._timestamp=t,!1===this.isAnimating()&&(this.animation.hide(),this.updateVisibility()),this.overlay&&this.canShow()&&this.overlay.setUrl(this.urlTemplate())))},enumerable:!0,configurable:!0}),e.prototype.show=function(){this._hidden=!1,this.overlay&&this.overlay.setOpacity(this._opacity)},e.prototype.hide=function(){this._hidden=!0,this.overlay&&this.overlay.setOpacity(0)},e.prototype.remove=function(){this.trigger("layer:remove",{layer:this.overlay})},e.prototype.setOpacity=function(t){this._opacity=t,this.overlay&&this.overlay.setOpacity(t)},e.prototype.setOrder=function(t){this.overlay.setZIndex(t)},e.prototype.animationLayerForDate=function(t,e){var o=this;return new Promise((function(t,r){if(o.dataSource){var n=o.dataSource.tileLayer(o.key,e,Object(h.extend)({},o._opts,{id:o.identifier+"-anim-"+Object(g.mapTimestampFromDate)(e),animation:{enabled:!1}}));n.setOpacity(o._opacity),n.hide(),n.overlay.on("load",(function(){t(n)})),n.on("layer:remove",(function(){o.trigger("layer:remove",{layer:n.overlay})})),o.trigger("layer:add",{layer:n.overlay})}else r(new Error("No map strategy data source provided"))}))},e}(m.a),b=function(t,e,o,r){var n=0,i=0;if(r=Object(h.extend)({x:0,y:0},r),Object(h.isString)(t)){var a=t;n=(o.width-e.width)/2,i=(o.height-e.height)/2,/^top/.test(a)?i=0:/^bottom/.test(a)&&(i=o.height-e.height),/left$/.test(a)?n=0:/right$/.test(a)&&(n=o.width-e.width)}else{var s=t;n=s.x,i=s.y}return{x:n+=r.x,y:i+=r.y}},O=function(t){var e=t.stroke?Object.keys(t.stroke).reduce((function(e,o){var r=t.stroke[o];return Object(h.isset)(r)&&("width"===o&&(e+=' stroke-width="'+r+'"'),"color"===o&&(e+=' stroke="'+r+'"'),"opacity"===o&&(e+=' stroke-opacity="'+r+'"')),e}),""):"",o=t.fill?Object.keys(t.fill).reduce((function(e,o){var r=t.fill[o];return Object(h.isset)(r)&&("color"===o&&(e+=' fill="'+r+'"'),"opacity"===o&&(e+=' fill-opacity="'+r+'"')),e}),""):"";return o||e?""+o+e:""};(i=n||(n={})).calculateTextSize=function(t,e,o,r){var n=0,i=0;if(r=r||[0,0],e=e||12,window&&window.document){var a=window.document,s=a.createElement("text");s.style.fontSize=Object(h.isString)(e)?""+e:e+"px",s.style.fontWeight=o||"normal",s.style.visibility="hidden",s.innerHTML=t,a.body.appendChild(s);var c=s.getBoundingClientRect();a.body.removeChild(s),c.width>0&&(n=c.width),c.height>0&&(i=c.height)}return[n+=2*r[0],i+=2*r[1]]},i.path=function(t,e){e=Object(h.extend)({stroke:{opacity:1},fill:{color:"#ffffff",opacity:1}},e);var o=O(e);return"<g"+(e.transform?' transform="'+e.transform+'"':"")+'><path d="'+t+'"'+o+" /></g>"},i.rect=function(t,e,o){var r=(o=Object(h.extend)({margin:0,radius:0,stroke:null,fill:{color:"#ffffff",opacity:1}},o)).margin,n=o.radius,a=r;o.stroke&&o.stroke.width>0&&(a+=o.stroke.width/2,t-=o.stroke.width,e-=o.stroke.width);var s="M"+(a+n)+","+a+" ";return s+="L"+(a+t-n)+","+a+" ",n>0&&(s+="A"+n+","+n+" 0 0,1 "+(a+t)+","+(a+n)+" "),s+="L"+(a+t)+","+(a+e-n)+" ",n>0&&(s+="A"+n+","+n+" 0 0,1 "+(a+t-n)+","+(a+e)+" "),s+="L"+(a+n)+","+(a+e)+" ",n>0&&(s+="A"+n+","+n+" 0 0,1 "+a+","+(a+e-n)+" "),s+="L"+a+","+(a+n)+" ",n>0&&(s+="A"+n+","+n+" 0 0,1 "+(a+n)+","+a+" "),s+="Z",i.path(s,o)},i.circle=function(t,e){var o=2*(((e=Object(h.extend)({position:"center",translate:{x:0,y:0},radius:0,stroke:null,fill:{color:"#ffffff",opacity:1}},e)).radius||8)+(Object(h.get)(e,"stroke.width")||0)+1),r=b(e.position,{width:o,height:o},t,e.translate),n=O(e);return r.x+=o/2,r.y+=o/2,"<circle"+(e.transform?' transform="'+e.transform+'"':"")+' cx="'+r.x+'" cy="'+r.y+'" r="'+e.radius+'"'+n+" />"},i.text=function(t,e,o){o=Object(h.extend)({position:"center",translate:{x:0,y:0},anchor:"start",size:12,font:"'Helvetica','Arial',sans-serif",style:"bold",color:"#222222"},o),t=t||o.value;var r=i.calculateTextSize(""+t,o.size,o.style,o.padding),n=r[0],a=r[1];o.translate.y+=a-1;var s=b(o.position,{width:n,height:a},e,o.translate);return"<text"+(o.transform?' transform="'+o.transform+'"':"")+' dominent-baseline="hanging" text-anchor="'+o.anchor+'" x="'+s.x+'" y="'+s.y+'" style="font-family:'+o.font+";font-size:"+o.size+"px;font-weight:"+o.style+';" fill="'+o.color+'">'+(t||"")+"</text>"},i.image=function(t,e,o){o=Object(h.extend)({position:"center",size:[30,30]},o),t=t||o.url;var r=o.size,n=r[0],i=r[1],a=b(o.position,{width:n,height:i},e,o.translate),s=o.size,c=s[0],u=s[1];return"<image"+(o.transform?' transform="'+o.transform+'"':"")+' x="'+a.x+'" y="'+a.y+'" width="'+c+'" height="'+u+'" xlink:href="'+t+'" />'},i.svg=function(t,e,o,r){return void 0===r&&(r=null),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="'+t+'" height="'+e+'"'+(r?' viewBox="'+r+'"':"")+">\n\t\t\t"+(o||[]).map((function(t){return t})).join("")+"\n\t\t</svg>"},i.draw=function(t,e,o){var r=o.value,n=!0,a=!1,s=o.shape,c=o.text,u=o.image,p=[],l=[];if(c){var f=function(o,r){var n=o||r.value||"",a=r.x||0,c=r.y||0,u=r.size||12,p=i.calculateTextSize(n,u,r.style,r.padding),l=p[0],f=p[1],d=!Object(h.isset)(r.autosize)||r.autosize;if(Object(h.isEmpty)(n))return null;d&&(l&&f?(t=l,e=f):(t=5*n.length,e=u+2));var y=0;return s&&s.stroke&&(y=s.stroke.width/2||0),i.text(n,{width:t,height:e},Object(h.extend)(r,{x:y+t/2+a,y:y+Math.round(e-(e-.7*u)/2)+c}))};if(Object(h.isArray)(c))c.forEach((function(t){var e=f(r,t);e&&l.push(e)}));else{var d=f(r,c);d&&l.push(d)}l.length>0&&(a=!0)}if(s){var y=t,m=e,g=s.type,v=s.size;if(v&&2===v.length&&(y=v[0],m=v[1]),"rect"===g){var _=i.rect(y,m,s);p.push(_)}else if("path"===g)_=i.path(Object(h.get)(s,"path"),s),p.push(_);else{var b=Object(h.get)(s,"stroke.width")||0;s.radius=Math.floor((y-2*b)/2),s.center={x:Math.round(y/2)+1,y:Math.round(m/2)+1},_=i.circle({width:t,height:e},s),p.push(_)}}if(u){var O=u.url;if(O){var w=u.x||0,j=u.y||0,k={x:t/2,y:e/2},E=u.size||[30,30],T=(y=E[0],m=E[1],i.image(O,{width:t,height:e},Object(h.extend)(u,{x:k.x-y/2+w,y:k.y-m/2+j})));p.push(T)}}return l.length>0?p=p.concat(l):a&&(n=!1),n?i.svg(t,e,p,o.viewBox):null};var w=function(){function t(){}return t.prototype.tileLayer=function(t,e,o){return new _(t,e,o)},t.prototype.marker=function(t,e,o){var r={};if(o){if(o.skip&&!0===o.skip)return null;r.icon=this.markerIcon(o),o.zIndex&&(r.zIndexOffset=o.zIndex)}var n=L.marker([e.lat,e.lon],r);if(o&&o.callout){var i=o.callout;if(Object(h.isFunction)(o.callout))i=(0,o.callout)();var a=L.popup().setContent(i);n.bindPopup(a)}return n},t.prototype.markerIcon=function(t){if(t.html)return L.divIcon({html:t.html,iconSize:t.size,className:t.className||""});if(t.svg){var e=t.size||[12,12],o=e[0],r=e[1];return L.divIcon({html:n.draw(o,r,t.svg),iconSize:t.size,className:t.className||""})}if(t.icon){var i=t.icon;return L.icon({iconUrl:i.url,iconRetinaUrl:i.retinaUrl,iconSize:t.size,iconAnchor:i.anchor,className:t.className||""})}return null},t.prototype.polygon=function(t,e,o){var r;o&&(r={stroke:!1,fill:!1},o.stroke&&(r.stroke=!0,r.color=o.stroke.color,r.opacity=o.stroke.opacity,r.weight=o.stroke.width,r.lineCap=o.stroke.lineCap,r.lineJoin=o.stroke.lineJoin,r.dashArray=o.stroke.dashArray,r.dashOffset=o.stroke.dashOffset),o.fill&&(r.fill=!0,r.fillColor=o.fill.color,r.fillOpacity=o.fill.opacity,r.fillRule=o.fill.rule||"nonzero"));var n=[];return e.forEach((function(t){var e=t.outer,o=t.inner?t.inner:[];n.push([e].concat(o))})),L.polygon(n,r)},t.prototype.polyline=function(t,e,o){var r,n=e.map((function(t){return[t.lat,t.lon]}));return o&&(r={stroke:!1,fill:!1},o.stroke&&((r=Object(h.extend)(r,{stroke:!0},o.stroke)).weight=r.width,delete r.width)),L.polyline(n,r)},t}(),j=o(68),k=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),E=function(t){function e(e,o){var r=t.call(this,e,Object(h.extend)({style:null,map:{worldCopyJump:!0}},o))||this;return r._clickedMapLayer=!1,r}return k(e,t),Object.defineProperty(e.prototype,"$el",{get:function(){return Object(j.a)(this.map.getContainer())},enumerable:!0,configurable:!0}),e.prototype.loadDependencies=function(){return new Promise((function(t,e){if("undefined"==typeof L||void 0===L.map){Promise.all([Object(h.loadStyles)("https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"),Object(h.loadScript)("https://unpkg.com/leaflet@1.4.0/dist/leaflet.js")]).then((function(){t()}))}else t()}))},e.prototype.setupMap=function(t){var e=this;this._factory=new w,this._eventMapping={load:"load",unload:"unload",resize:"resize",click:"click",dblclick:"dblclick",mousedown:"mousedown",mouseup:"mouseup",mouseover:"mouseover",mouseout:"mouseout",mousemove:"mousemove",zoom:"zoom",zoomstart:"zoom:start",zoomend:"zoom:end",move:"move",movestart:"move:start",moveend:"move:end",popupopen:"popupopen",popupclose:"popupclose"};var o=this.opts.map;if(o){var r=o.center,n=o.zoom;r&&Object(h.isset)(r.lat)&&Object(h.isset)(r.lng)&&Object(h.set)(this.opts,"center",{lat:r.lat,lon:r.lng}),n&&Object(h.set)(this.opts,"zoom",n)}if(Object(g.isLeaflet)(t))this._map=t;else{if(Object(h.isString)(t)&&(t=Object(j.a)(t)),Object(h.isArray)(t)&&t.length>0)t=t[0];else if(Object(h.isDOM)(t)){t=t[0]}this._map=L.map(t,Object(h.extend)({zoomControl:!1},this.opts.map)),L.control.zoom({position:"bottomleft"}).addTo(this._map),Object(h.isset)(this.opts.center)||Object(h.set)(this.opts,"center",{lat:43,lon:-93}),Object(h.isset)(this.opts.zoom)||Object(h.set)(this.opts,"zoom",7),this.map.createPane("base"),this.map.getPane("base").style.zIndex="199";var i=Object(h.get)(this.opts,"style");Object(h.isEmpty)(i)?this._baseLayer=L.tileLayer("https://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',pane:"base"}):this._baseLayer=L.tileLayer(i,{pane:"base"}),this._baseLayer.addTo(this.map)}this.map.createPane("admin"),this.map.getPane("admin").style.zIndex="210",setTimeout((function(){e.trigger("map:ready")}),250)},e.prototype.setBaseUrl=function(t){Object(h.isEmpty)(t)||(this._baseLayer&&this._baseLayer.remove(),this._baseLayer=L.tileLayer(t,{pane:"base"}),this._baseLayer.addTo(this.map))},e.prototype.setView=function(t,e){this.map.setView({lat:t.lat,lng:t.lon},e)},e.prototype.getCenter=function(){var t=this._map.getCenter();return{lat:t.lat,lon:t.lng}},e.prototype.setCenter=function(t){this._map.setView({lat:t.lat,lng:t.lon},this.getZoom())},e.prototype.getZoom=function(){return this._map.getZoom()},e.prototype.setZoom=function(t){this._map.setZoom(t)},e.prototype.getBounds=function(){var t=this.map.getBounds();return{north:t.getNorth(),west:t.getWest(),south:t.getSouth(),east:t.getEast()}},e.prototype.setBounds=function(t){var e=new L.LatLng(t.south,t.west),o=new L.LatLng(t.north,t.east);this.map.fitBounds(new L.LatLngBounds(e,o))},e.prototype.fitBounds=function(t,e){void 0===e&&(e=[10,10]);var o=new L.LatLng(t.south,t.west),r=new L.LatLng(t.north,t.east),n=new L.LatLngBounds(o,r);this.map.fitBounds(n,{padding:L.point(e[0],e[1])})},e.prototype.isTile=function(t){return t instanceof _},e.prototype.isMarker=function(t){return t instanceof L.Marker},e.prototype.isPolygon=function(t){return t instanceof L.Polygon},e.prototype.isPolyline=function(t){return t instanceof L.Polyline},e.prototype.addOverlay=function(t){(t instanceof L.Layer||t instanceof L.TileLayer)&&t.addTo(this.map)},e.prototype.removeOverlay=function(t){(t instanceof L.Layer||t instanceof L.TileLayer)&&t.remove()},e.prototype.addMarker=function(e,o){var r=this;this.isMarker(e)&&(e.addTo(this.map),e.off("click"),e.on("click",(function(){return r.trigger("marker:click",{data:o,marker:e})}))),t.prototype.addMarker.call(this,e,o)},e.prototype.removeMarker=function(e){this.isMarker(e)&&(e.off("click"),e.remove()),t.prototype.removeMarker.call(this,e)},e.prototype.updateMarker=function(t,e,o){if(void 0===o&&(o=null),e&&this.isMarker(t)){var r=Object(h.get)(e,"data.value"),n=Object(h.get)(e,"style")||{};Object(h.isFunction)(n)&&(n=n({value:r}));var i=this.factory.markerIcon(n);i&&t.setIcon(i)}},e.prototype.bindCalloutToMarker=function(t,e){},e.prototype.addShape=function(e,o){var r=this;if(this.isPolygon(e)||this.isPolyline(e))return e.addTo(this.map),void e.on("click",(function(t){r._clickedMapLayer=!0,r.trigger("shape:click",{data:o,shape:e}),setTimeout((function(){r._clickedMapLayer=!1}),100)}));t.prototype.addShape.call(this,e,o)},e.prototype.removeShape=function(e){if(this.isPolygon(e)||this.isPolyline(e))return e.off("click"),void e.remove();t.prototype.removeShape.call(this,e)},e.prototype.showShape=function(t){this.addShape(t)},e.prototype.hideShape=function(t){this.removeShape(t)},e.prototype.coordToPoint=function(t){if(!t)return null;var e=this.map.latLngToContainerPoint({lat:t.lat,lng:t.lon});return{x:e.x,y:e.y}},e.prototype.pointToCoord=function(t){if(!t)return null;var e=this.map.containerPointToLatLng([t.x,t.y]);return{lat:e.lat,lon:e.lng}},e.prototype.showCallout=function(t,e){Object(g.isCoordObject)(t)?this.map.openPopup(e,new L.LatLng(t.lat,t.lon)):this.isMarker(t)&&t.unbindPopup().bindPopup(e).openPopup()},e.prototype._setupEvents=function(){var e=this;t.prototype._setupEvents.call(this),this.map.on("moveend",(function(t){e.trigger("change:bounds"),e.trigger("change:center")})),this.map.on("zoomend",(function(t){e.trigger("change:zoom")}))},e.prototype._shouldTriggerEvent=function(t){return"click"!==t||!1===this._clickedMapLayer},e.prototype._dataForMapEvent=function(t,e){if(!e)return null;var o=null;switch(t){case"click":case"dblclick":o={coord:{lat:e.latlng.lat,lon:e.latlng.lng},point:{x:e.containerPoint.x,y:e.containerPoint.y}}}return o},e}(y),T=function(){function t(t,e,o){void 0===o&&(o=void 0),this._hidden=!1,this._idPrefix="aeris-layer",this._id=o||t,this._opts=Object(h.extend)({},e),this._opacity=1}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sourceId",{get:function(){var t=this.id?"-"+this.id:"";return""+this._idPrefix+t+"-source"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layerId",{get:function(){var t=this.id?"-"+this.id:"";return""+this._idPrefix+t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"map",{get:function(){return this._map},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentId",{get:function(){return this._relativeTo},set:function(t){this._relativeTo=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHidden",{get:function(){return this._hidden},enumerable:!0,configurable:!0}),t.prototype.addTo=function(t){var e=this;if(this._map!==t||!this.exists()){if(this._map=t,!this._relativeTo)t.getStyle().layers.forEach((function(t,o){"line"===t.type&&/^admin-/.test(t.id)&&!e._relativeTo&&(e._relativeTo=t.id)}));void 0!==t.getLayer(this.layerId)||(this.source?(t.addSource(this.sourceId,this.source),this._relativeTo&&void 0===t.getLayer(this._relativeTo)||t.addLayer(this.layer,this._relativeTo)):this.invalidate()),this.isHidden&&this.hide()}},t.prototype.remove=function(){if(this._map){var t=this._map;void 0!==t.getLayer(this.layerId)&&(t.removeLayer(this.layerId),t.removeSource(this.sourceId)),this._map=null}},t.prototype.show=function(){this._hidden=!1,this.exists()&&("raster"===this.layer.type&&this.map.setPaintProperty(this.layerId,"raster-opacity",this._opacity),this.map.setLayoutProperty(this.layerId,"visibility","visible"))},t.prototype.hide=function(){this._hidden=!0,this.exists()&&this.map.setLayoutProperty(this.layerId,"visibility","none")},t.prototype.setOpacity=function(t){this._opacity=t,this.exists()&&"raster"===this.layer.type&&this.map.setPaintProperty(this.layerId,"raster-opacity",t)},t.prototype.setZIndex=function(t){if(this.exists()){var e=this.map.getStyle().layers,o=0;e.forEach((function(t,e){"line"===t.type&&/^admin-/.test(t.id)&&0===o&&(o=e)}));var r=e.map((function(t){return t.id}))[o+t];this.map.removeLayer(this.layerId),this.map.addLayer(this.layer,r)}},t.prototype.exists=function(){var t=this.map;return!!t&&(void 0!==t.getLayer(this.layerId)&&void 0!==t.getSource(this.sourceId))},t.prototype.invalidate=function(){throw new Error("Subclasses must override `invalidate`")},t}(),x=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),P=function(t){function e(e,o,r){void 0===r&&(r=void 0);var n=t.call(this,e,Object(h.extend)({type:"tile"},o),r)||this;return n._type=n._opts.type,n}return x(e,t),e.prototype.setUrl=function(t){this._opts.url=t,this.map&&this.invalidate()},e.prototype.setBounds=function(t){this._opts.bounds=t},e.prototype.setImage=function(t,e){void 0===e&&(e=void 0),this._opts.url=t;var o=this.map;if(o){e||(e=this._opts.bounds);var r=o.getSource(this.sourceId);r?r.updateImage({url:t,coordinates:[[e.west,e.north],[e.east,e.north],[e.east,e.south],[e.west,e.south]]}):this.invalidate()}},e.prototype.invalidate=function(){var t=this._opts,e=t.url,o=t.bounds;if(e){if("image"===this._type){if(!o)return;this.source={type:"image",url:e,coordinates:[[o.west,o.north],[o.east,o.north],[o.east,o.south],[o.west,o.south]]}}else this.source={type:"raster",tiles:[e],tileSize:256,attribution:this._opts.attribution||""};if(this.layer={id:this.layerId,type:"raster",source:this.sourceId,paint:{"raster-fade-duration":0}},this.map){var r=this.map;this.remove(),this.addTo(r)}}},e}(T),M=o(335),S=o(69),A=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),I=function(t){function e(e,o,r){var n=t.call(this,e,o,Object(h.extend)({animation:{type:"image"}},r))||this;n._overlay=new P(e,Object(h.extend)(r,{type:"type"}),n.identifier),n._animationOverlay=new P(e,Object(h.extend)(r,{type:"image"}),n.identifier+"-anim"),r.id&&(n._overlay.id=r.id,n._animationOverlay.id=r.id+"-anim");var i=Object(h.get)(r,"style.opacity");Object(h.isset)(i)&&(n._overlay.setOpacity(i),n._animationOverlay.setOpacity(i)),n._overlay.parentId=Object(h.get)(r,"style.belowLayer"),n._animationOverlay.parentId=n._overlay.layerId,n.timestamp=n._opts.time;var a=n._animationOverlay,s=n.animation;return s.provider=n,s.on("show",(function(t){n.show()})),s.on("hide",(function(t){n.hide()})),s.on("play load:progress",(function(t){a.map||a.addTo(n.overlay.map),n.isVisible()&&(n.overlay.hide(),a.show())})),s.on("stop",(function(t){a.hide(),n.overlay.show()})),s.on("load:image advance:image",(function(t){var e=t.data.img;e&&a.setImage(e.src)})),n}return A(e,t),Object.defineProperty(e.prototype,"overlay",{get:function(){return this._overlay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{set:function(t){this.enabled&&Object(h.isset)(t)&&(t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()),this._timestamp&&t.getTime()===this._timestamp.getTime()||(this._timestamp=t,!1===this.isAnimating()&&(this.animation.hide(),this.updateVisibility()),!this.overlay||!this.canShow()&&this.overlay.exists()||this.overlay.setUrl(this.urlTemplate())))},enumerable:!0,configurable:!0}),e.prototype.show=function(){this._hidden=!1,this.animation.isAnimating()&&this._animationOverlay?this._animationOverlay.show():this.overlay&&this.overlay.show()},e.prototype.hide=function(){this._hidden=!0,this.overlay&&this.overlay.hide(),this._animationOverlay&&this._animationOverlay.hide()},e.prototype.remove=function(){this.trigger("layer:remove",{layer:this.overlay})},e.prototype.setOpacity=function(t){this._opacity=t,this.overlay&&this.overlay.setOpacity(t),this._animationOverlay&&this._animationOverlay.setOpacity(t)},e.prototype.setOrder=function(t){this.overlay&&this.overlay.setZIndex(t),this._animationOverlay&&this._animationOverlay.setZIndex(t)},e.prototype.animationUrlForDate=function(t,e){var o=this.overlay.map;if(!o)return null;var r=o.getBounds(),n=o.getZoom()+1,i=M.a.coordToTile({lat:r.getNorth(),lon:r.getWest()},n),a=M.a.coordToTile({lat:r.getSouth(),lon:r.getEast()},n),s=M.a.tileToCoord(i,n),c=M.a.tileToCoord({x:a.x+1,y:a.y+1},n),u={width:256*(Math.abs(i.x-a.x)+1),height:256*(Math.abs(i.y-a.y)+1)},p={north:s.lat,south:c.lat,west:s.lon,east:c.lon},l=this.service.clone().type(S.a.IMAGE);return l.bounds(p).zoom(n).size(u.width,u.height).date(e),this._animationOverlay.setBounds(p),l.url()},e.prototype.animationSizeForImage=function(t){return{width:100,height:100}},e}(m.a),D=o(23),C=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),z=function(t){function e(e,o,r){void 0===r&&(r=void 0);var n=this;return r=r||{},Object.keys(r).forEach((function(t){var e=D.hyphenate(t);e!==t&&(r[e]=r[t],delete r[t])})),(n=t.call(this,e,r,r.id)||this)._polygons=o,n}return C(e,t),Object.defineProperty(e.prototype,"strokeLayerId",{get:function(){return this.layerId+"-stroke"},enumerable:!0,configurable:!0}),e.prototype.addTo=function(e){(t.prototype.addTo.call(this,e),this._strokeLayer)&&(void 0!==e.getLayer(this.strokeLayerId)||e.addLayer(this._strokeLayer,this.layerId))},e.prototype.remove=function(){if(this.map){if(this._strokeLayer)void 0!==this.map.getLayer(this.strokeLayerId)&&this.map.removeLayer(this._strokeLayer);t.prototype.remove.call(this)}},e.prototype.invalidate=function(){var t=this._polygons.length>1,e=(this._polygons||[]).map((function(t){var e=t.outer.map((function(t){return[t.lon,t.lat]})),o=t.inner?t.inner.map((function(t){return t.map((function(t){return[t.lon,t.lat]}))})):[];return[e].concat(o)}));this.source={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:t?"MultiPolygon":"Polygon",coordinates:t?e:e[0]||[]}}]}};var o=Object(h.cloneDeep)(this._opts),r={fill:{},stroke:{}};if(["fill","line"].forEach((function(t){var e="line"===t?"stroke":"fill";Object.keys(o).filter((function(e){return new RegExp("^"+t+"-").test(e)})).map((function(t){var n=D.hyphenate(t);o[t]&&(r[e][n]=o[t])}))})),this.layer={id:this.layerId,type:"fill",source:this.sourceId,layout:{},paint:r.fill},Object.keys(r.stroke).length>0&&(this._strokeLayer={id:this.layerId+"-stroke",type:"line",source:this.sourceId,layout:{},paint:r.stroke}),this.map){var n=this.map;this.remove(),this.addTo(n)}},e.prototype._style=function(t){return this._opts[t]},e}(T),B=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),F=function(t){function e(e,o,r){void 0===r&&(r=void 0);var n=this;return r=r||{},Object.keys(r.style).forEach((function(t){var e=D.hyphenate(t);e!==t&&(r.style[e]=r.style[t],delete r.style[t])})),(n=t.call(this,e,r,r.id)||this)._points=o,n}return B(e,t),e.prototype.invalidate=function(){this.source={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:this._points.map((function(t){return[t.lon,t.lat]}))}}]}};var t=Object(h.cloneDeep)(this._opts).style;if(this.layer={id:this.layerId,type:"line",source:this.sourceId,layout:{},paint:t},this.map){var e=this.map;this.remove(),this.addTo(e)}},e.prototype._style=function(t){return this._opts[t]},e}(T),R=function(){function t(){}return t.prototype.tileLayer=function(t,e,o){return new I(t,e,o)},t.prototype.marker=function(t,e,o){var r={};if(o){if(o.skip&&!0===o.skip)return null;r.icon=this.markerIcon(o)}var n=new mapboxgl.Marker({element:r.icon});if(n.setLngLat([e.lon,e.lat]),o&&o.callout){var i=o.callout;if(Object(h.isFunction)(o.callout))i=(0,o.callout)();var a=new mapboxgl.Popup;a.setHTML(i),n.setPopup(a)}return n},t.prototype.markerIcon=function(t){if(!t)return null;if(t.html&&console.warn("awxjs - HTML markers are not currently supported with Mapbox GL"),t.svg){var e=t.size||[12,12],o=e[0],r=e[1];if(document){var i=document.createElement("div");return i.innerHTML=n.draw(o,r,t.svg),t.zIndex&&(i.style.zIndex=""+t.zIndex),i}}if(t.icon){var a=new Image;return a.src=t.icon.url,a.width=t.size[0],a.height=t.size[1],a}return null},t.prototype.polygon=function(t,e,o){var r;return o&&((r={stroke:!1,fill:!1}).id=o.id,o.stroke&&(r.lineColor=o.stroke.color,r.lineOpacity=o.stroke.opacity,r.lineWidth=o.stroke.width,r.lineCap=o.stroke.lineCap,r.lineJoin=o.stroke.lineJoin,r.lineDasharray=o.stroke.dashArray,r.dashOffset=o.stroke.dashOffset),o.fill&&(r.fillColor=o.fill.color,r.fillOpacity=o.fill.opacity)),e.forEach((function(t){r.id||(r.id=t.id)})),new z(t,e,r)},t.prototype.polyline=function(t,e,o){var r,n={stroke:{color:"lineColor",opacity:"lineOpacity",width:"lineWidth",dashArray:"lineDashArray"}};o&&((r={style:{}}).id=o.id,o.stroke&&Object.keys(o.stroke).forEach((function(t){var e=n.stroke[t]||t;r.style[e]=o.stroke[t]})));e.map((function(t){return[t.lat,t.lon]}));return new F(t,e,r)},t}(),N=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),V=function(t){function e(e,o){var r=t.call(this,e,Object(h.extend)({accessToken:null,style:"mapbox://styles/mapbox/streets-v9"},o))||this;return r._pointAnimationUpdates={},r._shapeDataById={},r._clickedMapLayer=!1,r}return N(e,t),Object.defineProperty(e.prototype,"$el",{get:function(){return Object(j.a)(this.map.getContainer())},enumerable:!0,configurable:!0}),e.prototype.loadDependencies=function(){var t=document.createElement("style");return t.type="text/css",t.innerHTML=".mapboxgl-marker { line-height: 0; }",window.document.body.appendChild(t),new Promise((function(t,e){"undefined"==typeof mapboxgl||void 0===mapboxgl.Map?Promise.all([Object(h.loadStyles)("https://api.tiles.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.css"),Object(h.loadScript)("https://api.tiles.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.js")]).then((function(){t()})):t()}))},e.prototype.setupMap=function(t){var e=this;this._factory=new R,this._eventMapping={load:"load",remove:"unload",resize:"resize",click:"click",dblclick:"dblclick",mousedown:"mousedown",mouseup:"mouseup",mouseover:"mouseover",mouseout:"mouseout",mousemove:"mousemove",zoom:"zoom",zoomstart:"zoom:start",zoomend:"zoom:end",move:"move",movestart:"move:start",moveend:"move:end"};var o=mapboxgl.version;if(o){var r=o.split("."),n=r[0],i=r[1];if(n=parseInt(n,10),i=parseInt(i,10),0===n&&i<50)throw new Error("AerisWeather SDK requires Mapbox GL JS version 0.50.0 or higher. You are using version "+o+".")}var a=this.opts.map;if(a){var s=a.center,c=a.zoom;if(s&&Object(h.isArray)(s)){var u=s[0],p=s[1];Object(h.isset)(p)&&Object(h.isset)(u)&&Object(h.set)(this.opts,"center",{lat:p,lon:u})}c&&Object(h.set)(this.opts,"zoom",c)}if(Object(g.isMapbox)(t))this._map=t,setTimeout((function(){e.trigger("map:ready")}),250);else{if(Object(h.isString)(t)&&(t=Object(j.a)(t)),Object(h.isArray)(t)&&t.length>0)t=t[0];else if(Object(h.isDOM)(t)){t=t[0]}mapboxgl.accessToken=this.opts.accessToken,this._map=new mapboxgl.Map(Object(h.extend)({},this.opts.map,{container:t,style:this.opts.style})),this._currentMapStyle=this.opts.style;var l=new mapboxgl.NavigationControl;this._map.addControl(l,"bottom-left"),Object(h.isset)(this.opts.center)||Object(h.set)(this.opts,"center",{lat:43,lon:-93}),Object(h.isset)(this.opts.zoom)||Object(h.set)(this.opts,"zoom",7),this.map.on("load",(function(){setTimeout((function(){e.trigger("map:ready")}),250)}))}},e.prototype.setStyle=function(t){if(t!==this._currentMapStyle){var e=this.map,o=e.getStyle(),r=o.layers.filter((function(t){return/^aeris-/.test(t.id)})),n=Object.keys(o.sources).filter((function(t){return/^aeris-/.test(t)})).reduce((function(t,e){return t[e]=o.sources[e],t}),{});e.on("style.load",(function(){Object.keys(n).forEach((function(t){e.getSource(t)||e.addSource(t,n[t])})),r.forEach((function(t){e.getLayer(t.id)||e.addLayer(t)}))})),e.setStyle(t,{diff:!0})}},e.prototype.setView=function(t,e){this.map.jumpTo({center:{lat:t.lat,lon:t.lon},zoom:Math.max(1,e-1)})},e.prototype.getCenter=function(){var t=this._map.getCenter();return{lat:t.lat,lon:t.lng}},e.prototype.setCenter=function(t){this._map.setCenter({lat:t.lat,lon:t.lon})},e.prototype.getZoom=function(){return this._map.getZoom()+1},e.prototype.setZoom=function(t){this._map.setZoom(Math.max(0,t-1))},e.prototype.getBounds=function(){var t=this.map.getBounds();return{north:t.getNorth(),west:t.getWest(),south:t.getSouth(),east:t.getEast()}},e.prototype.setBounds=function(t){var e=mapboxgl.LngLat(t.west,t.south),o=mapboxgl.LngLat(t.east,t.north);this.map.fitBounds(new mapboxgl.LngLatBounds(e,o))},e.prototype.fitBounds=function(t,e){void 0===e&&(e=[10,10]);var o=new mapboxgl.LngLat(t.west,t.south),r=new mapboxgl.LngLat(t.east,t.north),n=new mapboxgl.LngLatBounds(o,r);this.map.fitBounds(n,{padding:mapboxgl.Point(e[0],e[1])})},e.prototype.isTile=function(t){return t instanceof I},e.prototype.isMarker=function(t){return t instanceof mapboxgl.Marker},e.prototype.isPolygon=function(t){return t instanceof z},e.prototype.isPolyline=function(t){return t instanceof F},e.prototype.addSource=function(e){t.prototype.addSource.call(this,e),this.isTile(e)&&e.updateVisibility()},e.prototype.addOverlay=function(t){t instanceof P&&t.addTo(this.map)},e.prototype.removeOverlay=function(t){t instanceof P&&t.remove()},e.prototype.addMarker=function(e,o){var r=this;if(this.isMarker(e)){e.addTo(this.map);var n=e.getElement();n&&(e.__awxjs_clickHandler?n.removeEventListener("click",e.__awxjs_clickHandler):e.__awxjs_clickHandler=function(t){t.stopPropagation(),r.trigger("marker:click",{data:o,marker:e})},n.addEventListener("click",e.__awxjs_clickHandler))}else t.prototype.addMarker.call(this,e,o)},e.prototype.removeMarker=function(e){if(this.isMarker(e)){e.remove();var o=e.getElement();o&&e.__awxjs_clickHandler&&o.removeEventListener("click",e.__awxjs_clickHandler)}t.prototype.removeMarker.call(this,e)},e.prototype.updateMarker=function(e,o,r){void 0===r&&(r=null),o.data=o.data||{};var n=o.style,i=o.data.value;this._pointAnimationUpdates[r]||(this._pointAnimationUpdates[r]={});var a=this._pointAnimationUpdates[r];if(e instanceof mapboxgl.Marker&&Object(h.isset)(i)){var s=e.getLngLat(),c=s.lng,u=s.lat,p=u+","+c;a[p]||(a[p]={active:null});var l=a[p],f=l.active;if(f&&f.remove(),!l[i]){var d=this.factory.marker(null,{lat:u,lon:c},Object(h.isFunction)(n)?n({value:i}):n);l[i]=d,e.remove()}l[i].addTo(this.map),l.active=l[i]}t.prototype.updateMarker.call(this,e,o,r)},e.prototype.addShape=function(e,o){if(e instanceof z||e instanceof F)return e.addTo(this.map),void(this._shapeDataById[e.id]=o);t.prototype.addShape.call(this,e,o)},e.prototype.removeShape=function(e){e instanceof z||e instanceof F?e.remove():t.prototype.removeShape.call(this,e)},e.prototype.showShape=function(e){this.isPolygon(e)||this.isPolyline(e)?e.show():t.prototype.showShape.call(this,e)},e.prototype.hideShape=function(e){this.isPolygon(e)||this.isPolyline(e)?e.hide():t.prototype.hideShape.call(this,e)},e.prototype.coordToPoint=function(t){var e=this.map.project({lat:t.lat,lng:t.lon});return{x:e.x,y:e.y}},e.prototype.pointToCoord=function(t){var e=this.map.unproject([t.x,t.y]);return{lat:e.lat,lon:e.lng}},e.prototype.showCallout=function(t,e){var o=(new mapboxgl.Popup).setHTML(e);Object(g.isCoordObject)(t)?o.setLngLat({lat:t.lat,lng:t.lon}).addTo(this.map):this.isMarker(t)&&(t.setPopup(o),t.togglePopup())},e.prototype._setupEvents=function(){var e=this;this.map.on("moveend",(function(t){e.trigger("change:bounds"),e.trigger("change:center")})),this.map.on("zoomend",(function(t){e.trigger("change:zoom")})),this.map.on("click",(function(t){var o=e.map.queryRenderedFeatures(t.point);if(0!==o.length){var r=!1;o.forEach((function(t){var o=t.layer.id;if(!1===r&&/^aeris-layer-/.test(o)&&("fill"===t.layer.type||"line"===t.layer.type)){var n=o.replace(/^aeris-layer-/,""),i=e._shapeDataById[n];e.trigger("shape:click",{shape:t,data:i}),r=!0,e._clickedMapLayer=!0,setTimeout((function(){e._clickedMapLayer=!1}),100)}}))}})),t.prototype._setupEvents.call(this)},e.prototype._shouldTriggerEvent=function(t){return"click"!==t||!1===this._clickedMapLayer},e.prototype._dataForMapEvent=function(t,e){if(!e)return null;var o=null;switch(t){case"click":case"dblclick":o={coord:{lat:e.lngLat.lat,lon:e.lngLat.lng},point:{x:e.point.x,y:e.point.y}}}return o},e}(y),H=o(332),G=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),U=function(t){function e(e,o){void 0===o&&(o=void 0);var r=t.call(this)||this;return r._hidden=!1,r._idPrefix="aeris-layer",r.id=o||e,r}return G(e,t),Object.defineProperty(e.prototype,"layerId",{get:function(){var t=this.id?"-"+this.id:"";return""+this._idPrefix+t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){return this._map},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opacity",{get:function(){return this._opacity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHidden",{get:function(){return this._hidden},enumerable:!0,configurable:!0}),e.prototype.addTo=function(t,e){this.map!==t&&(this._map=t,this._targetIndex=e,this.layer?e>=0?t.getLayers().insertAt(e,this.layer):t.addLayer(this.layer):this.invalidate())},e.prototype.remove=function(){this.map&&(this.layer&&this.map.removeLayer(this.layer),this._map=null)},e.prototype.show=function(){this._hidden=!1,this.layer&&this.layer.setVisible(!0)},e.prototype.hide=function(){this._hidden=!0,this.layer&&this.layer.setVisible(!1)},e.prototype.setOpacity=function(t){this._opacity=t,this.layer&&this.layer.setOpacity(t)},e.prototype.setZIndex=function(t){this.layer&&this.layer.setZIndex(t)},e.prototype.exists=function(){this.map;return!1},e.prototype.invalidate=function(){throw new Error("Subclasses must override `invalidate`")},e}(a.a),q=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),$=function(t){function e(e,o,r){void 0===r&&(r=void 0);var n=t.call(this,e,r)||this;return n._opts={},n._loadCounter={loading:0,loaded:0},n._opts=Object(h.extend)({type:"tile"},o),n._type=n._opts.type,n}return q(e,t),e.prototype.setUrl=function(t){this._opts.url=t,this.map&&this.invalidate()},e.prototype.setBounds=function(t){this._opts.bounds=t},e.prototype.invalidate=function(){var t=this,e=this.map;this.remove(),this._source=new ol.source.XYZ({url:this._opts.url,attributions:this._opts.attribution?[this._opts.attribution]:null}),this.layer=new ol.layer.Tile({source:this._source}),this.layer.setOpacity(this.opacity),this._loadCounter={loading:0,loaded:0},this._source.on("tileloadstart",(function(e){t._loadCounter.loading+=1})),this._source.on(["tileloadend","tileloaderror"],(function(e){t._loadCounter.loaded+=1,t._loadCounter.loaded===t._loadCounter.loading&&t.trigger("load")})),e&&this.addTo(e,this._targetIndex)},e}(U),Z=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),W=function(t){function e(e,o,r){void 0===r&&(r=void 0);var n=t.call(this,e,r.id)||this;return n._opts={},n._polygons=o,r=r||{},Object.keys(r).forEach((function(t){var e=D.hyphenate(t);e!==t&&(r[e]=r[t],delete r[t])})),n._opts=r,n}return Z(e,t),e.prototype.addTo=function(e,o){t.prototype.addTo.call(this,e,o),this.layer||this.invalidate()},e.prototype.invalidate=function(){var t,e=this._polygons.length>1,o=(this._polygons||[]).map((function(e){!Object(h.isset)(t)&&Object(h.isset)(e.id)&&(t=e.id);var o=e.outer.map((function(t){return[t.lon,t.lat]})),r=e.inner?e.inner.map((function(t){return t.map((function(t){return[t.lon,t.lat]}))})):[];return[o].concat(r)}));this.source=new ol.source.Vector({features:(new ol.format.GeoJSON).readFeatures({type:"FeatureCollection",features:[{type:"Feature",properties:{id:t},geometry:{type:e?"MultiPolygon":"Polygon",coordinates:e?o:o[0]||[]}}]},{featureProjection:"EPSG:3857"})});var r=this._opts,n=r.stroke,i=r.fill;if(this.layer=new ol.layer.Vector({source:this.source,style:new ol.style.Style({stroke:n?new ol.style.Stroke(n):null,fill:i?new ol.style.Fill(i):null})}),this.map){var a=this.map;this.remove(),this.addTo(a,this._targetIndex)}},e}(U),Y=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),J=function(t){function e(e,o,r){void 0===r&&(r=void 0);var n=t.call(this,e,r.id)||this;return n._opts={},n._points=o,r=r||{},Object.keys(r).forEach((function(t){var e=D.hyphenate(t);e!==t&&(r[e]=r[t],delete r[t])})),n._opts=r,n}return Y(e,t),e.prototype.addTo=function(e,o){t.prototype.addTo.call(this,e,o),this.layer||this.invalidate()},e.prototype.invalidate=function(){this.source=new ol.source.Vector;var t=this._points.map((function(t){return ol.proj.transform([t.lon,t.lat],"EPSG:4326","EPSG:3857")})),e=new ol.Feature({properties:{id:this.id},geometry:new ol.geom.LineString(t)});this.source.addFeature(e);var o=this._opts.stroke;if(this.layer=new ol.layer.Vector({source:this.source,style:new ol.style.Style({stroke:o?new ol.style.Stroke(o):null})}),this.map){var r=this.map;this.remove(),this.addTo(r,this._targetIndex)}},e}(U),K=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),X=function(t){function e(e,o,r){var n=t.call(this)||this;return n.data=o,n._coord=e,n._feature=new ol.Feature({geometry:new ol.geom.Point(ol.proj.fromLonLat([e.lon,e.lat]))}),n._layer=new ol.layer.Vector({source:new ol.source.Vector({features:[n._feature]}),zIndex:r?r.zIndex:null}),n}return K(e,t),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this._coord},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"feature",{get:function(){return this._feature},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popup",{get:function(){return this._popup},enumerable:!0,configurable:!0}),e.prototype.setStyle=function(t){this.feature.setStyle(t)},e.prototype.setPopup=function(t){this._popup=t},e}(a.a),Q=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),tt=function(t){function e(e,o,r){var n=t.call(this,e,o,r)||this;return o.offset(0),n._overlay=new $(e,{type:"tile",attribution:n._opts.attribution},n.identifier),n.timestamp=n._opts.time,n.animation.provider=n,n}return Q(e,t),Object.defineProperty(e.prototype,"overlay",{get:function(){return this._overlay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{set:function(t){this.enabled&&Object(h.isset)(t)&&(t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()),this._timestamp&&t.getTime()===this._timestamp.getTime()||(this._timestamp=t,!1===this.isAnimating()&&(this.animation.hide(),this.updateVisibility()),this.overlay&&!1===this.overlay.isHidden&&this.canShow()&&this.overlay.setUrl(this.urlTemplate())))},enumerable:!0,configurable:!0}),e.prototype.show=function(){this._hidden=!1,this.overlay&&(this.setOpacity(this._opacity),this.overlay.show())},e.prototype.hide=function(){this._hidden=!0,this.overlay&&this.overlay.hide()},e.prototype.remove=function(){this.trigger("layer:remove",{layer:this.overlay})},e.prototype.setOpacity=function(t){this._opacity=t,this.overlay&&this.overlay.setOpacity(t)},e.prototype.setOrder=function(t){this.overlay&&this.overlay.setZIndex(t)},e.prototype.animationLayerForDate=function(t,e){var o=this;return new Promise((function(t,r){if(o.dataSource){var n=o.dataSource.tileLayer(o.key,e,Object(h.extend)(Object(h.cloneDeep)(o._opts),{id:o.identifier+"-anim-"+Object(g.mapTimestampFromDate)(e)}));n.overlay.on("load",(function(){t(n),n.hide(),n.setOpacity(o._opacity)})),n.on("layer:remove",(function(){o.trigger("layer:remove",{layer:n.overlay})})),o.trigger("layer:add",{layer:n.overlay,relativeTo:o.overlay.layer,offset:1}),n.setOpacity(0)}else r(new Error("No map strategy data source provided"))}))},e}(m.a),et=function(){function t(t){if(document){var e=Object(j.a)('<div class="aeris__openlayers__popup"></div>');this._container=e,this._overlay=new ol.Overlay({insertFirst:!0,element:e[0],autoPan:!0,autoPanAnimation:{duration:250}}),t&&this.setCoordinate(t)}}return t.prototype.addTo=function(t){this._map=t,t.addOverlay(this._overlay);var e=this._container.width();e>0&&this._container.css({marginLeft:"-"+Math.round(e/2)+"px"})},t.prototype.remove=function(){this._map&&this._map.removeOverlay(this._overlay)},t.prototype.setCoordinate=function(t){var e=ol.proj.fromLonLat([t.lon,t.lat]),o=e[0],r=e[1];this._overlay.setPosition([Math.round(o),Math.round(r)])},t.prototype.setHTML=function(t){this._container.html(t)},t.prototype.setDOMContent=function(t){this._container.empty().append(t)},t.injectStyles=function(){Object(j.a)("head").append("<style type=\"text/css\">\n\t\t\t.aeris__openlayers__popup {\n\t\t\t\tbackground: #fff;\n\t\t\t\tborder-radius: 6px;\n\t\t\t\tbottom: 100%;\n\t\t\t\tcolor: #222;\n\t\t\t\tdisplay: block;\n\t\t\t\tfilter: drop-shadow(0 1px 4px rgba(0,0,0,0.2));\n\t\t\t\tfont-family: 'Helvetica','Arial',sans-serif;\n\t\t\t\tfont-size: 13px;\n\t\t\t\tfont-weight: normal;\n\t\t\t\tleft: 50%;\n\t\t\t\tline-height: 14px;\n\t\t\t\tmargin-bottom: 15px;\n\t\t\t\tmargin-left: -100px;\n\t\t\t\tmin-width: 120px;\n\t\t\t\tpadding: 8px 10px;\n\t\t\t\tpointer-events: none;\n\t\t\t\tposition: absolute;\n\t\t\t\ttransition: opacity .2s ease-out;\n\t\t\t\tz-index: 10000;\n\t\t\t\t-webkit-font-smoothing: antialiased\n\t\t\t}\n\n\t\t\t.aeris__openlayers__popup:after {\n\t\t\t\tborder-left: solid transparent 10px;\n\t\t\t\tborder-right: solid transparent 10px;\n\t\t\t\tborder-top: solid #fff 10px;\n\t\t\t\tbottom: -10px;\n\t\t\t\tcontent: \" \";\n\t\t\t\theight: 0;\n\t\t\t\tleft: 50%;\n\t\t\t\tmargin-left: -9px;\n\t\t\t\tposition: absolute;\n\t\t\t\twidth: 0\n\t\t\t}\n\t\t</style>")},t}(),ot=o(93),rt=function(){function t(){}return t.prototype.tileLayer=function(t,e,o){return new tt(t,e,o)},t.prototype.marker=function(t,e,o){var r=new X(e,null,o);if(o){if(o.skip&&!0===o.skip)return null;var n=this.markerIcon(o);if(n&&r.setStyle(new ol.style.Style({image:n})),o.callout){var i=o.callout;if(Object(h.isFunction)(o.callout))i=(0,o.callout)();var a=new et(e);a.setHTML(i),r.setPopup(a)}}return r},t.prototype.markerIcon=function(t){var e;if(t.html&&console.warn("awxjs - HTML markers are not currently supported with OpenLayers"),t.svg){var o=t.size||[12,12],r=o[0],i=o[1];if(t.svg.text){var a=t.svg.text;if(Object(h.isArray)(a))a.forEach((function(t){var e;t.autosize&&(e=n.calculateTextSize(t.value,t.size),r=e[0],i=e[1])}));else{var s=a;s.autosize&&(e=n.calculateTextSize(s.value,s.size),r=e[0],i=e[1])}}i+=3;var c=n.draw(r,i,t.svg);return new ol.style.Icon({src:"data:image/svg+xml;base64,"+btoa(c),size:[r,i],imgSize:[r,i],crossOrigin:"anonymous"})}if(t.icon){var u=t.icon;return new ol.style.Icon({src:u.url,size:t.size,imgSize:t.size,anchor:u.anchor,crossOrigin:"anonymous"})}return null},t.prototype.polygon=function(t,e,o){var r;if(o){if((r={stroke:null,fill:null}).id=o.id,o.stroke){var n=Object(ot.toRGB)(o.stroke.color),i=n.r,a=n.g,s=n.b;r.stroke={color:"rgba("+i+", "+a+", "+s+", "+(o.stroke.opacity||1)+")",width:o.stroke.width,lineCap:o.stroke.lineCap,lineJoin:o.stroke.lineJoin,lineDash:o.stroke.dashArray,lineDashOffset:o.stroke.dashOffset}}if(o.fill){var c=Object(ot.toRGB)(o.fill.color);i=c.r,a=c.g,s=c.b;r.fill={color:"rgba("+i+", "+a+", "+s+", "+(o.fill.opacity||1)+")"}}}return e.forEach((function(t){r.id||(r.id=t.id)})),new W(t,e,r)},t.prototype.polyline=function(t,e,o){var r;if(o&&((r={stroke:null,fill:null}).id=o.id,o.stroke)){var n=Object(ot.toRGB)(o.stroke.color),i=n.r,a=n.g,s=n.b;r.stroke={color:"rgba("+i+", "+a+", "+s+", "+(o.stroke.opacity||1)+")",width:o.stroke.width,lineCap:o.stroke.lineCap,lineJoin:o.stroke.lineJoin,lineDash:o.stroke.dashArray,lineDashOffset:o.stroke.dashOffset}}return new J(t,e,r)},t}(),nt=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),it=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._hasLoaded=!1,e._clickedMapLayer=!1,e._shapeDataById={},e}return nt(e,t),Object.defineProperty(e.prototype,"$el",{get:function(){return Object(j.a)(this.map.getTarget())},enumerable:!0,configurable:!0}),e.prototype.loadDependencies=function(){return new Promise((function(t,e){if("undefined"==typeof ol||void 0===ol.Map){Promise.all([Object(h.loadStyles)("https://openlayers.org/en/v5.3.0/css/ol.css"),Object(h.loadScript)("https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/build/ol.js")]).then((function(){t()}))}else t()}))},e.prototype.setupMap=function(t){var e=this;this._factory=new rt,this._eventMapping={unload:"unload",resize:"resize",dblclick:"dblclick",mousedown:"mousedown",mouseup:"mouseup",mouseover:"mouseover",mouseout:"mouseout",mousemove:"mousemove",zoom:"zoom",zoomstart:"zoom:start",zoomend:"zoom:end",movestart:"move:start",moveend:"move:end",popupopen:"popupopen",popupclose:"popupclose"},et.injectStyles();var o=Object(h.get)(this.opts,"map.view");if(o&&o instanceof ol.View){var r=ol.proj.toLonLat(o.getCenter()),n=r[0],i=r[1];Object(h.isset)(i)&&Object(h.isset)(n)&&Object(h.set)(this.opts,"center",{lat:i,lon:n}),Object(h.set)(this.opts,"zoom",o.getZoom())}if(Object(g.isOpenLayers)(t))this._map=t;else{if(Object(h.isString)(t)&&(t=Object(j.a)(t)),Object(h.isArray)(t)&&t.length>0)t=t[0];else if(Object(h.isDOM)(t)){t=t[0]}this._map=new ol.Map(Object(h.extend)({},this.opts.map,{target:t,layers:[new ol.layer.Tile({source:new ol.source.OSM})]})),Object(j.a)("head").append("<style>.ol-zoom { top: auto; bottom: .5em; }</style>"),Object(h.isset)(this.opts.center)||Object(h.set)(this.opts,"center",{lat:43,lon:-93}),Object(h.isset)(this.opts.zoom)||Object(h.set)(this.opts,"zoom",7)}setTimeout((function(){e.trigger("map:ready")}),250)},e.prototype.setView=function(t,e){this.map.setView(new ol.View({center:ol.proj.fromLonLat([t.lon,t.lat]),zoom:e}))},e.prototype.getCenter=function(){var t=ol.proj.toLonLat(this.map.getView().getCenter()),e=t[0];return{lat:t[1],lon:e}},e.prototype.setCenter=function(t){this.map.getView().setCenter(ol.proj.fromLonLat([t.lon,t.lat]))},e.prototype.getZoom=function(){return this.map.getView().getZoom()},e.prototype.setZoom=function(t){this.map.getView().setZoom(t)},e.prototype.getBounds=function(){var t=this.map.getView().calculateExtent(this.map.getSize()),e=ol.proj.transformExtent(t,"EPSG:3857","EPSG:4326"),o=e[0],r=e[1],n=e[2];return{north:e[3],west:o,south:r,east:n}},e.prototype.setBounds=function(t){var e=ol.proj.fromLonLat([t.west,t.south]),o=e[0],r=e[1],n=ol.proj.fromLonLat([t.east,t.north]),i=[o,r,n[0],n[1]];this.map.getView().fit(i)},e.prototype.fitBounds=function(t,e){void 0===e&&(e=[10,10]),this.setBounds(t)},e.prototype.isTile=function(t){return t instanceof tt},e.prototype.isMarker=function(t){return t instanceof X},e.prototype.isPolygon=function(t){return t instanceof W},e.prototype.isPolyline=function(t){return t instanceof J},e.prototype.addOverlay=function(t,e){t instanceof $?t.addTo(this.map,e):(t instanceof ol.layer.Base||t instanceof ol.layer.Tile)&&(e?this.map.getLayers().insertAt(e,t):this.map.addLayer(t))},e.prototype.removeOverlay=function(t){t instanceof $?t.remove():(t instanceof ol.layer.Base||t instanceof ol.layer.Tile)&&this.map.removeLayer(t)},e.prototype.addMarker=function(e,o){var r,n=this;if(this.isMarker(e)&&(r=e.popup,e=e.layer),e instanceof ol.layer.Vector){if(!this.containsLayer(e)){this.map.addLayer(e);var i=e;i.__awxjs_clickHandler?i.un("click",i.__awxjs_clickHandler):i.__awxjs_clickHandler=function(t){n.trigger("marker:click",{data:o,marker:e}),r&&(n._activePopup&&n._activePopup.remove(),r.addTo(n.map),n._activePopup=r)},e.on("marker:click",i.__awxjs_clickHandler)}}else t.prototype.addMarker.call(this,e,o)},e.prototype.removeMarker=function(e){if(this.isMarker(e)&&(e=e.layer),e instanceof ol.layer.Vector){var o=e;o.__awxjs_clickHandler&&o.un("click",o.__awxjs_clickHandler),this.map.removeLayer(e)}t.prototype.removeMarker.call(this,e)},e.prototype.updateMarker=function(e,o,r){if(void 0===r&&(r=null),o){if(this.isMarker(e)){var n=Object(h.get)(o,"data.value"),i=Object(h.get)(o,"style")||{};Object(h.isFunction)(i)&&(i=i({value:n}));var a=this.factory.markerIcon(i);a&&e.setStyle(new ol.style.Style({image:a}))}t.prototype.updateMarker.call(this,e,o,r)}},e.prototype.showMarkers=function(t,e){var o=this;t.forEach((function(t){o.isMarker(t)&&(t=t.layer),t instanceof ol.layer.Vector&&t.setVisible(e)}))},e.prototype.addShape=function(e,o){if(this.isPolygon(e)||this.isPolyline(e)){if(!this.containsLayer(e.layer)){var r=this.getIndexBoundForGeom("point",!0);e.addTo(this.map,r),this._shapeDataById[e.id]=o}}else t.prototype.addShape.call(this,e,o)},e.prototype.removeShape=function(e){if(this.isPolygon(e)||this.isPolyline(e))return e.off("click"),void e.remove();t.prototype.removeShape.call(this,e)},e.prototype.showShape=function(t){this.addShape(t)},e.prototype.hideShape=function(t){this.removeShape(t)},e.prototype.containsLayer=function(t){return-1!==this.map.getLayers().getArray().indexOf(t)},e.prototype.coordToPoint=function(t){var e=this.map.getPixelFromCoordinate(ol.proj.fromLonLat([t.lon,t.lat]));return e?{x:e[0],y:e[1]}:null},e.prototype.pointToCoord=function(t){var e=this.map.getCoordinateFromPixel(ol.proj.toLonLat([t.x,t.y]));if(e){var o=e[0];return{lat:e[1],lon:o}}return null},e.prototype.getInsertIndex=function(t,e){var o=this.map.getLayers().getArray(),r=o.indexOf(t);return-1!==r?Math.max(0,r+e):o.length},e.prototype.getIndexBoundForGeom=function(t,e){void 0===e&&(e=!1);var o=0;return this.map.getLayers().getArray().forEach((function(r,n){if(r instanceof ol.layer.Vector){var i=r.getSource().getFeatures();if(i&&i.length>0)i[0].getGeometry().getType().toLowerCase()===t.toLowerCase()&&(o=e?Math.min(o,n):Math.max(o,n))}})),Math.max(1,o)},e.prototype.showCallout=function(t,e){var o=new et;if(o.setHTML(e),Object(g.isCoordObject)(t))o.setCoordinate(t);else if(this.isMarker(t))o.setCoordinate(t.coordinate);else if(t instanceof ol.Feature){var r=t.getGeometry();if(r instanceof ol.geom.Point){var n=r.getCoordinates(),i=n[0],a=n[1];o.setCoordinate({lat:a,lon:i})}}this._activePopup&&this._activePopup.remove(),this._activePopup=o,o.addTo(this.map)},e.prototype._setupEvents=function(){var e=this;t.prototype._setupEvents.call(this),this.map.on("rendercomplete",(function(){!1===e._hasLoaded&&(e._hasLoaded=!0,e.trigger("load"))})),this.map.on("click",(function(t){var o=!1,r=!1;e.map.forEachFeatureAtPixel(t.pixel,(function(t,n){if(!r){var i=t.getGeometry(),a=t.getProperties(),s=(Object(h.get)(a,"id")||Object(h.get)(a,"properties.id")||"").replace(/^aeris-layer-/,"");if(i instanceof ol.geom.Point)o=!0,n.dispatchEvent(new H.a("marker:click")),r=!0;else if(i instanceof ol.geom.SimpleGeometry){var c=e._shapeDataById[s];e.trigger("shape:click",{shape:t,data:c}),r=!0}}}),{hitTolerance:10}),r?(e._clickedMapLayer=!0,setTimeout((function(){e._clickedMapLayer=!1}),100)):e.trigger("click",e._dataForMapEvent("click",t)),!o&&e._activePopup&&e._activePopup.remove()})),this.map.on("moveend",(function(t){e.trigger("change:bounds"),e.trigger("change:center")})),this.map.on("zoomend",(function(t){e.trigger("change:zoom")}))},e.prototype._shouldTriggerEvent=function(t){return"click"!==t||!1===this._clickedMapLayer},e.prototype._dataForMapEvent=function(t,e){if(!e)return null;var o,r=null;switch(t){case"click":case"dblclick":r={coord:{lat:(o=ol.proj.toLonLat(e.coordinate))[1],lon:o[0]},point:{x:e.pixel[0],y:e.pixel[1]}}}return r},e}(y),at=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),st=function(t){function e(e,o){void 0===o&&(o=void 0);var r=t.call(this)||this;return r._hidden=!1,r.id="aeris-layer-"+(o||e),r}return at(e,t),Object.defineProperty(e.prototype,"map",{get:function(){return this._map},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHidden",{get:function(){return this._hidden},enumerable:!0,configurable:!0}),e.prototype.addTo=function(t,e){this.map!==t&&(this._map=t,this._targetIndex=e)},e.prototype.remove=function(){this.map&&(this._map=null)},e.prototype.show=function(){this._hidden=!1},e.prototype.hide=function(){this._hidden=!0},e.prototype.setOpacity=function(t){throw new Error("Subclasses of GoogleLayer should override setOpacity()")},e.prototype.setZIndex=function(t){throw new Error("Subclasses of GoogleLayer should override setZIndex()")},e.prototype.exists=function(){this.map;return!1},e.prototype.invalidate=function(){throw new Error("Subclasses must override `invalidate`")},e}(a.a),ct=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),ut=function(t){function e(e,o){void 0===o&&(o=void 0);var r=t.call(this,e,o)||this;return r._opts={},r._opts.opacity=1,r._layer=new google.maps.ImageMapType({tileSize:new google.maps.Size(256,256),getTileUrl:function(t,e){var o=r._opts.url;if(!Object(h.isset)(o))return null;var n={x:t.x,y:t.y,z:e};return Object.keys(n).forEach((function(t){o=o.replace(new RegExp("{"+t+"}"),""+n[t])})),o}}),r._layer.addListener("tilesloaded",(function(){r.trigger("load",{overlay:r._layer})})),r}return ct(e,t),Object.defineProperty(e.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0}),e.prototype.setUrl=function(t){this._opts.url=t,this.map&&this.invalidate()},e.prototype.addTo=function(e,o){t.prototype.addTo.call(this,e),this.map.overlayMapTypes.push(this.layer)},e.prototype.remove=function(){if(this.map){var e=this.map.overlayMapTypes.getArray().indexOf(this.layer);-1!==e&&this.map.overlayMapTypes.removeAt(e)}t.prototype.remove.call(this)},e.prototype.show=function(){t.prototype.show.call(this),this.layer&&this.layer.setOpacity(this._opts.opacity)},e.prototype.hide=function(){t.prototype.hide.call(this),this.layer&&this.layer.setOpacity(0)},e.prototype.setOpacity=function(t){this._opts.opacity=t,this.layer&&this.layer.setOpacity(t)},e.prototype.setZIndex=function(t){console.warn("[Aeris] - Google Maps does not currently support changing the zIndex for an existing tile layer")},e.prototype.invalidate=function(){var t=this,e=this.map;this.remove(),setTimeout((function(){t.enabled&&t.addTo(e)}),200)},e}(st),pt=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),lt=function(t){function e(e,o,r){var n=t.call(this,e,o,r)||this;return o.offset(0),n._overlay=new ut(e,n.identifier),n.timestamp=n._opts.time,n.animation.provider=n,n.animation.on("reset",(function(){n._loadingSource&&n.trigger("layer:remove",{layer:n._loadingSource.overlay})})),n}return pt(e,t),Object.defineProperty(e.prototype,"overlay",{get:function(){return this._overlay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{set:function(t){this.enabled&&Object(h.isset)(t)&&(t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()),this._timestamp&&t.getTime()===this._timestamp.getTime()||(this._timestamp=t,!1===this.isAnimating()&&(this.animation.hide(),this.updateVisibility()),this.overlay&&!1===this.overlay.isHidden&&this.canShow()&&this.overlay.setUrl(this.urlTemplate())))},enumerable:!0,configurable:!0}),e.prototype.show=function(){this._hidden=!1,this.overlay&&this.overlay.setOpacity(this._opacity)},e.prototype.hide=function(){this._hidden=!0,this.overlay&&this.overlay.setOpacity(0)},e.prototype.remove=function(){this.trigger("layer:remove",{layer:this.overlay})},e.prototype.setOpacity=function(t){this._opacity=t,this.overlay&&this.overlay.setOpacity(t)},e.prototype.setOrder=function(t){console.warn("[Aeris] - Google Maps does not currently support changing the zIndex for an existing tile layer"),this.node&&this.node instanceof HTMLElement&&(this.node.style.zIndex=t.toString())},e.prototype.animationLayerForDate=function(t,e){var o=this;return new Promise((function(t,r){if(o.dataSource){var n=o.dataSource.tileLayer(o.key,e,Object(h.extend)({},o._opts,{id:o.identifier+"-anim-"+Object(g.mapTimestampFromDate)(e)}));n.setOpacity(o._opacity),n.hide(),o._loadingSource=n,n.overlay.on("load",(function(){o._loadingSource=null,t(n)})),n.on("layer:remove",(function(){o.trigger("layer:remove",{layer:n.overlay})})),o.trigger("layer:add",{layer:n.overlay})}else r(new Error("No map strategy data source provided"))}))},e}(m.a),ht=function(){function t(){}return t.prototype.tileLayer=function(t,e,o){return new lt(t,e,o)},t.prototype.marker=function(t,e,o){var r={};if(o){if(o.skip&&!0===o.skip)return null;r=this.markerIcon(o),o.zIndex&&(r.zIndex=o.zIndex)}var n=new google.maps.Marker(Object(h.extend)({position:new google.maps.LatLng(e.lat,e.lon),optimized:!1},r));if(o&&o.callout){o.callout;if(Object(h.isFunction)(o.callout))(0,o.callout)()}return n},t.prototype.markerIcon=function(t){var e;if(t.html&&console.warn("awxjs - HTML markers are not currently supported with Google Maps"),t.svg){var o=t.size||[12,12],r=o[0],i=o[1];if(t.svg.text){var a=t.svg.text;if(Object(h.isArray)(a))a.forEach((function(t){var e;t.autosize&&(e=n.calculateTextSize(t.value,t.size),r=e[0],i=e[1])}));else{var s=a;s.autosize&&(e=n.calculateTextSize(s.value,s.size),r=e[0],i=e[1])}}i+=3;var c=n.draw(r,i,t.svg);return{icon:{url:"data:image/svg+xml;base64,"+btoa(c),size:new google.maps.Size(r,i),scaledSize:new google.maps.Size(r,i),anchor:new google.maps.Point(r/2,i/2)}}}if(t.icon){var u=t.icon,p={icon:{url:u.url,size:new google.maps.Size(t.size[0],t.size[1]),scaledSize:new google.maps.Size(t.size[0],t.size[1])}};return u.anchor&&2===u.anchor.length&&(p.icon.anchor=new google.maps.Point(u.anchor[0],u.anchor[1])),p}return null},t.prototype.polygon=function(t,e,o){var r;o&&(r={stroke:!1,fill:!1},o.stroke?(r.strokeColor=o.stroke.color,r.strokeOpacity=o.stroke.opacity,r.strokeWeight=o.stroke.width):r.strokeOpacity=0,o.fill?(r.fillColor=o.fill.color,r.fillOpacity=o.fill.opacity):r.fillOpacity=0);var n=[];return e.forEach((function(t){var e=t.outer.map((function(t){return{lat:t.lat,lng:t.lon}})),o=t.inner.map((function(t){return t.map((function(t){return{lat:t.lat,lng:t.lon}}))}));r.paths=[e].concat(o);var i=new google.maps.Polygon(r);n.push(i)})),n},t.prototype.polyline=function(t,e,o){var r;return o&&(r={stroke:!1,fill:!1},o.stroke?(r.strokeColor=o.stroke.color,r.strokeOpacity=o.stroke.opacity,r.strokeWeight=o.stroke.width):r.strokeOpacity=0),new google.maps.Polyline(Object(h.extend)({},r,{path:e.map((function(t){return new google.maps.LatLng(t.lat,t.lon)}))}))},t}(),ft=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),dt=function(t){function e(e,o){var r=t.call(this,e,Object(h.extend)({accessToken:null},o))||this;return r.addAttributions=Object(h.debounce)((function(t){if(!(Object(j.a)("#awxjs-attribution").length>0)){var e=Object(j.a)('<div id="awxjs-attribution"></div>');r.map.controls[google.maps.ControlPosition.BOTTOM_LEFT].push(e[0]);var o=t.join(" | "),n={"background-color":"rgba(255,255,255,0.6)","font-size":"10px",padding:"2px 4px 0","white-space":"nowrap"};e.html('<span style="'+Object.keys(n).map((function(t){return t+": "+n[t]+";"})).join(" ")+'">'+o+"</span>")}}),500),r}return ft(e,t),Object.defineProperty(e.prototype,"$el",{get:function(){return Object(j.a)(this.map.getDiv())},enumerable:!0,configurable:!0}),e.prototype.loadDependencies=function(){var t=this;return new Promise((function(e,o){if("undefined"==typeof google||void 0===google.maps){Promise.all([Object(h.loadScript)("https://maps.googleapis.com/maps/api/js?key="+t.opts.accessToken)]).then((function(){e()}))}else e()}))},e.prototype.setupMap=function(t){var e=this;this._factory=new ht,this._callout=new google.maps.InfoWindow,this._eventMapping={click:"click",dblclick:"dblclick",mouseover:"mouseover",mouseout:"mouseout",mousemove:"mousemove",zoom_changed:"zoom",drag:"move",dragstart:"move:start",dragend:"move:end"};var o=this.opts.map;if(o){var r=o.center,n=o.zoom;Object(h.isPlainObject)(r)&&Object(h.isset)(r.lat)&&Object(h.isset)(r.lng)&&Object(h.set)(this.opts,"center",{lat:r.lat,lon:r.lng}),n&&Object(h.set)(this.opts,"zoom",n)}if(Object(g.isGoogle)(t))this._map=t;else{if(Object(h.isString)(t)&&(t=Object(j.a)(t)),Object(h.isArray)(t)&&t.length>0)t=t[0];else if(Object(h.isDOM)(t)){t=t[0]}this._map=new google.maps.Map(t,Object(h.extend)({disableDefaultUI:!0,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM}},this.opts.map)),Object(h.isset)(this.opts.center)||Object(h.set)(this.opts,"center",{lat:43,lon:-93}),Object(h.isset)(this.opts.zoom)||Object(h.set)(this.opts,"zoom",7)}setTimeout((function(){e.trigger("map:ready")}),250)},e.prototype.setView=function(t,e){this.map.setOptions({center:{lat:t.lat,lng:t.lon},zoom:e})},e.prototype.getCenter=function(){var t=this.map.getCenter();return{lat:t.lat(),lon:t.lng()}},e.prototype.setCenter=function(t){this.map.setCenter({lat:t.lat,lng:t.lon})},e.prototype.getZoom=function(){return this.map.getZoom()},e.prototype.setZoom=function(t){this.map.setZoom(t)},e.prototype.getBounds=function(){var t=this.map.getBounds();if(t){var e=t.getNorthEast(),o=t.getSouthWest();return{north:e.lat(),west:o.lng(),south:o.lat(),east:e.lng()}}return null},e.prototype.setBounds=function(t){var e=new google.maps.LatLng(t.south,t.west),o=new google.maps.LatLng(t.north,t.east);this.map.fitBounds(new google.maps.LatLngBounds(e,o),0)},e.prototype.fitBounds=function(t,e){void 0===e&&(e=[10,10]);var o=new google.maps.LatLng(t.south,t.west),r=new google.maps.LatLng(t.north,t.east),n=new google.maps.LatLngBounds(o,r);this.map.fitBounds(n,{top:e[1],right:e[0],bottom:e[1],left:e[0]})},e.prototype.removeAttributions=function(){Object(j.a)("#awxjs-attribution").remove()},e.prototype.isTile=function(t){return t instanceof lt},e.prototype.isMarker=function(t){return t instanceof google.maps.Marker},e.prototype.isPolygon=function(t){return t instanceof google.maps.Polygon},e.prototype.isPolyline=function(t){return t instanceof google.maps.Polyline},e.prototype.addSource=function(e){t.prototype.addSource.call(this,e),this.opts.attribution&&this.addAttributions([u])},e.prototype.removeSource=function(e){t.prototype.removeSource.call(this,e),0===this.sources.length&&this.removeAttributions()},e.prototype.addOverlay=function(t){t instanceof ut?(t.enabled=!0,t.addTo(this.map)):t instanceof google.maps.ImageMapType?this.map.overlayMapTypes.push(t):t instanceof google.maps.GroundOverlay&&t.setMap(this.map)},e.prototype.removeOverlay=function(t){if(t instanceof ut)t.enabled=!1,t.remove();else if(t instanceof google.maps.ImageMapType){var e=this.map.overlayMapTypes.getArray().indexOf(t);-1!==e&&this.map.overlayMapTypes.removeAt(e)}else t instanceof google.maps.GroundOverlay&&t.setMap(null)},e.prototype.addMarker=function(e,o){var r=this;this.isMarker(e)&&(e.setMap(this.map),e.__awxjs_clickHandler&&e.__awxjs_clickHandler.remove(),e.__awxjs_clickHandler=e.addListener("click",(function(){return r.trigger("marker:click",{data:o,marker:e})}))),t.prototype.addMarker.call(this,e,o)},e.prototype.removeMarker=function(e){this.isMarker(e)&&(e.__awxjs_clickHandler&&e.__awxjs_clickHandler.remove(),e.setMap(null)),t.prototype.removeMarker.call(this,e)},e.prototype.updateMarker=function(t,e,o){if(void 0===o&&(o=null),e&&this.isMarker(t)){var r=Object(h.get)(e,"data.value"),n=Object(h.get)(e,"style")||{};Object(h.isFunction)(n)&&(n=n({value:r}));var i=this.factory.markerIcon(n);i&&i.icon&&t.setIcon(i.icon)}},e.prototype.bindCalloutToMarker=function(t,e){var o=this;this.isMarker(t)&&t.addListener("click",(function(){o._callout.setContent(e),o._callout.open(o.map,t)}))},e.prototype.addShape=function(e,o){var r=this;if(this.isPolygon(e)||this.isPolyline(e))return e.setMap(this.map),void e.addListener("click",(function(){return r.trigger("shape:click",{data:o,shape:e})}));t.prototype.addShape.call(this,e,o)},e.prototype.removeShape=function(e){this.isPolygon(e)||this.isPolyline(e)?e.setMap(null):t.prototype.removeShape.call(this,e)},e.prototype.showShape=function(t){this.addShape(t)},e.prototype.hideShape=function(t){this.removeShape(t)},e.prototype.coordToPoint=function(t){var e=this.map.getProjection(),o=this.map.getBounds(),r=e.fromLatLngToPoint(o.getNorthEast()),n=e.fromLatLngToPoint(o.getSouthWest()),i=Math.pow(this.map.getZoom(),2),a=e.fromLatLngToPoint(new google.maps.LatLng(t.lat,t.lon));return{x:(a.x-n.x)*i,y:(a.y-r.y)*i}},e.prototype.pointToCoord=function(t){var e=this.map.getProjection(),o=this.map.getBounds(),r=e.fromLatLngToPoint(o.getNorthEast()),n=e.fromLatLngToPoint(o.getSouthWest()),i=Math.pow(this.map.getZoom(),2),a=e.fromPointToLatLng(new google.maps.Point(t.x/i*n.x,t.y/i+r.y));return{lat:a.lat(),lon:a.lng()}},e.prototype.showCallout=function(t,e){if(Object(g.isCoordObject)(t))new google.maps.InfoWindow({position:new google.maps.LatLng(t.lat,t.lon),content:e}).open(this.map);else if(this.isMarker(t)){new google.maps.InfoWindow({content:e}).open(this.map,t)}},e.prototype._setupEvents=function(){var e=this;t.prototype._setupEvents.call(this);var o=function(){e.trigger("change:bounds"),e.trigger("change:center")};this.map.addListener("dragend",(function(t){o()})),this.map.addListener("zoom_changed",(function(t){o(),e.trigger("change:zoom")}))},e.prototype._dataForMapEvent=function(t,e){if(!e)return null;var o=e.pixel||{x:void 0,y:void 0},r=null;switch(t){case"click":case"dblclick":r={coord:{lat:e.latLng.lat(),lon:e.latLng.lng()},point:{x:o.x,y:o.y}}}return r},e}(y),yt=function(t){switch(t=t.toLowerCase().replace(/\s/,"-")){case"good":return"#29e11f";case"moderate":return"#f8f92a";case"usg":return"#f9681b";case"unhealthy":return"#f60115";case"very-unhealthy":return"#7a2c83";case"hazardous":return"#65001b";default:return"#000000"}},mt={data:{request:{endpoint:"airquality"},properties:{id:"id",timestamp:"timestamp"}},style:{marker:function(t){var e=Object(h.get)(t,"periods.0");if(!e)return null;var o=Object(h.get)(e,"category");if(!o)return null;var r=function(t){switch(t=t.toLowerCase().replace(/\s/,"-")){case"moderate":return 12;case"usg":return 14;case"unhealthy":return 18;case"very-unhealthy":return 20;case"hazardous":return 24;default:return 10}}(o);return{className:"marker-airquality",svg:{shape:{type:"circle",fill:{color:yt(o)},stroke:{color:"#ffffff",width:2}}},size:[r,r]}}}},gt={default:"#000000",general:"#b3e6b1",marginal:"#6cbd69",slight:"#f4f964",enhanced:"#e0b767",moderate:"#e0686a",high:"#fe59ff"},vt={data:{request:{endpoint:"convective/outlook",action:s.a.SEARCH,parameters:{filter:"geo"}},properties:{id:"id",category:"details.risk.type",timestamp:{from:"details.range.minTimestamp",to:"details.range.maxTimestamp"},path:"geoPoly"}},style:{polygon:function(t){var e=Object(h.get)(t,"details.risk.type");return{fill:{color:gt[e]||gt.default,opacity:.7}}}}},_t=function(t){switch(t=t.toLowerCase()){case"d0":return"#ffff00";case"d1":return"#fccc66";case"d2":return"#ff9b00";case"d3":return"#e10000";case"d4":return"#600000";default:return"#000000"}},bt={data:{request:{endpoint:"droughts/monitor",action:s.a.SEARCH,parameters:{filter:"geo"}},properties:{id:"id",category:"details.category",timestamp:{from:"details.range.minTimestamp",to:"details.range.maxTimestamp"},path:"geoPoly"}},style:{polygon:function(t){var e=Object(h.get)(t,"details.category");return{fill:{color:_t(e),opacity:.7}}}}},Ot=function(t){switch(t=t.toLowerCase().replace(/\s/,"-")){case"mini":return"#6fb314";case"minor":return"#dfcb01";case"light":return"#ce8f00";case"moderate":return"#ff5d01";case"strong":return"#e90004";case"major":return"#ce0052";case"great":return"#b90285";case"catastrophic":return"#f500ff";default:return"#000000"}},wt={data:{request:{endpoint:"earthquakes"},properties:{id:"report.id",timestamp:"report.timestamp"}},style:{marker:function(t){var e=Object(h.get)(t,"report.type");Object(h.get)(t,"report.mag")>=9&&(e="catastrophic");var o=function(t){switch(t=t.toLowerCase().replace(/\s/,"-")){case"minor":return 18;case"light":return 20;case"moderate":return 22;case"strong":return 26;case"major":return 30;case"great":return 36;case"catastrophic":return 42;default:return 16}}(e);return{className:"marker-earthquake",svg:{shape:{type:"circle",fill:{color:Ot(e)},stroke:{color:"#ffffff",width:2}}},size:[o,o]}}}},jt={data:{request:{endpoint:"fires"},properties:{id:"report.id",timestamp:"report.timestamp"}},style:{marker:function(t){return{className:"marker-earthquake",svg:{shape:{type:"circle",fill:{color:"#ff0000"},stroke:{color:"#ffffff",width:2}}},size:[12,12]}}}},kt=function(t){switch(t=t.toLowerCase()){case"elevated":return"#ffb367";case"critical":return"#ff666a";case"extreme":return"#fe59ff";default:return"#000000"}},Et={data:{request:{endpoint:"fires/outlook",action:s.a.SEARCH,parameters:{filter:"geo"}},properties:{id:"id",path:"geoPoly",category:"details.risk.type",timestamp:{from:"details.range.minTimestamp",to:"details.range.maxTimestamp"}}},style:{polygon:function(t){var e=Object(h.get)(t,"details.risk.type");return{fill:{color:kt(e),opacity:.7}}}}},Tt=function(t){return t<1?"#f5f5f5":t<5?"#dddddd":t<10?"#bbbbbb":t<15?"#888888":"#545454"},xt={data:{request:{endpoint:"lightning"},properties:{id:"id",timestamp:"ob.timestamp"}},style:{marker:function(t){var e=Object(h.get)(t,"ob.timestamp");if(!e)return null;var o=((new Date).getTime()-1e3*e)/6e4;return{className:"marker-record",svg:{shape:{type:"circle",fill:{color:Tt(o)},stroke:{color:"#ffffff",width:2}}},size:[14,14]}}}},Pt=function(t){switch(t=t.toLowerCase().replace(/\s/,"-")){case"prcp":return"#2ef000";case"snow":return"#004fff";case"hsnd":return"#e402a4";case"maxt":return"#ff4b00";case"mint":return"#8700ff";case"himn":return"#eef500";case"lomx":return"#37b9f8";default:return"#000000"}},Mt={data:{request:{endpoint:"records"},properties:{id:"id",timestamp:"report.timestamp"}},style:{marker:function(t){var e=Object(h.get)(t,"report.type");return{className:"marker-record",svg:{shape:{type:"circle",fill:{color:Pt(e)},stroke:{color:"#ffffff",width:2}}},size:[14,14]}}}},Lt=function(t){switch(t=t.toLowerCase().replace(/\s/,"-")){case"out_of_service":return"#535353";case"obs_not_current":return"#afb6ad";case"not_defined":return"#5f9de6";case"low_threshold":return"#7e5012";case"no_flooding":return"#0cff01";case"action":return"#ffff02";case"minor":return"#ff8700";case"moderate":return"#ff0000";case"major":return"#c000ff";default:return"#000000"}},St={data:{request:{endpoint:"rivers"},properties:{id:"id",timestamp:"ob.timestamp"}},style:{marker:function(t){var e=Object(h.get)(t,"ob.status");return{className:"marker-river",svg:{shape:{type:"circle",fill:{color:Lt(e)},stroke:{color:"#ffffff",width:2}}},size:[14,14]}}}},At=function(t){switch(t=t.toLowerCase()){case"general":return"#2ED300";case"hail":return"#EBE100";case"rotating":return"#F17200";case"tornado":return"#FF2600";default:return"#000000"}},It={data:{request:{endpoint:"stormcells"},properties:{id:"id",path:"forecast.cone.wide",category:"traits.type",timestamp:"ob.timestamp"},reversedCoord:!0},style:{marker:function(t){var e=Object(h.get)(t,"traits.type");return{className:"marker-stormcell",svg:{shape:{type:"circle",fill:{color:At(e)},stroke:{color:"#ffffff",width:2}}},size:[12,12]}},polygon:function(t){var e=Object(h.get)(t,"traits.type");return{fill:{color:At(e),opacity:.5}}}}},Dt=function(t){switch(t=t.toLowerCase()){case"avalanche":return"#639fec";case"blizzard":return"#4100e2";case"flood":return"#117d00";case"fog":return"#767676";case"ice":return"#e100e2";case"hail":return"#62def7";case"lightning":return"#8c8c8c";case"rain":return"#38e600";case"snow":return"#175cef";case"tides":return"#40db83";case"tornado":return"#c50000";case"wind":return"#d8cc00";default:return"#000000"}},Ct={data:{request:{endpoint:"stormreports"},properties:{id:"id",timestamp:"report.timestamp"}},style:{marker:function(t){var e=Object(h.get)(t,"report.cat");return{className:"marker-stormreport",svg:{shape:{type:"circle",fill:{color:Dt(e)},stroke:{color:"#ffffff",width:2}}},size:[14,14]}}}},zt={style:{marker:function(t){return{className:"marker-text",svg:{text:{value:t.value||"",x:25,y:Math.round(16-(16-14*.7)/2),size:14,style:"bold",color:"rgb(0,0,0)",autosize:!0}},spacing:20}}}},Bt=o(327),Ft=function(){function t(t){this._configs={"air-quality":mt,convective:vt,"drought-monitor":bt,earthquakes:wt,fires:jt,"fire-outlook":Et,"lightning-strikes":xt,records:Mt,"river-observations":St,stormcells:It,stormreports:Ct,text:zt},t&&this.setStyles(t)}return t.prototype.getConfig=function(t){return this._configs[t]},t.prototype.setConfig=function(t,e){this._configs[t]=e},t.prototype.setStyle=function(t,e){var o=this.getConfig(t)||{};if(Object(Bt.c)(t)){var r=void 0;r=e.raster?e.raster:e,o.style=Object(h.extend)(o.style,r)}else if(Object(Bt.d)(t)||Object(Bt.b)(t)){var n=void 0,i=void 0,a=void 0,s=Object(h.isset)(e.marker)||Object(h.isset)(e.polygon)||Object(h.isset)(e.polyline);e.marker?n=e.marker:!1===s&&(n=e),e.polygon?i=e.polygon:!1===s&&(i=e),e.polyline?a=e.polyline:!1===s&&(a=e),o.style=Object(h.extend)(o.style,{marker:n,polygon:i,polyline:a})}this._configs[t]=Object(h.cloneDeep)(o)},t.prototype.setStyles=function(t){var e=this;Object.keys(t).forEach((function(o){return e.setStyle(o,t[o])}))},t.prototype.getStyle=function(t,e){var o=this.getConfig(t);if(o){var r=o.style;return r[e]?r[e]:r}},t.prototype.setTextStyle=function(t){this.setStyle("text",{marker:t})},t.prototype.getTextStyle=function(){return this.getStyle("text","marker")},t}(),Rt=o(314),Nt=o(328),Vt=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Ht=function(t,e){if(!Object(h.isset)(e))return null;var o=e.service;if(Object(h.isset)(e.request)){var r=e.request;if(o){var n=r.action,i=r.parameters;n&&o.action(n),i&&o.setParams(i)}else r.endpoint&&((o=new s.b({server:r.server,client:{id:t.id,secret:t.secret}})).endpoint(r.endpoint),r.action&&o.action(r.action),r.parameters&&o.setParams(r.parameters))}return o},Gt={"tropical-cyclones":"tropical.Systems","tropical-cyclones-break-points":"tropical.Breakpoints"},Ut=function(t){function e(o,r,n){var i=t.call(this)||this;if(i._ready=!1,i._metric=!1,i._layerIdMapping={},i.update=Object(h.debounce)((function(){i._loadForBounds(!0)}),250),i._dblClickTimer=null,!o)throw new Error("[Aeris] Invalid target specified for InteractiveMap, which must be a DOM element or map instance");r=r||{},o instanceof HTMLElement==!1&&(Object(g.isLeaflet)(o)?r.strategy="leaflet":Object(g.isMapbox)(o)?r.strategy="mapbox":Object(g.isGoogle)(o)?r.strategy="google":Object(g.isOpenLayers)(o)&&(r.strategy="openlayers")),r=Object(h.extend)({strategy:"leaflet",center:void 0,zoom:7,metric:!1,timeline:{from:-7200,to:0,intervals:10},refresh:0,attribution:!0,onInit:void 0,reloadOnBoundsChange:!0},r),i._opts=r,r.account&&(i.account=r.account),"mapbox"===r.strategy?i._strategy=new V(o,r):"google"===r.strategy?i._strategy=new dt(o,r):"openlayers"===r.strategy?i._strategy=new it(o,r):i._strategy=new E(o,r),i._strategy.dataSource=i,i._timeline=new c.a(Object(h.extend)(r.timeline,{key:"map-timeline"})),i._sources={},i._layersById={},i._sourceOrder={tile:[]},i._layers=new Bt.a,i._config=new Ft(r.styles),i._metric=i._opts.metric;var a=function(){if(i._indicator=new Rt.a,i._indicator.appendTo(i.strategy.$el),i.strategy.$el.addClass("awxjs__ia-map"),i._setupEvents(),i._ready=!0,r.layers){var t=r.layers;Object(h.isArray)(t)||(t=t.split(",")),t.forEach((function(t){if(Object(h.isString)(t))i.addLayer(t);else if(Object(h.isPlainObject)(t)){var e=t.layer,o=t.options;i.addLayer(e,o)}}))}r.refresh>0&&i.enableAutoUpdate(r.refresh),n&&n(i),i.trigger(e.Event.LOAD),i.trigger(e.Event.READY)};return i._layers.fetch().then((function(){i.strategy.isReady()?a():i.strategy.on("ready",(function(t){a()}))})),i}return Vt(e,t),Object.defineProperty(e.prototype,"map",{get:function(){return this.strategy.map},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strategy",{get:function(){return this._strategy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeline",{get:function(){return this._timeline},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"account",{get:function(){return this._account},set:function(t){this._account=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMetric",{get:function(){return this._metric},enumerable:!0,configurable:!0}),e.prototype.isReady=function(){return this.strategy.isReady()},e.prototype.getCenter=function(){return this.strategy.getCenter()},e.prototype.setCenter=function(t){this.strategy.setCenter(t)},e.prototype.getZoom=function(){return this.strategy.getZoom()},e.prototype.setZoom=function(t){this.strategy.setZoom(t)},e.prototype.setView=function(t,e){this.strategy.setView(t,e)},e.prototype.getBounds=function(){return this.strategy.getBounds()},e.prototype.setBounds=function(t){this.strategy.setBounds(t)},e.prototype.fitBounds=function(t,e){e=e||[10,10],this.strategy.fitBounds(t,e)},e.prototype.setMetric=function(t){this._metric!==t&&(this._metric=t,this.trigger(e.Event.CHANGE_UNITS,{metric:t,unit:t?Nt.a.Metric:Nt.a.Imperial}))},e.prototype.addLayer=function(t,o){var r=this;this._checkReady(),o=Object(h.extend)({animation:{enabled:!0}},Object(h.cloneDeep)(o));var n=t.replace(/\:[^,]+/g,""),i=Object(h.get)(o,"id")||n,a=this.getSourceForId(i);if(a||i!==n||(a=this.getSourceForLayer(n)),a){var c=o.style;return a instanceof l.c&&c&&Object(h.isset)(c.zIndex)&&a.setOrder(c.zIndex),this}if(o.style&&this.config.setStyle(t,o.style),Object(Bt.c)(n)||"tile"===o.type){if(o=o,!0===(!Object(h.isset)(o.validate)||o.validate)&&!this._layers.exists(t))return console.warn("[Aeris] Cannot add layer "+t+", not a valid AMP layer."),this;var p=this._layers.isFuture(t),f=this._layers.isBase(t),d=this._layers.isOverlay(t),y=Object(h.get)(o,"alwaysShow");Object(h.isset)(y)||(y=p?Object(h.get)(this._opts,"timeline.alwaysShowFuture"):Object(h.get)(this._opts,"timeline.alwaysShowPast")),delete o.data;var m=this.requestForMap(t);m.param("format",Object(h.get)(o,"style.format")||"png"),o=d||f?Object(h.extend)(o,{pane:d?"admin":null,offset:0,alwaysShow:!0,animation:{enabled:!1}}):Object(h.extend)(o,{offset:Object(h.get)(o,"data.offset"),future:p,animation:{intervals:Object(h.get)(this._opts,"animation.intervals")}});var v=this.strategy.factory.tileLayer(t,m,Object(h.extend)(o,{time:this.timeline.currentDate(),attribution:this._opts.attribution?u:null}));v.updateVisibility(),a=v,this._sourceOrder.tile.push(t)}else{t=n;var _=this.config.getConfig(t)||{};o=Object(h.extend)({data:{}},_,o);var b=Gt[t];if(b)return Object(g.loadMapModuleConfig)(b,(function(e,n,i){i&&i.initialize(r.account,null,r),n=Object(h.extend)({},n,o);var a=r.createSource(e,n.type,n);r._layerIdMapping[t]=e,r.addSource(a,e)})),this;var O=Ht(this.account,Object(h.extend)({},{server:Object(h.get)(this._opts,"servers.api")},o.data));O||console.error("No request configured for layer '"+t+"'. Check the layer configuration and make sure an ApiRequest instance is defined for 'request'.");var w=void 0;if(Object(Bt.d)(t)||"vector"===o.type||"geojson"===o.type)w="geojson"===o.type?l.a:l.d;else if(Object(Bt.b)(t)||"text"===o.type){w=l.b;var j=Object(h.get)(o,"data.properties");if(!j)throw new Error("Value for `data.properties` option is required for text layers");var k=j.timestamp,E=j.value;if(!k||!E)throw new Error("Value for `data.properties.timestamp` and `data.properties.value` options are required for text layers");Object(h.isString)(E)&&O.fields("id,loc,"+k+","+E),O.plimit(1),o.style={marker:this.config.getTextStyle()},o.data.properties=j}Object(h.isset)(w)&&(a=new w(t,Object(h.extend)(o,{data:{service:O,coordinate:function(t){return Object(h.get)(t,"loc")}},requiresBounds:O.getAction()!==s.a.SEARCH})))}if(a){this.addSource(a,i),this._layersById[i]=n,this.trigger(e.Event.LAYER_ADD,{id:i,layer:n,source:a});var T=Object(h.get)(o,"style.zIndex");a instanceof l.c&&Object(h.isset)(T)&&this.setLayerOrder(t,T)}return this},e.prototype.addLayers=function(t){var e=this;return this._checkReady(),t.forEach((function(t){return e.addLayer(t)})),this},e.prototype.removeLayer=function(t){t=t.replace(/\:.+$/,"");var o=this.getSourceForLayer(t);return o?(this.removeSource(o),this.trigger(e.Event.LAYER_REMOVE,{layer:t.replace(/\:[^,]+/g,""),source:o}),this):this},e.prototype.removeLayerForId=function(t){var o=this.getSourceForId(t);if(!o)return this;var r=this._layersById[t];return this.removeSource(o),this.trigger(e.Event.LAYER_REMOVE,{id:t,layer:r.replace(/\:[^,]+/g,""),source:o}),this},e.prototype.removeLayers=function(t){var e=this;return t.forEach((function(t){return e.removeLayer(t)})),this},e.prototype.bringLayerToFront=function(t){var e=this,o=this.getSourceForLayer(t);Object.keys(this._sources).length;if(o&&o instanceof l.c){var r=this._sourceOrder.tile,n=r.indexOf(t);-1!==n&&(r.splice(n,1),r.push(t)),Object.keys(this._sources).forEach((function(t){var o=e._sources[t];o instanceof l.c&&o.setOrder(r.indexOf(t)+1)}))}},e.prototype.sendLayerToBack=function(t){var e=this,o=this.getSourceForLayer(t);if(o&&o instanceof l.c){var r=this._sourceOrder.tile,n=r.indexOf(t);-1!==n&&(r.splice(n,1),r.splice(0,0,t)),Object.keys(this._sources).forEach((function(t){var o=e._sources[t];o instanceof l.c&&o.setOrder(r.indexOf(t)+1)}))}},e.prototype.setLayerOrder=function(t,e){var o=this.getSourceForLayer(t);o&&o instanceof l.c&&Object(h.isset)(e)&&o.setOrder(e)},e.prototype.getSourceForLayer=function(t){var e=this._layerIdMapping[t];return e?this.getSource(e):this.getSource(t)},e.prototype.getSourceForId=function(t){var e=this._layerIdMapping[t];return e?this.getSource(e):this.getSource(t)},e.prototype.createSource=function(t,e,o){if(o=o||{},"tile"===e){var r=Object(h.get)(o,"data.service");return Object(h.isFunction)(r)&&(r=r()),r instanceof S.b&&r.type(S.a.TILE),this.strategy.factory.tileLayer(t,r,Object(h.extend)(o,{time:this.timeline.currentDate()}))}if(o.data&&!Object(h.isset)(Object(h.get)(o,"data.service"))){var n=Ht(this.account,Object(h.extend)({},{request:{server:Object(h.get)(this._opts,"servers.api")}},o.data));Object(h.set)(o,"data.service",n)}return"vector"===e?new l.d(t,o):"geojson"===e?new l.a(t,o):"text"===e?new l.b(t,o):null},e.prototype.addSource=function(t,o){var r=this;if(void 0===o&&(o=null),this._checkReady(),Object(h.isset)(o)||(o=t.key),Object(h.isset)(o)){this._sources[o]=t,t.strategy=this.strategy,t.enabled=!0,t.identifier=o,this.strategy.addSource(t),Object(h.has)(t,"animation")&&Object(h.isset)(t.animation)&&this.timeline.add(o,t.animation);var n=this.getBounds();return t instanceof l.d&&(t.on("data:load:start",(function(t){return r.trigger(e.Event.SOURCE_LOAD_START,t.data)})),t.on("data:load:done",(function(t){return r.trigger(e.Event.SOURCE_LOAD_DONE,t.data)})),t.load({bounds:n,from:this.timeline.startDate(),to:this.timeline.endDate()}).catch((function(e){console.error("[Aeris] Failed to load data for VectorSource with key "+t.key,e)}))),this.trigger(e.Event.SOURCE_ADD,{source:t,id:o}),this}console.error("[Aeris] A key was not provided when adding the map source to InteractiveMap using `addSource()`")},e.prototype.addModule=function(t,e){var o=this;void 0===e&&(e=null);var r=function(t){t.initialize(o.account,null,o);var r=t.source(),n=o.createSource(t.id,r.type,Object(h.extend)({},r,e));n&&o.addSource(n,t.id)},n=function(t){o.isReady?r(t):o.on("ready",(function(){r(t)}))};Object(h.isFunction)(t)?t().then((function(t){var e=new(t=t.default||t);n(e)})):Object(h.has)(t,"source")&&n(t)},e.prototype.removeSource=function(t){var o=this;return t.enabled=!1,this.strategy.removeSource(t),Object(h.has)(t,"animation")&&(t.animation.reset(),this.timeline.remove(t.animation)),Object(h.has)(t,"reset")&&t.reset(),Object.keys(this._sources).forEach((function(e){o._sources[e]===t&&delete o._sources[e]})),this.trigger(e.Event.SOURCE_REMOVE,{source:t,id:t.key}),this},e.prototype.getSource=function(t){return this._sources[t]},e.prototype.hasSource=function(t){return Object(h.isset)(this._sources[t])},e.prototype.showCallout=function(t,e){this.strategy.showCallout(t,e)},e.prototype.enableAutoUpdate=function(t){var e=this;!this._refreshInterval&&t>0&&(t=Math.max(t,10),this._refreshInterval&&window.clearInterval(this._refreshInterval),this._refreshInterval=setInterval((function(){e._updateTimeline()}),1e3*t))},e.prototype.disableAutoUpdate=function(){this._refreshInterval&&clearInterval(this._refreshInterval),this._refreshInterval=null},e.prototype._updateTimeline=function(){var t=this.timeline,e=!1;(t.isAnimating()||t.isLoading())&&(t.stop(),t.reset(),e=!0),t.refresh(),t.goToInit(),e&&(clearTimeout(this._restartAnimationTimeout),this._restartAnimationTimeout=setTimeout((function(){t.play()}),300))},e.prototype._loadForBounds=function(t){var e=this;void 0===t&&(t=!1);var o=this.getBounds();Object.keys(this._sources).forEach((function(r){var n=e.getSource(r);if(n&&n instanceof l.d){var i=n;(i.requiresBounds||!1===i.hasData()||t)&&i.load({bounds:o,from:e.timeline.startDate(),to:e.timeline.endDate()}).catch((function(t){console.error("[Aeris] Failed to load data for VectorSource with key "+n.key,t)}))}}))},e.prototype._updateSourcesForDate=function(t){var e=this;Object(h.isDate)(t)||(t=new Date(t)),Object.keys(this._sources).forEach((function(o){var r=e.getSource(o);r instanceof l.c&&(r.timestamp=t)}))},e.prototype._beforeBoundsChange=function(){this.timeline.stop()},e.prototype._afterBoundsChange=function(){var t=this._opts.reloadOnBoundsChange;if(t&&this._stateForData){var e=this._stateForData,o=this.strategy.coordToPoint(e.center),r=this.strategy.coordToPoint(this.getCenter());t=Math.max(Math.abs(o.x-r.x),Math.abs(o.y-r.y))>=50,this.getZoom()!==e.zoom&&(t=!0)}t&&(this.timeline.reset(),this._loadForBounds(),this._stateForData={center:this.getCenter(),bounds:this.getBounds(),zoom:this.getZoom()})},e.prototype._setupEvents=function(){var t=this;this.strategy.on("click",(function(o){null===t._dblClickTimer&&(t._dblClickTimer=setTimeout((function(){o.data.coord=Object(p.b)(o.data.coord),t.trigger(e.Event.CLICK,o.data),t._dblClickTimer=null}),200))})),this.strategy.on("dblclick",(function(o){clearTimeout(t._dblClickTimer),t._dblClickTimer=null,t.trigger(e.Event.DBL_CLICK,o.data)})),this.strategy.on("resize",(function(o){return t.trigger(e.Event.RESIZE,o.data)})),this.strategy.on("mousedown",(function(o){return t.trigger(e.Event.MOUSE_DOWN,o.data)})),this.strategy.on("mouseup",(function(o){return t.trigger(e.Event.MOUSE_UP,o.data)})),this.strategy.on("mouseover",(function(o){return t.trigger(e.Event.MOUSE_OVER,o.data)})),this.strategy.on("mouseout",(function(o){return t.trigger(e.Event.MOUSE_OUT,o.data)})),this.strategy.on("mousemove",(function(o){return t.trigger(e.Event.MOUSE_MOVE,o.data)})),this.strategy.on("change:bounds",(function(o){t.trigger(e.Event.CHANGE_BOUNDS,{bounds:t.getBounds()}),t._afterBoundsChange()})),this.strategy.on("change:center",(function(o){return t.trigger(e.Event.CHANGE_CENTER,{center:t.getCenter()})})),this.strategy.on("change:zoom",(function(o){return t.trigger(e.Event.CHANGE_ZOOM,{zoom:t.getZoom()})})),this.strategy.on("move",(function(o){return t.trigger(e.Event.MOVE)})),this.strategy.on("move:start",(function(o){t.timeline.pause(),t.trigger(e.Event.MOVE_START),t.trigger(e.Event.BEFORE_CHANGE_BOUNDS,{bounds:t.getBounds()})})),this.strategy.on("move:end",(function(o){t.timeline.resume(),t.trigger(e.Event.MOVE_END),t.trigger(e.Event.AFTER_CHANGE_BOUNDS,{bounds:t.getBounds()})})),this.strategy.on("zoom",(function(o){return t.trigger(e.Event.ZOOM)})),this.strategy.on("zoom:start",(function(o){t.timeline.pause(),t.trigger(e.Event.ZOOM_START),t.trigger(e.Event.BEFORE_CHANGE_BOUNDS,{bounds:t.getBounds()})})),this.strategy.on("zoom:end",(function(o){t.timeline.resume(),t.trigger(e.Event.ZOOM_END),t.trigger(e.Event.AFTER_CHANGE_BOUNDS,{bounds:t.getBounds()})})),this.strategy.on("idle",(function(e){return t.trigger("idle")})),this.strategy.on("marker:click",(function(o){return t.trigger(e.Event.MARKER_CLICK,o.data)})),this.strategy.on("marker:drag",(function(o){return t.trigger(e.Event.MARKER_DRAG,o.data)})),this.strategy.on("marker:dragstart",(function(o){return t.trigger(e.Event.MARKER_DRAG_START,o.data)})),this.strategy.on("marker:dragend",(function(o){return t.trigger(e.Event.MARKER_DRAG_END,o.data)})),this.strategy.on("shape:click",(function(o){return t.trigger(e.Event.SHAPE_CLICK,o.data)})),this.on("before:change:bounds",(function(){t._beforeBoundsChange()})),this.timeline.on("play load:start",(function(){t.trigger(e.Event.TIMELINE_PLAY,{timeline:t.timeline})})),this.timeline.on("stop",(function(o){clearTimeout(t._restartAnimationTimeout),t.trigger(e.Event.TIMELINE_STOP,{timeline:t.timeline})})),this.timeline.on("advance",(function(o){t.timeline.isAnimating()||t._updateSourcesForDate(o.data.time),t.trigger(e.Event.TIMELINE_CHANGE,Object(h.extend)({timeline:t.timeline},o.data))})),this.timeline.on("start:change end:change",(function(){t.timeline.reset(),t.update()})),this.timeline.on("load:start",(function(){t._indicator.startAnimating()})),this.timeline.on("load:done",(function(){t._indicator.stopAnimating()}))},e.prototype._checkReady=function(){if(!this._ready){throw new Error("[Aeris] Must wait for an instance of InteractiveMap to be fully\n\t\t\t\tinitialized before calling methods on it. Observe the `load` or `ready` events\n\t\t\t\tthat are triggered when an InteractiveMap instance is fully initialized.".replace(/\n\s+/g," "))}},e.prototype.requestForMap=function(t){var e=new S.b({server:Object(h.get)(this._opts,"servers.maps"),client:{id:this.account.id,secret:this.account.secret}},{type:S.a.TILE});return e.layers(t),e},e.Event={READY:"ready",LOAD:"load",CLICK:"click",DBL_CLICK:"dblclick",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",MOUSE_MOVE:"mousemove",RESIZE:"resize",CHANGE_BOUNDS:"change:bounds",BEFORE_CHANGE_BOUNDS:"before:change:bounds",AFTER_CHANGE_BOUNDS:"after:change:bounds",CHANGE_CENTER:"change:center",CHANGE_ZOOM:"change:zoom",CHANGE_UNITS:"change:units",MOVE:"move",MOVE_START:"move:start",MOVE_END:"move:end",ZOOM:"zoom",ZOOM_START:"zoom:start",ZOOM_END:"zoom:end",MARKER_CLICK:"marker:click",MARKER_DRAG:"marker:drag",MARKER_DRAG_START:"marker:dragstart",MARKER_DRAG_END:"marker:dragend",SHAPE_CLICK:"shape:click",TIMELINE_PLAY:"timeline:play",TIMELINE_STOP:"timeline:stop",TIMELINE_CHANGE:"timeline:change",LAYER_ADD:"layer:add",LAYER_REMOVE:"layer:remove",LAYER_UPDATE:"layer:update",SOURCE_ADD:"source:add",SOURCE_REMOVE:"source:remove",SOURCE_LOAD_START:"source:load:start",SOURCE_LOAD_DONE:"source:load:done"},e}(a.a);e.a=Ut}}]);